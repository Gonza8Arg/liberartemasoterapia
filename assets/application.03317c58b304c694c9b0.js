!function(){var t={382:function(t){
/*!
 * dist/inputmask
 * https://github.com/RobinHerbots/Inputmask
 * Copyright (c) 2010 - 2024 Robin Herbots
 * Licensed under the MIT license
 * Version: 5.0.9
 */
"undefined"!=typeof self&&self,t.exports=function(){"use strict";var t={3976:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default={_maxTestPos:500,placeholder:"_",optionalmarker:["[","]"],quantifiermarker:["{","}"],groupmarker:["(",")"],alternatormarker:"|",escapeChar:"\\",mask:null,regex:null,oncomplete:function(){},onincomplete:function(){},oncleared:function(){},repeat:0,greedy:!1,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,insertModeVisual:!0,clearIncomplete:!1,alias:null,onKeyDown:function(){},onBeforeMask:null,onBeforePaste:function(t,e){return"function"==typeof e.onBeforeMask?e.onBeforeMask.call(this,t,e):t},onBeforeWrite:null,onUnMask:null,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:function(){},skipOptionalPartCharacter:" ",numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",_radixDance:!1,groupSeparator:"",keepStatic:null,positionCaretOnTab:!0,tabThrough:!1,supportsInputType:["text","tel","url","password","search"],isComplete:null,preValidation:null,postValidation:null,staticDefinitionSymbol:void 0,jitMasking:!1,nullable:!0,inputEventOnly:!1,noValuePatching:!1,positionCaretOnClick:"lvp",casing:null,inputmode:"text",importDataAttributes:!0,shiftPositions:!0,usePrototypeDefinitions:!0,validationEventTimeOut:3e3,substitutes:{}}},7392:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default={9:{validator:"[0-9０-９]",definitionSymbol:"*"},a:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",definitionSymbol:"*"},"*":{validator:"[0-9０-９A-Za-zА-яЁёÀ-ÿµ]"}}},253:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){if(void 0===n)return t.__data?t.__data[e]:null;t.__data=t.__data||{},t.__data[e]=n}},3776:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Event=void 0,e.off=function(t,e){var n,i;return u(this[0])&&t&&(n=this[0].eventRegistry,i=this[0],t.split(" ").forEach((function(t){var r=o(t.split("."),2);(function(t,i){var r,s,o=[];if(t.length>0)if(void 0===e)for(r=0,s=n[t][i].length;r<s;r++)o.push({ev:t,namespace:i&&i.length>0?i:"global",handler:n[t][i][r]});else o.push({ev:t,namespace:i&&i.length>0?i:"global",handler:e});else if(i.length>0)for(var a in n)for(var l in n[a])if(l===i)if(void 0===e)for(r=0,s=n[a][l].length;r<s;r++)o.push({ev:a,namespace:l,handler:n[a][l][r]});else o.push({ev:a,namespace:l,handler:e});return o})(r[0],r[1]).forEach((function(t){var e=t.ev,r=t.handler;!function(t,e,r){if(t in n==1)if(i.removeEventListener?i.removeEventListener(t,r,!1):i.detachEvent&&i.detachEvent("on".concat(t),r),"global"===e)for(var s in n[t])n[t][s].splice(n[t][s].indexOf(r),1);else n[t][e].splice(n[t][e].indexOf(r),1)}(e,t.namespace,r)}))}))),this},e.on=function(t,e){if(u(this[0])){var n=this[0].eventRegistry,i=this[0];t.split(" ").forEach((function(t){var r=o(t.split("."),2),s=r[0],a=r[1];!function(t,r){i.addEventListener?i.addEventListener(t,e,!1):i.attachEvent&&i.attachEvent("on".concat(t),e),n[t]=n[t]||{},n[t][r]=n[t][r]||[],n[t][r].push(e)}(s,void 0===a?"global":a)}))}return this},e.trigger=function(t){var e=arguments;if(u(this[0]))for(var n=this[0].eventRegistry,i=this[0],o="string"==typeof t?t.split(" "):[t.type],a=0;a<o.length;a++){var l=o[a].split("."),d=l[0],h=l[1]||"global";if(void 0!==c&&"global"===h){var p,f={bubbles:!0,cancelable:!0,composed:!0,detail:arguments[1]};if(c.createEvent){try{"input"===d?(f.inputType="insertText",p=new InputEvent(d,f)):p=new CustomEvent(d,f)}catch(t){(p=c.createEvent("CustomEvent")).initCustomEvent(d,f.bubbles,f.cancelable,f.detail)}t.type&&(0,r.default)(p,t),i.dispatchEvent(p)}else(p=c.createEventObject()).eventType=d,p.detail=arguments[1],t.type&&(0,r.default)(p,t),i.fireEvent("on"+p.eventType,p)}else if(void 0!==n[d]){arguments[0]=arguments[0].type?arguments[0]:s.default.Event(arguments[0]),arguments[0].detail=arguments.slice(1);var m=n[d];("global"===h?Object.values(m).flat():m[h]).forEach((function(t){return t.apply(i,e)}))}}return this};var i=l(n(9380)),r=l(n(600)),s=l(n(4963));function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=s.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function l(t){return t&&t.__esModule?t:{default:t}}var c=i.default.document;function u(t){return t instanceof Element}var d=e.Event=void 0;"function"==typeof i.default.CustomEvent?e.Event=d=i.default.CustomEvent:i.default.Event&&c&&c.createEvent?(e.Event=d=function(t,e){e=e||{bubbles:!1,cancelable:!1,composed:!0,detail:void 0};var n=c.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n},d.prototype=i.default.Event.prototype):"undefined"!=typeof Event&&(e.Event=d=Event)},600:function(t,e){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(){var e,i,r,s,o,a,l=arguments[0]||{},c=1,u=arguments.length,d=!1;for("boolean"==typeof l&&(d=l,l=arguments[c]||{},c++),"object"!==n(l)&&"function"!=typeof l&&(l={});c<u;c++)if(null!=(e=arguments[c]))for(i in e)r=l[i],l!==(s=e[i])&&(d&&s&&("[object Object]"===Object.prototype.toString.call(s)||(o=Array.isArray(s)))?(o?(o=!1,a=r&&Array.isArray(r)?r:[]):a=r&&"[object Object]"===Object.prototype.toString.call(r)?r:{},l[i]=t(d,a,s)):void 0!==s&&(l[i]=s));return l}},4963:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n(9380)),r=a(n(253)),s=n(3776),o=a(n(600));function a(t){return t&&t.__esModule?t:{default:t}}var l=i.default.document;function c(t){return t instanceof c?t:this instanceof c?void(null!=t&&t!==i.default&&(this[0]=t.nodeName?t:void 0!==t[0]&&t[0].nodeName?t[0]:l.querySelector(t),void 0!==this[0]&&null!==this[0]&&(this[0].eventRegistry=this[0].eventRegistry||{}))):new c(t)}c.prototype={on:s.on,off:s.off,trigger:s.trigger},c.extend=o.default,c.data=r.default,c.Event=s.Event,e.default=c},9845:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.mobile=e.iphone=e.ie=void 0;var i,r=(i=n(9380))&&i.__esModule?i:{default:i},s=r.default.navigator&&r.default.navigator.userAgent||"";e.ie=s.indexOf("MSIE ")>0||s.indexOf("Trident/")>0,e.mobile=r.default.navigator&&r.default.navigator.userAgentData&&r.default.navigator.userAgentData.mobile||r.default.navigator&&r.default.navigator.maxTouchPoints||"ontouchstart"in r.default,e.iphone=/iphone/i.test(s)},7184:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.replace(n,"\\$1")};var n=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"].join("|\\")+")","gim")},6030:function(t,e,n){function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.EventHandlers=void 0;var r,s=n(9845),o=(r=n(9380))&&r.__esModule?r:{default:r},a=n(7760),l=n(2839),c=n(8711),u=n(7215),d=n(4713);function h(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */h=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,s=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function d(t,e,n,i){var r=e&&e.prototype instanceof b?e:b,o=Object.create(r.prototype),a=new D(i||[]);return s(o,"_invoke",{value:O(t,n,a)}),o}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var f="suspendedStart",m="suspendedYield",g="executing",v="completed",y={};function b(){}function w(){}function k(){}var x={};u(x,a,(function(){return this}));var S=Object.getPrototypeOf,C=S&&S(S(L([])));C&&C!==n&&r.call(C,a)&&(x=C);var _=k.prototype=b.prototype=Object.create(x);function T(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function M(t,e){function n(s,o,a,l){var c=p(t[s],t,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==i(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,l)}),(function(t){n("throw",t,a,l)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,l)}))}l(c.arg)}var o;s(this,"_invoke",{value:function(t,i){function r(){return new e((function(e,r){n(t,i,e,r)}))}return o=o?o.then(r,r):r()}})}function O(e,n,i){var r=f;return function(s,o){if(r===g)throw new Error("Generator is already running");if(r===v){if("throw"===s)throw o;return{value:t,done:!0}}for(i.method=s,i.arg=o;;){var a=i.delegate;if(a){var l=E(a,i);if(l){if(l===y)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===f)throw r=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=g;var c=p(e,n,i);if("normal"===c.type){if(r=i.done?v:m,c.arg===y)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(r=v,i.method="throw",i.arg=c.arg)}}}function E(e,n){var i=n.method,r=e.iterator[i];if(r===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var s=p(r,e.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,y;var o=s.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,o=function n(){for(;++s<e.length;)if(r.call(e,s))return n.value=e[s],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(i(e)+" is not iterable")}return w.prototype=k,s(_,"constructor",{value:k,configurable:!0}),s(k,"constructor",{value:w,configurable:!0}),w.displayName=u(k,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,u(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},T(M.prototype),u(M.prototype,l,(function(){return this})),e.AsyncIterator=M,e.async=function(t,n,i,r,s){void 0===s&&(s=Promise);var o=new M(d(t,n,i,r),s);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},T(_),u(_,c,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=L,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(i,r){return a.type="throw",a.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),N(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;N(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:L(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),y}},e}function p(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function m(t,e,n,i,r,s,o){try{var a=t[s](o),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(i,r)}var g,v,y=e.EventHandlers={keyEvent:function(t,e,n,i,r){var o=this.inputmask,h=o.opts,p=o.dependencyLib,f=o.maskset,m=this,g=p(m),v=t.key,b=c.caret.call(o,m),w=h.onKeyDown.call(this,t,c.getBuffer.call(o),b,h);if(void 0!==w)return w;if(v===l.keys.Backspace||v===l.keys.Delete||s.iphone&&v===l.keys.BACKSPACE_SAFARI||t.ctrlKey&&v===l.keys.x&&!("oncut"in m))t.preventDefault(),u.handleRemove.call(o,m,v,b),(0,a.writeBuffer)(m,c.getBuffer.call(o,!0),f.p,t,m.inputmask._valueGet()!==c.getBuffer.call(o).join(""));else if(v===l.keys.End||v===l.keys.PageDown){t.preventDefault();var k=c.seekNext.call(o,c.getLastValidPosition.call(o));c.caret.call(o,m,t.shiftKey?b.begin:k,k,!0)}else v===l.keys.Home&&!t.shiftKey||v===l.keys.PageUp?(t.preventDefault(),c.caret.call(o,m,0,t.shiftKey?b.begin:0,!0)):h.undoOnEscape&&v===l.keys.Escape&&!0!==t.altKey?((0,a.checkVal)(m,!0,!1,o.undoValue.split("")),g.trigger("click")):v!==l.keys.Insert||t.shiftKey||t.ctrlKey||void 0!==o.userOptions.insertMode?!0===h.tabThrough&&v===l.keys.Tab?!0===t.shiftKey?(b.end=c.seekPrevious.call(o,b.end,!0),!0===d.getTest.call(o,b.end-1).match.static&&b.end--,b.begin=c.seekPrevious.call(o,b.end,!0),b.begin>=0&&b.end>0&&(t.preventDefault(),c.caret.call(o,m,b.begin,b.end))):(b.begin=c.seekNext.call(o,b.begin,!0),b.end=c.seekNext.call(o,b.begin,!0),b.end<f.maskLength&&b.end--,b.begin<=f.maskLength&&(t.preventDefault(),c.caret.call(o,m,b.begin,b.end))):t.shiftKey||(h.insertModeVisual&&!1===h.insertMode?v===l.keys.ArrowRight?setTimeout((function(){var t=c.caret.call(o,m);c.caret.call(o,m,t.begin)}),0):v===l.keys.ArrowLeft&&setTimeout((function(){var t=c.translatePosition.call(o,m.inputmask.caretPos.begin);c.translatePosition.call(o,m.inputmask.caretPos.end),o.isRTL?c.caret.call(o,m,t+(t===f.maskLength?0:1)):c.caret.call(o,m,t-(0===t?0:1))}),0):void 0===o.keyEventHook||o.keyEventHook(t)):u.isSelection.call(o,b)?h.insertMode=!h.insertMode:(h.insertMode=!h.insertMode,c.caret.call(o,m,b.begin,b.begin));return o.isComposing=v==l.keys.Process||v==l.keys.Unidentified,o.ignorable=v.length>1&&!("textarea"===m.tagName.toLowerCase()&&v==l.keys.Enter),y.keypressEvent.call(this,t,e,n,i,r)},keypressEvent:function(t,e,n,i,r){var s=this.inputmask||this,o=s.opts,d=s.dependencyLib,h=s.maskset,p=s.el,f=d(p),m=t.key;if(!0===e||t.ctrlKey&&t.altKey&&!s.ignorable||!(t.ctrlKey||t.metaKey||s.ignorable)){if(m){var g,v=e?{begin:r,end:r}:c.caret.call(s,p);e||(m=o.substitutes[m]||m),h.writeOutBuffer=!0;var y=u.isValid.call(s,v,m,i,void 0,void 0,void 0,e);if(!1!==y&&(c.resetMaskSet.call(s,!0),g=void 0!==y.caret?y.caret:c.seekNext.call(s,y.pos.begin?y.pos.begin:y.pos),h.p=g),g=o.numericInput&&void 0===y.caret?c.seekPrevious.call(s,g):g,!1!==n&&(setTimeout((function(){o.onKeyValidation.call(p,m,y)}),0),h.writeOutBuffer&&!1!==y)){var b=c.getBuffer.call(s);(0,a.writeBuffer)(p,b,g,t,!0!==e)}if(t.preventDefault(),e)return!1!==y&&(y.forwardPosition=g),y}}else m===l.keys.Enter&&s.undoValue!==s._valueGet(!0)&&(s.undoValue=s._valueGet(!0),setTimeout((function(){f.trigger("change")}),0))},pasteEvent:(g=h().mark((function t(e){var n,i,r,s,l,u;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=function(t,n,i,r,o){var l=c.caret.call(t,n,void 0,void 0,!0),u=i.substr(0,l.begin),d=i.substr(l.end,i.length);if(u==(t.isRTL?c.getBufferTemplate.call(t).slice().reverse():c.getBufferTemplate.call(t)).slice(0,l.begin).join("")&&(u=""),d==(t.isRTL?c.getBufferTemplate.call(t).slice().reverse():c.getBufferTemplate.call(t)).slice(l.end).join("")&&(d=""),r=u+r+d,t.isRTL&&!0!==s.numericInput){r=r.split("");var h,f=p(c.getBufferTemplate.call(t));try{for(f.s();!(h=f.n()).done;){var m=h.value;r[0]===m&&r.shift()}}catch(t){f.e(t)}finally{f.f()}r=r.reverse().join("")}var g=r;if("function"==typeof o){if(!1===(g=o.call(t,g,s)))return!1;g||(g=i)}(0,a.checkVal)(n,!0,!1,g.toString().split(""),e)},i=this,r=this.inputmask,s=r.opts,l=r._valueGet(!0),r.skipInputEvent=!0,e.clipboardData&&e.clipboardData.getData?u=e.clipboardData.getData("text/plain"):o.default.clipboardData&&o.default.clipboardData.getData&&(u=o.default.clipboardData.getData("Text")),n(r,i,l,u,s.onBeforePaste),e.preventDefault();case 7:case"end":return t.stop()}}),t,this)})),v=function(){var t=this,e=arguments;return new Promise((function(n,i){var r=g.apply(t,e);function s(t){m(r,n,i,s,o,"next",t)}function o(t){m(r,n,i,s,o,"throw",t)}s(void 0)}))},function(t){return v.apply(this,arguments)}),inputFallBackEvent:function(t){var e,n=this.inputmask,i=n.opts,r=n.dependencyLib,o=this,u=o.inputmask._valueGet(!0),h=(n.isRTL?c.getBuffer.call(n).slice().reverse():c.getBuffer.call(n)).join(""),p=c.caret.call(n,o,void 0,void 0,!0);if(h!==u){if(e=function(t,e,r){for(var s,o,a,l=t.substr(0,r.begin).split(""),u=t.substr(r.begin).split(""),h=e.substr(0,r.begin).split(""),p=e.substr(r.begin).split(""),f=l.length>=h.length?l.length:h.length,m=u.length>=p.length?u.length:p.length,g="",v=[],y="~";l.length<f;)l.push(y);for(;h.length<f;)h.push(y);for(;u.length<m;)u.unshift(y);for(;p.length<m;)p.unshift(y);var b=l.concat(u),w=h.concat(p);for(o=0,s=b.length;o<s;o++)switch(a=d.getPlaceholder.call(n,c.translatePosition.call(n,o)),g){case"insertText":w[o-1]===b[o]&&r.begin==b.length-1&&v.push(b[o]),o=s;break;case"insertReplacementText":case"deleteContentBackward":b[o]===y?r.end++:o=s;break;default:b[o]!==w[o]&&(b[o+1]!==y&&b[o+1]!==a&&void 0!==b[o+1]||(w[o]!==a||w[o+1]!==y)&&w[o]!==y?w[o+1]===y&&w[o]===b[o+1]?(g="insertText",v.push(b[o]),r.begin--,r.end--):b[o]!==a&&b[o]!==y&&(b[o+1]===y||w[o]!==b[o]&&w[o+1]===b[o+1])?(g="insertReplacementText",v.push(b[o]),r.begin--):b[o]===y?(g="deleteContentBackward",(c.isMask.call(n,c.translatePosition.call(n,o),!0)||w[o]===i.radixPoint)&&r.end++):o=s:(g="insertText",v.push(b[o]),r.begin--,r.end--))}return{action:g,data:v,caret:r}}(u,h,p),(o.inputmask.shadowRoot||o.ownerDocument).activeElement!==o&&o.focus(),(0,a.writeBuffer)(o,c.getBuffer.call(n)),c.caret.call(n,o,p.begin,p.end,!0),!s.mobile&&n.skipNextInsert&&"insertText"===t.inputType&&"insertText"===e.action&&n.isComposing)return!1;switch("insertCompositionText"===t.inputType&&"insertText"===e.action&&n.isComposing?n.skipNextInsert=!0:n.skipNextInsert=!1,e.action){case"insertText":case"insertReplacementText":e.data.forEach((function(t,e){var i=new r.Event("keypress");i.key=t,n.ignorable=!1,y.keypressEvent.call(o,i)})),setTimeout((function(){n.$el.trigger("keyup")}),0);break;case"deleteContentBackward":var f=new r.Event("keydown");f.key=l.keys.Backspace,y.keyEvent.call(o,f);break;default:(0,a.applyInputValue)(o,u),c.caret.call(n,o,p.begin,p.end,!0)}t.preventDefault()}},setValueEvent:function(t){var e=this.inputmask,n=e.dependencyLib,i=this,r=t&&t.detail?t.detail[0]:arguments[1];void 0===r&&(r=i.inputmask._valueGet(!0)),(0,a.applyInputValue)(i,r,new n.Event("input")),(t.detail&&void 0!==t.detail[1]||void 0!==arguments[2])&&c.caret.call(e,i,t.detail?t.detail[1]:arguments[2])},focusEvent:function(t){var e=this.inputmask,n=e.opts,i=e&&e._valueGet();n.showMaskOnFocus&&i!==c.getBuffer.call(e).join("")&&(0,a.writeBuffer)(this,c.getBuffer.call(e),c.seekNext.call(e,c.getLastValidPosition.call(e))),!0!==n.positionCaretOnTab||!1!==e.mouseEnter||u.isComplete.call(e,c.getBuffer.call(e))&&-1!==c.getLastValidPosition.call(e)||y.clickEvent.apply(this,[t,!0]),e.undoValue=e&&e._valueGet(!0)},invalidEvent:function(t){this.inputmask.validationEvent=!0},mouseleaveEvent:function(){var t=this.inputmask,e=t.opts,n=this;t.mouseEnter=!1,e.clearMaskOnLostFocus&&(n.inputmask.shadowRoot||n.ownerDocument).activeElement!==n&&(0,a.HandleNativePlaceholder)(n,t.originalPlaceholder)},clickEvent:function(t,e){var n=this.inputmask;n.clicked++;var i=this;if((i.inputmask.shadowRoot||i.ownerDocument).activeElement===i){var r=c.determineNewCaretPosition.call(n,c.caret.call(n,i),e);void 0!==r&&c.caret.call(n,i,r)}},cutEvent:function(t){var e=this.inputmask,n=e.maskset,i=this,r=c.caret.call(e,i),s=e.isRTL?c.getBuffer.call(e).slice(r.end,r.begin):c.getBuffer.call(e).slice(r.begin,r.end),d=e.isRTL?s.reverse().join(""):s.join("");o.default.navigator&&o.default.navigator.clipboard?o.default.navigator.clipboard.writeText(d):o.default.clipboardData&&o.default.clipboardData.getData&&o.default.clipboardData.setData("Text",d),u.handleRemove.call(e,i,l.keys.Delete,r),(0,a.writeBuffer)(i,c.getBuffer.call(e),n.p,t,e.undoValue!==e._valueGet(!0))},blurEvent:function(t){var e=this.inputmask,n=e.opts,i=e.dependencyLib;e.clicked=0;var r=i(this),s=this;if(s.inputmask){(0,a.HandleNativePlaceholder)(s,e.originalPlaceholder);var o=s.inputmask._valueGet(),l=c.getBuffer.call(e).slice();""!==o&&(n.clearMaskOnLostFocus&&(-1===c.getLastValidPosition.call(e)&&o===c.getBufferTemplate.call(e).join("")?l=[]:a.clearOptionalTail.call(e,l)),!1===u.isComplete.call(e,l)&&(setTimeout((function(){r.trigger("incomplete")}),0),n.clearIncomplete&&(c.resetMaskSet.call(e,!1),l=n.clearMaskOnLostFocus?[]:c.getBufferTemplate.call(e).slice())),(0,a.writeBuffer)(s,l,void 0,t)),o=e._valueGet(!0),e.undoValue!==o&&(""!=o||e.undoValue!=c.getBufferTemplate.call(e).join("")||e.undoValue==c.getBufferTemplate.call(e).join("")&&e.maskset.validPositions.length>0)&&(e.undoValue=o,r.trigger("change"))}},mouseenterEvent:function(){var t=this.inputmask,e=t.opts.showMaskOnHover,n=this;if(t.mouseEnter=!0,(n.inputmask.shadowRoot||n.ownerDocument).activeElement!==n){var i=(t.isRTL?c.getBufferTemplate.call(t).slice().reverse():c.getBufferTemplate.call(t)).join("");e&&(0,a.HandleNativePlaceholder)(n,i)}},submitEvent:function(){var t=this.inputmask,e=t.opts;t.undoValue!==t._valueGet(!0)&&t.$el.trigger("change"),-1===c.getLastValidPosition.call(t)&&t._valueGet&&t._valueGet()===c.getBufferTemplate.call(t).join("")&&t._valueSet(""),e.clearIncomplete&&!1===u.isComplete.call(t,c.getBuffer.call(t))&&t._valueSet(""),e.removeMaskOnSubmit&&(t._valueSet(t.unmaskedvalue(),!0),setTimeout((function(){(0,a.writeBuffer)(t.el,c.getBuffer.call(t))}),0))},resetEvent:function(){var t=this.inputmask;t.refreshValue=!0,setTimeout((function(){(0,a.applyInputValue)(t.el,t._valueGet(!0))}),0)}}},9716:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.EventRuler=void 0;var i,r=n(7760),s=(i=n(2394))&&i.__esModule?i:{default:i},o=n(2839),a=n(8711);e.EventRuler={on:function(t,e,n){var i=t.inputmask.dependencyLib,l=function(e){e.originalEvent&&(e=e.originalEvent||e,arguments[0]=e);var l,c=this,u=c.inputmask,d=u?u.opts:void 0;if(void 0===u&&"FORM"!==this.nodeName){var h=i.data(c,"_inputmask_opts");i(c).off(),h&&new s.default(h).mask(c)}else{if(["submit","reset","setvalue"].includes(e.type)||"FORM"===this.nodeName||!(c.disabled||c.readOnly&&!("keydown"===e.type&&e.ctrlKey&&e.key===o.keys.c||!1===d.tabThrough&&e.key===o.keys.Tab))){switch(e.type){case"input":if(!0===u.skipInputEvent)return u.skipInputEvent=!1,e.preventDefault();break;case"click":case"focus":return u.validationEvent?(u.validationEvent=!1,t.blur(),(0,r.HandleNativePlaceholder)(t,(u.isRTL?a.getBufferTemplate.call(u).slice().reverse():a.getBufferTemplate.call(u)).join("")),setTimeout((function(){t.focus()}),d.validationEventTimeOut),!1):(l=arguments,void setTimeout((function(){t.inputmask&&n.apply(c,l)}),0))}var p=n.apply(c,arguments);return!1===p&&(e.preventDefault(),e.stopPropagation()),p}e.preventDefault()}};["submit","reset"].includes(e)?(l=l.bind(t),null!==t.form&&i(t.form).on(e,l)):i(t).on(e,l),t.inputmask.events[e]=t.inputmask.events[e]||[],t.inputmask.events[e].push(l)},off:function(t,e){if(t.inputmask&&t.inputmask.events){var n=t.inputmask.dependencyLib,i=t.inputmask.events;for(var r in e&&((i=[])[e]=t.inputmask.events[e]),i){for(var s=i[r];s.length>0;){var o=s.pop();["submit","reset"].includes(r)?null!==t.form&&n(t.form).off(r,o):n(t).off(r,o)}delete t.inputmask.events[r]}}}}},219:function(t,e,n){var i=h(n(7184)),r=h(n(2394)),s=n(2839),o=n(8711),a=n(4713);function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=s.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=void 0,r=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==u(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i.key,"string"),"symbol"===u(r)?r:String(r)),i)}var r}function h(t){return t&&t.__esModule?t:{default:t}}n(1313);var p=r.default.dependencyLib,f=function(){function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mask=e,this.format=n,this.opts=i,this.inputmask=r,this._date=new Date(1,0,1),this.initDateObject(e,this.opts,this.inputmask)}var e,n,i;return e=t,(n=[{key:"date",get:function(){return void 0===this._date&&(this._date=new Date(1,0,1),this.initDateObject(void 0,this.opts,this.inputmask)),this._date}},{key:"initDateObject",value:function(t,e,n){var i;for(S(e).lastIndex=0;i=S(e).exec(this.format);){var r=/\d+$/.exec(i[0]),s=r?i[0][0]+"x":i[0],o=void 0;if(void 0!==t){if(r){var l=S(e).lastIndex,c=E.call(n,i.index,e,n&&n.maskset);S(e).lastIndex=l,o=t.slice(0,t.indexOf(c.nextMatch[0]))}else{for(var u=i[0][0],d=i.index;n&&(e.placeholder[a.getTest.call(n,d).match.placeholder]||a.getTest.call(n,d).match.placeholder)===u;)d++;var h=d-i.index;o=t.slice(0,h||y[s]&&y[s][4]||s.length)}t=t.slice(o.length)}Object.prototype.hasOwnProperty.call(y,s)&&this.setValue(this,o,s,y[s][2],y[s][1])}}},{key:"setValue",value:function(t,e,n,i,r){if(void 0!==e)switch(i){case"ampm":t[i]=e,t["raw"+i]=e.replace(/\s/g,"_");break;case"month":if("mmm"===n||"mmmm"===n){t[i]=T("mmm"===n?g.monthNames.slice(0,12).findIndex((function(t){return e.toLowerCase()===t.toLowerCase()}))+1:g.monthNames.slice(12,24).findIndex((function(t){return e.toLowerCase()===t.toLowerCase()}))+1,2),t[i]="00"===t[i]?"":t[i].toString(),t["raw"+i]=t[i];break}default:t[i]=e.replace(/[^0-9]/g,"0"),t["raw"+i]=e.replace(/\s/g,"_")}if(void 0!==r){var s=t[i];("day"===i&&29===parseInt(s)||"month"===i&&2===parseInt(s))&&(29!==parseInt(t.day)||2!==parseInt(t.month)||""!==t.year&&void 0!==t.year||t._date.setFullYear(2012,1,29)),"day"===i&&(v=!0,0===parseInt(s)&&(s=1)),"month"===i&&(v=!0),"year"===i&&(v=!0,s.length<y[n][4]&&(s=T(s,y[n][4],!0))),(""!==s&&!isNaN(s)||"ampm"===i)&&r.call(t._date,s)}}},{key:"reset",value:function(){this._date=new Date(1,0,1)}},{key:"reInit",value:function(){this._date=void 0,this.date}}])&&d(e.prototype,n),i&&d(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),m=(new Date).getFullYear(),g=r.default.prototype.i18n,v=!1,y={d:["[1-9]|[12][0-9]|3[01]",Date.prototype.setDate,"day",Date.prototype.getDate],dd:["0[1-9]|[12][0-9]|3[01]",Date.prototype.setDate,"day",function(){return T(Date.prototype.getDate.call(this),2)}],ddd:[""],dddd:[""],m:["[1-9]|1[012]",function(t){var e=t?parseInt(t):0;return e>0&&e--,Date.prototype.setMonth.call(this,e)},"month",function(){return Date.prototype.getMonth.call(this)+1}],mm:["0[1-9]|1[012]",function(t){var e=t?parseInt(t):0;return e>0&&e--,Date.prototype.setMonth.call(this,e)},"month",function(){return T(Date.prototype.getMonth.call(this)+1,2)}],mmm:[g.monthNames.slice(0,12).join("|"),function(t){var e=g.monthNames.slice(0,12).findIndex((function(e){return t.toLowerCase()===e.toLowerCase()}));return-1!==e&&Date.prototype.setMonth.call(this,e)},"month",function(){return g.monthNames.slice(0,12)[Date.prototype.getMonth.call(this)]}],mmmm:[g.monthNames.slice(12,24).join("|"),function(t){var e=g.monthNames.slice(12,24).findIndex((function(e){return t.toLowerCase()===e.toLowerCase()}));return-1!==e&&Date.prototype.setMonth.call(this,e)},"month",function(){return g.monthNames.slice(12,24)[Date.prototype.getMonth.call(this)]}],yy:["[0-9]{2}",function(t){var e=(new Date).getFullYear().toString().slice(0,2);Date.prototype.setFullYear.call(this,"".concat(e).concat(t))},"year",function(){return T(Date.prototype.getFullYear.call(this),2)},2],yyyy:["[0-9]{4}",Date.prototype.setFullYear,"year",function(){return T(Date.prototype.getFullYear.call(this),4)},4],h:["[1-9]|1[0-2]",Date.prototype.setHours,"hours",Date.prototype.getHours],hh:["0[1-9]|1[0-2]",Date.prototype.setHours,"hours",function(){return T(Date.prototype.getHours.call(this),2)}],hx:[function(t){return"[0-9]{".concat(t,"}")},Date.prototype.setHours,"hours",function(t){return Date.prototype.getHours}],H:["1?[0-9]|2[0-3]",Date.prototype.setHours,"hours",Date.prototype.getHours],HH:["0[0-9]|1[0-9]|2[0-3]",Date.prototype.setHours,"hours",function(){return T(Date.prototype.getHours.call(this),2)}],Hx:[function(t){return"[0-9]{".concat(t,"}")},Date.prototype.setHours,"hours",function(t){return function(){return T(Date.prototype.getHours.call(this),t)}}],M:["[1-5]?[0-9]",Date.prototype.setMinutes,"minutes",Date.prototype.getMinutes],MM:["0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]",Date.prototype.setMinutes,"minutes",function(){return T(Date.prototype.getMinutes.call(this),2)}],s:["[1-5]?[0-9]",Date.prototype.setSeconds,"seconds",Date.prototype.getSeconds],ss:["0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]",Date.prototype.setSeconds,"seconds",function(){return T(Date.prototype.getSeconds.call(this),2)}],l:["[0-9]{3}",Date.prototype.setMilliseconds,"milliseconds",function(){return T(Date.prototype.getMilliseconds.call(this),3)},3],L:["[0-9]{2}",Date.prototype.setMilliseconds,"milliseconds",function(){return T(Date.prototype.getMilliseconds.call(this),2)},2],t:["[ap]",w,"ampm",k,1],tt:["[ap]m",w,"ampm",k,2],T:["[AP]",w,"ampm",k,1],TT:["[AP]M",w,"ampm",k,2],Z:[".*",void 0,"Z",function(){var t=this.toString().match(/\((.+)\)/)[1];return t.includes(" ")&&(t=(t=t.replace("-"," ").toUpperCase()).split(" ").map((function(t){return l(t,1)[0]})).join("")),t}],o:[""],S:[""]},b={isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};function w(t){var e=this.getHours();t.toLowerCase().includes("p")?this.setHours(e+12):t.toLowerCase().includes("a")&&e>=12&&this.setHours(e-12)}function k(){var t=this.getHours();return(t=t||12)>=12?"PM":"AM"}function x(t){var e=/\d+$/.exec(t[0]);if(e&&void 0!==e[0]){var n=y[t[0][0]+"x"].slice("");return n[0]=n[0](e[0]),n[3]=n[3](e[0]),n}if(y[t[0]])return y[t[0]]}function S(t){if(!t.tokenizer){var e=[],n=[];for(var i in y)if(/\.*x$/.test(i)){var r=i[0]+"\\d+";-1===n.indexOf(r)&&n.push(r)}else-1===e.indexOf(i[0])&&e.push(i[0]);t.tokenizer="("+(n.length>0?n.join("|")+"|":"")+e.join("+|")+")+?|.",t.tokenizer=new RegExp(t.tokenizer,"g")}return t.tokenizer}function C(t,e,n){if(!v)return!0;if(void 0===t.rawday||!isFinite(t.rawday)&&new Date(t.date.getFullYear(),isFinite(t.rawmonth)?t.month:t.date.getMonth()+1,0).getDate()>=t.day||"29"==t.day&&(!isFinite(t.rawyear)||void 0===t.rawyear||""===t.rawyear)||new Date(t.date.getFullYear(),isFinite(t.rawmonth)?t.month:t.date.getMonth()+1,0).getDate()>=t.day)return e;if("29"==t.day){var i=E.call(this,e.pos,n,this.maskset);if(i.targetMatch&&"yyyy"===i.targetMatch[0]&&e.pos-i.targetMatchIndex==2)return e.remove=e.pos+1,e}else if(2==t.date.getMonth()&&"30"==t.day&&void 0!==e.c)return t.day="03",t.date.setDate(3),t.date.setMonth(1),e.insert=[{pos:e.pos,c:"0"},{pos:e.pos+1,c:e.c}],e.caret=o.seekNext.call(this,e.pos+1),e;return!1}function _(t,e,n,r){var s,o,a="",l=0,c={};for(S(n).lastIndex=0;s=S(n).exec(t);){if(void 0===e)if(o=x(s))a+="("+o[0]+")",n.placeholder&&""!==n.placeholder?(c[l]=n.placeholder[s.index%n.placeholder.length],c[n.placeholder[s.index%n.placeholder.length]]=s[0].charAt(0)):c[l]=s[0].charAt(0);else switch(s[0]){case"[":a+="(";break;case"]":a+=")?";break;default:a+=(0,i.default)(s[0]),c[l]=s[0].charAt(0)}else(o=x(s))?!0!==r&&o[3]?a+=o[3].call(e.date):o[2]?a+=e["raw"+o[2]]:a+=s[0]:a+=s[0];l++}return void 0===e&&(n.placeholder=c),a}function T(t,e,n){for(t=String(t),e=e||2;t.length<e;)t=n?t+"0":"0"+t;return t}function M(t,e,n){return"string"==typeof t?new f(t,e,n,this):t&&"object"===u(t)&&Object.prototype.hasOwnProperty.call(t,"date")?t:void 0}function O(t,e){return _(e.inputFormat,{date:t},e)}function E(t,e,n){var i,r,s=this,o=n&&n.tests[t]?e.placeholder[n.tests[t][0].match.placeholder]||n.tests[t][0].match.placeholder:"",l=0,c=0;for(S(e).lastIndex=0;r=S(e).exec(e.inputFormat);){var u=/\d+$/.exec(r[0]);if(u)c=parseInt(u[0]);else{for(var d=r[0][0],h=l;s&&(e.placeholder[a.getTest.call(s,h).match.placeholder]||a.getTest.call(s,h).match.placeholder)===d;)h++;0==(c=h-l)&&(c=r[0].length)}if(l+=c,-1!=r[0].indexOf(o)||l>=t+1){i=r,r=S(e).exec(e.inputFormat);break}}return{targetMatchIndex:l-c,nextMatch:r,targetMatch:i}}r.default.extendAliases({datetime:{mask:function(t){return t.numericInput=!1,y.S=g.ordinalSuffix.join("|"),t.inputFormat=b[t.inputFormat]||t.inputFormat,t.displayFormat=b[t.displayFormat]||t.displayFormat||t.inputFormat,t.outputFormat=b[t.outputFormat]||t.outputFormat||t.inputFormat,t.regex=_(t.inputFormat,void 0,t),t.min=M(t.min,t.inputFormat,t),t.max=M(t.max,t.inputFormat,t),null},placeholder:"",inputFormat:"isoDateTime",displayFormat:null,outputFormat:null,min:null,max:null,skipOptionalPartCharacter:"",preValidation:function(t,e,n,i,r,s,o,a){if(a)return!0;if(isNaN(n)&&t[e]!==n){var l=E.call(this,e,r,s);if(l.nextMatch&&l.nextMatch[0]===n&&l.targetMatch[0].length>1){var c=x(l.targetMatch)[0];if(new RegExp(c).test("0"+t[e-1]))return t[e]=t[e-1],t[e-1]="0",{fuzzy:!0,buffer:t,refreshFromBuffer:{start:e-1,end:e+1},pos:e+1}}}return!0},postValidation:function(t,e,n,i,r,s,o,l){var c,u,d=this;if(o)return!0;if(!1===i&&(((c=E.call(d,e+1,r,s)).targetMatch&&c.targetMatchIndex===e&&c.targetMatch[0].length>1&&void 0!==y[c.targetMatch[0]]||(c=E.call(d,e+2,r,s)).targetMatch&&c.targetMatchIndex===e+1&&c.targetMatch[0].length>1&&void 0!==y[c.targetMatch[0]])&&(u=x(c.targetMatch)[0]),void 0!==u&&(void 0!==s.validPositions[e+1]&&new RegExp(u).test(n+"0")?(t[e]=n,t[e+1]="0",i={pos:e+2,caret:e}):new RegExp(u).test("0"+n)&&(t[e]="0",t[e+1]=n,i={pos:e+2})),!1===i))return i;if(i.fuzzy&&(t=i.buffer,e=i.pos),(c=E.call(d,e,r,s)).targetMatch&&c.targetMatch[0]&&void 0!==y[c.targetMatch[0]]){var h=x(c.targetMatch);u=h[0];var p=t.slice(c.targetMatchIndex,c.targetMatchIndex+c.targetMatch[0].length);if(!1===new RegExp(u).test(p.join(""))&&2===c.targetMatch[0].length&&s.validPositions[c.targetMatchIndex]&&s.validPositions[c.targetMatchIndex+1]&&(s.validPositions[c.targetMatchIndex+1].input="0"),"year"==h[2])for(var f=a.getMaskTemplate.call(d,!1,1,void 0,!0),g=e+1;g<t.length;g++)t[g]=f[g],s.validPositions.splice(e+1,1)}var v=i,b=M.call(d,t.join(""),r.inputFormat,r);return v&&!isNaN(b.date.getTime())&&(r.prefillYear&&(v=function(t,e,n){if(t.year!==t.rawyear){var i=m.toString(),r=t.rawyear.replace(/[^0-9]/g,""),s=i.slice(0,r.length),o=i.slice(r.length);if(2===r.length&&r===s){var a=new Date(m,t.month-1,t.day);t.day==a.getDate()&&(!n.max||n.max.date.getTime()>=a.getTime())&&(t.date.setFullYear(m),t.year=i,e.insert=[{pos:e.pos+1,c:o[0]},{pos:e.pos+2,c:o[1]}])}}return e}(b,v,r)),v=function(t,e,n,i,r){if(!e)return e;if(e&&n.min&&!isNaN(n.min.date.getTime())){var s;for(t.reset(),S(n).lastIndex=0;s=S(n).exec(n.inputFormat);){var o;if((o=x(s))&&o[3]){for(var a=o[1],l=t[o[2]],c=n.min[o[2]],u=n.max?n.max[o[2]]:c+1,d=[],h=!1,p=0;p<c.length;p++)void 0!==i.validPositions[p+s.index]||h?(d[p]=l[p],h=h||l[p]>c[p]):(p+s.index==0&&l[p]<c[p]?(d[p]=l[p],h=!0):d[p]=c[p],"year"===o[2]&&l.length-1==p&&c!=u&&(d=(parseInt(d.join(""))+1).toString().split("")),"ampm"===o[2]&&c!=u&&n.min.date.getTime()>t.date.getTime()&&(d[p]=u[p]));a.call(t._date,d.join(""))}}e=n.min.date.getTime()<=t.date.getTime(),t.reInit()}return e&&n.max&&(isNaN(n.max.date.getTime())||(e=n.max.date.getTime()>=t.date.getTime())),e}(b,v=C.call(d,b,v,r),r,s)),void 0!==e&&v&&i.pos!==e?{buffer:_(r.inputFormat,b,r).split(""),refreshFromBuffer:{start:e,end:i.pos},pos:i.caret||i.pos}:v},onKeyDown:function(t,e,n,i){t.ctrlKey&&t.key===s.keys.ArrowRight&&(this.inputmask._valueSet(O(new Date,i)),p(this).trigger("setvalue"))},onUnMask:function(t,e,n){return e?_(n.outputFormat,M.call(this,t,n.inputFormat,n),n,!0):e},casing:function(t,e,n,i){if(0==e.nativeDef.indexOf("[ap]"))return t.toLowerCase();if(0==e.nativeDef.indexOf("[AP]"))return t.toUpperCase();var r=a.getTest.call(this,[n-1]);return 0==r.match.def.indexOf("[AP]")||0===n||r&&r.input===String.fromCharCode(s.keyCode.Space)||r&&r.match.def===String.fromCharCode(s.keyCode.Space)?t.toUpperCase():t.toLowerCase()},onBeforeMask:function(t,e){return"[object Date]"===Object.prototype.toString.call(t)&&(t=O(t,e)),t},insertMode:!1,insertModeVisual:!1,shiftPositions:!1,keepStatic:!1,inputmode:"numeric",prefillYear:!0}})},1313:function(t,e,n){var i,r=(i=n(2394))&&i.__esModule?i:{default:i};r.default.dependencyLib.extend(!0,r.default.prototype.i18n,{dayNames:["Mon","Tue","Wed","Thu","Fri","Sat","Sun","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],ordinalSuffix:["st","nd","rd","th"]})},3851:function(t,e,n){var i,r=(i=n(2394))&&i.__esModule?i:{default:i},s=n(8711),o=n(4713);function a(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}r.default.extendDefinitions({A:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",casing:"upper"},"&":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",casing:"upper"},"#":{validator:"[0-9A-Fa-f]",casing:"upper"}});var c=/25[0-5]|2[0-4][0-9]|[01][0-9][0-9]/;function u(t,e,n,i,r){if(n-1>-1&&"."!==e.buffer[n-1]?(t=e.buffer[n-1]+t,t=n-2>-1&&"."!==e.buffer[n-2]?e.buffer[n-2]+t:"0"+t):t="00"+t,r.greedy&&parseInt(t)>255&&c.test("00"+t.charAt(2))){var s=[].concat(a(e.buffer.slice(0,n)),[".",t.charAt(2)]);if(s.join("").match(/\./g).length<4)return{refreshFromBuffer:!0,buffer:s,caret:n+2}}return c.test(t)}r.default.extendAliases({cssunit:{regex:"[+-]?[0-9]+\\.?([0-9]+)?(px|em|rem|ex|%|in|cm|mm|pt|pc)"},url:{regex:"(https?|ftp)://.*",autoUnmask:!1,keepStatic:!1,tabThrough:!0},ip:{mask:"i{1,3}.j{1,3}.k{1,3}.l{1,3}",definitions:{i:{validator:u},j:{validator:u},k:{validator:u},l:{validator:u}},onUnMask:function(t,e,n){return t},inputmode:"decimal",substitutes:{",":"."}},email:{mask:function(t){var e=t.separator,n=t.quantifier,i="*{1,64}[.*{1,64}][.*{1,64}][.*{1,63}]@-{1,63}.-{1,63}[.-{1,63}][.-{1,63}]",r=i;if(e)for(var s=0;s<n;s++)r+="[".concat(e).concat(i,"]");return r},greedy:!1,casing:"lower",separator:null,quantifier:5,skipOptionalPartCharacter:"",onBeforePaste:function(t,e){return(t=t.toLowerCase()).replace("mailto:","")},definitions:{"*":{validator:"[0-9１-９A-Za-zА-яЁёÀ-ÿµ!#$%&'*+/=?^_`{|}~-]"},"-":{validator:"[0-9A-Za-z-]"}},onUnMask:function(t,e,n){return t},inputmode:"email"},mac:{mask:"##:##:##:##:##:##"},vin:{mask:"V{13}9{4}",definitions:{V:{validator:"[A-HJ-NPR-Za-hj-npr-z\\d]",casing:"upper"}},clearIncomplete:!0,autoUnmask:!0},ssn:{mask:"999-99-9999",postValidation:function(t,e,n,i,r,a,l){var c=o.getMaskTemplate.call(this,!0,s.getLastValidPosition.call(this),!0,!0);return/^(?!219-09-9999|078-05-1120)(?!666|000|9.{2}).{3}-(?!00).{2}-(?!0{4}).{4}$/.test(c.join(""))}}})},207:function(t,e,n){var i=a(n(7184)),r=a(n(2394)),s=n(2839),o=n(8711);function a(t){return t&&t.__esModule?t:{default:t}}var l=r.default.dependencyLib;function c(t,e){for(var n="",i=0;i<t.length;i++)r.default.prototype.definitions[t.charAt(i)]||e.definitions[t.charAt(i)]||e.optionalmarker[0]===t.charAt(i)||e.optionalmarker[1]===t.charAt(i)||e.quantifiermarker[0]===t.charAt(i)||e.quantifiermarker[1]===t.charAt(i)||e.groupmarker[0]===t.charAt(i)||e.groupmarker[1]===t.charAt(i)||e.alternatormarker===t.charAt(i)?n+="\\"+t.charAt(i):n+=t.charAt(i);return n}function u(t,e,n,i){if(t.length>0&&e>0&&(!n.digitsOptional||i)){var r=t.indexOf(n.radixPoint),s=!1;n.negationSymbol.back===t[t.length-1]&&(s=!0,t.length--),-1===r&&(t.push(n.radixPoint),r=t.length-1);for(var o=1;o<=e;o++)isFinite(t[r+o])||(t[r+o]="0")}return s&&t.push(n.negationSymbol.back),t}function d(t,e){var n=0;for(var i in"+"===t&&(n=o.seekNext.call(this,e.validPositions.length-1)),e.tests)if((i=parseInt(i))>=n)for(var r=0,s=e.tests[i].length;r<s;r++)if((void 0===e.validPositions[i]||"-"===t)&&e.tests[i][r].match.def===t)return i+(void 0!==e.validPositions[i]&&"-"!==t?1:0);return n}function h(t,e){for(var n=-1,i=0,r=e.validPositions.length;i<r;i++){var s=e.validPositions[i];if(s&&s.match.def===t){n=i;break}}return n}function p(t,e,n,i,r){var s=e.buffer?e.buffer.indexOf(r.radixPoint):-1,o=(-1!==s||i&&r.jitMasking)&&new RegExp(r.definitions[9].validator).test(t);return!i&&r._radixDance&&-1!==s&&o&&null==e.validPositions[s]?{insert:{pos:s===n?s+1:s,c:r.radixPoint},pos:n}:o}r.default.extendAliases({numeric:{mask:function(t){t.repeat=0,t.groupSeparator===t.radixPoint&&t.digits&&"0"!==t.digits&&("."===t.radixPoint?t.groupSeparator=",":","===t.radixPoint?t.groupSeparator=".":t.groupSeparator="")," "===t.groupSeparator&&(t.skipOptionalPartCharacter=void 0),t.placeholder.length>1&&(t.placeholder=t.placeholder.charAt(0)),"radixFocus"===t.positionCaretOnClick&&""===t.placeholder&&(t.positionCaretOnClick="lvp");var e="0",n=t.radixPoint;!0===t.numericInput&&void 0===t.__financeInput?(e="1",t.positionCaretOnClick="radixFocus"===t.positionCaretOnClick?"lvp":t.positionCaretOnClick,t.digitsOptional=!1,isNaN(t.digits)&&(t.digits=2),t._radixDance=!1,n=","===t.radixPoint?"?":"!",""!==t.radixPoint&&void 0===t.definitions[n]&&(t.definitions[n]={},t.definitions[n].validator="["+t.radixPoint+"]",t.definitions[n].placeholder=t.radixPoint,t.definitions[n].static=!0,t.definitions[n].generated=!0)):(t.__financeInput=!1,t.numericInput=!0);var r,s="[+]";if(s+=c(t.prefix,t),""!==t.groupSeparator?(void 0===t.definitions[t.groupSeparator]&&(t.definitions[t.groupSeparator]={},t.definitions[t.groupSeparator].validator="["+t.groupSeparator+"]",t.definitions[t.groupSeparator].placeholder=t.groupSeparator,t.definitions[t.groupSeparator].static=!0,t.definitions[t.groupSeparator].generated=!0),s+=t._mask(t)):s+="9{+}",void 0!==t.digits&&0!==t.digits){var o=t.digits.toString().split(",");isFinite(o[0])&&o[1]&&isFinite(o[1])?s+=n+e+"{"+t.digits+"}":(isNaN(t.digits)||parseInt(t.digits)>0)&&(t.digitsOptional||t.jitMasking?(r=s+n+e+"{0,"+t.digits+"}",t.keepStatic=!0):s+=n+e+"{"+t.digits+"}")}else t.inputmode="numeric";return s+=c(t.suffix,t),s+="[-]",r&&(s=[r+c(t.suffix,t)+"[-]",s]),t.greedy=!1,function(t){void 0===t.parseMinMaxOptions&&(null!==t.min&&(t.min=t.min.toString().replace(new RegExp((0,i.default)(t.groupSeparator),"g"),""),","===t.radixPoint&&(t.min=t.min.replace(t.radixPoint,".")),t.min=isFinite(t.min)?parseFloat(t.min):NaN,isNaN(t.min)&&(t.min=Number.MIN_VALUE)),null!==t.max&&(t.max=t.max.toString().replace(new RegExp((0,i.default)(t.groupSeparator),"g"),""),","===t.radixPoint&&(t.max=t.max.replace(t.radixPoint,".")),t.max=isFinite(t.max)?parseFloat(t.max):NaN,isNaN(t.max)&&(t.max=Number.MAX_VALUE)),t.parseMinMaxOptions="done")}(t),""!==t.radixPoint&&t.substituteRadixPoint&&(t.substitutes["."==t.radixPoint?",":"."]=t.radixPoint),s},_mask:function(t){return"("+t.groupSeparator+"999){+|1}"},digits:"*",digitsOptional:!0,enforceDigitsOnBlur:!1,radixPoint:".",positionCaretOnClick:"radixFocus",_radixDance:!0,groupSeparator:"",allowMinus:!0,negationSymbol:{front:"-",back:""},prefix:"",suffix:"",min:null,max:null,SetMaxOnOverflow:!1,step:1,inputType:"text",unmaskAsNumber:!1,roundingFN:Math.round,inputmode:"decimal",shortcuts:{k:"1000",m:"1000000"},placeholder:"0",greedy:!1,rightAlign:!0,insertMode:!0,autoUnmask:!1,skipOptionalPartCharacter:"",usePrototypeDefinitions:!1,stripLeadingZeroes:!0,substituteRadixPoint:!0,definitions:{0:{validator:p},1:{validator:p,definitionSymbol:"9"},9:{validator:"[0-9０-９٠-٩۰-۹]",definitionSymbol:"*"},"+":{validator:function(t,e,n,i,r){return r.allowMinus&&("-"===t||t===r.negationSymbol.front)}},"-":{validator:function(t,e,n,i,r){return r.allowMinus&&t===r.negationSymbol.back}}},preValidation:function(t,e,n,i,r,s,o,a){var l=this;if(!1!==r.__financeInput&&n===r.radixPoint)return!1;var c=t.indexOf(r.radixPoint),u=e;if(e=function(t,e,n,i,r){return r._radixDance&&r.numericInput&&e!==r.negationSymbol.back&&t<=n&&(n>0||e==r.radixPoint)&&(void 0===i.validPositions[t-1]||i.validPositions[t-1].input!==r.negationSymbol.back)&&(t-=1),t}(e,n,c,s,r),"-"===n||n===r.negationSymbol.front){if(!0!==r.allowMinus)return!1;var p=!1,f=h("+",s),m=h("-",s);return-1!==f&&(p=[f],-1!==m&&p.push(m)),!1!==p?{remove:p,caret:u-r.negationSymbol.back.length}:{insert:[{pos:d.call(l,"+",s),c:r.negationSymbol.front,fromIsValid:!0},{pos:d.call(l,"-",s),c:r.negationSymbol.back,fromIsValid:void 0}],caret:u+r.negationSymbol.back.length}}if(n===r.groupSeparator)return{caret:u};if(a)return!0;if(-1!==c&&!0===r._radixDance&&!1===i&&n===r.radixPoint&&void 0!==r.digits&&(isNaN(r.digits)||parseInt(r.digits)>0)&&c!==e){var g=d.call(l,r.radixPoint,s);return s.validPositions[g]&&(s.validPositions[g].generatedInput=s.validPositions[g].generated||!1),{caret:r._radixDance&&e===c-1?c+1:c}}if(!1===r.__financeInput)if(i){if(r.digitsOptional)return{rewritePosition:o.end};if(!r.digitsOptional){if(o.begin>c&&o.end<=c)return n===r.radixPoint?{insert:{pos:c+1,c:"0",fromIsValid:!0},rewritePosition:c}:{rewritePosition:c+1};if(o.begin<c)return{rewritePosition:o.begin-1}}}else if(!r.showMaskOnHover&&!r.showMaskOnFocus&&!r.digitsOptional&&r.digits>0&&""===this.__valueGet.call(this.el))return{rewritePosition:c};return{rewritePosition:e}},postValidation:function(t,e,n,i,r,s,o){if(!1===i)return i;if(o)return!0;if(null!==r.min||null!==r.max){var a=r.onUnMask(t.slice().reverse().join(""),void 0,l.extend({},r,{unmaskAsNumber:!0}));if(null!==r.min&&a<r.min&&(a.toString().length>r.min.toString().length||a<0))return!1;if(null!==r.max&&a>r.max)return!!r.SetMaxOnOverflow&&{refreshFromBuffer:!0,buffer:u(r.max.toString().replace(".",r.radixPoint).split(""),r.digits,r).reverse()}}return i},onUnMask:function(t,e,n){if(""===e&&!0===n.nullable)return e;var r=t.replace(n.prefix,"");return r=(r=r.replace(n.suffix,"")).replace(new RegExp((0,i.default)(n.groupSeparator),"g"),""),""!==n.placeholder.charAt(0)&&(r=r.replace(new RegExp(n.placeholder.charAt(0),"g"),"0")),n.unmaskAsNumber?(""!==n.radixPoint&&-1!==r.indexOf(n.radixPoint)&&(r=r.replace(i.default.call(this,n.radixPoint),".")),r=(r=r.replace(new RegExp("^"+(0,i.default)(n.negationSymbol.front)),"-")).replace(new RegExp((0,i.default)(n.negationSymbol.back)+"$"),""),Number(r)):r},isComplete:function(t,e){var n=(e.numericInput?t.slice().reverse():t).join("");return n=(n=(n=(n=(n=n.replace(new RegExp("^"+(0,i.default)(e.negationSymbol.front)),"-")).replace(new RegExp((0,i.default)(e.negationSymbol.back)+"$"),"")).replace(e.prefix,"")).replace(e.suffix,"")).replace(new RegExp((0,i.default)(e.groupSeparator)+"([0-9]{3})","g"),"$1"),","===e.radixPoint&&(n=n.replace((0,i.default)(e.radixPoint),".")),isFinite(n)},onBeforeMask:function(t,e){var n;t=null!==(n=t)&&void 0!==n?n:"";var r=e.radixPoint||",";isFinite(e.digits)&&(e.digits=parseInt(e.digits)),"number"!=typeof t&&"number"!==e.inputType||""===r||(t=t.toString().replace(".",r));var s="-"===t.charAt(0)||t.charAt(0)===e.negationSymbol.front,o=t.split(r),a=o[0].replace(/[^\-0-9]/g,""),l=o.length>1?o[1].replace(/[^0-9]/g,""):"",c=o.length>1;t=a+(""!==l?r+l:l);var d=0;if(""!==r&&(d=e.digitsOptional?e.digits<l.length?e.digits:l.length:e.digits,""!==l||!e.digitsOptional)){var h=Math.pow(10,d||1);t=t.replace((0,i.default)(r),"."),isNaN(parseFloat(t))||(t=(e.roundingFN(parseFloat(t)*h)/h).toFixed(d)),t=t.toString().replace(".",r)}if(0===e.digits&&-1!==t.indexOf(r)&&(t=t.substring(0,t.indexOf(r))),null!==e.min||null!==e.max){var p=t.toString().replace(r,".");null!==e.min&&p<e.min?t=e.min.toString().replace(".",r):null!==e.max&&p>e.max&&(t=e.max.toString().replace(".",r))}return s&&"-"!==t.charAt(0)&&(t="-"+t),u(t.toString().split(""),d,e,c).join("")},onBeforeWrite:function(t,e,n,r){function s(t,e){if(!1!==r.__financeInput||e){var n=t.indexOf(r.radixPoint);-1!==n&&t.splice(n,1)}if(""!==r.groupSeparator)for(;-1!==(n=t.indexOf(r.groupSeparator));)t.splice(n,1);return t}var o,a;if(r.stripLeadingZeroes&&(a=function(t,e){var n=new RegExp("(^"+(""!==e.negationSymbol.front?(0,i.default)(e.negationSymbol.front)+"?":"")+(0,i.default)(e.prefix)+")(.*)("+(0,i.default)(e.suffix)+(""!=e.negationSymbol.back?(0,i.default)(e.negationSymbol.back)+"?":"")+"$)").exec(t.slice().reverse().join("")),r=n?n[2]:"",s=!1;return r&&(r=r.split(e.radixPoint.charAt(0))[0],s=new RegExp("^[0"+e.groupSeparator+"]*").exec(r)),!(!s||!(s[0].length>1||s[0].length>0&&s[0].length<r.length))&&s}(e,r)))for(var c=e.join("").lastIndexOf(a[0].split("").reverse().join(""))-(a[0]==a.input?0:1),d=a[0]==a.input?1:0,h=a[0].length-d;h>0;h--)this.maskset.validPositions.splice(c+h,1),delete e[c+h];if(t)switch(t.type){case"blur":case"checkval":if(null!==r.min){var p=r.onUnMask(e.slice().reverse().join(""),void 0,l.extend({},r,{unmaskAsNumber:!0}));if(null!==r.min&&p<r.min)return{refreshFromBuffer:!0,buffer:u(r.min.toString().replace(".",r.radixPoint).split(""),r.digits,r).reverse()}}if(e[e.length-1]===r.negationSymbol.front){var f=new RegExp("(^"+(""!=r.negationSymbol.front?(0,i.default)(r.negationSymbol.front)+"?":"")+(0,i.default)(r.prefix)+")(.*)("+(0,i.default)(r.suffix)+(""!=r.negationSymbol.back?(0,i.default)(r.negationSymbol.back)+"?":"")+"$)").exec(s(e.slice(),!0).reverse().join(""));0==(f?f[2]:"")&&(o={refreshFromBuffer:!0,buffer:[0]})}else""!==r.radixPoint&&e.indexOf(r.radixPoint)===r.suffix.length&&(o&&o.buffer?o.buffer.splice(0,1+r.suffix.length):(e.splice(0,1+r.suffix.length),o={refreshFromBuffer:!0,buffer:s(e)}));if(r.enforceDigitsOnBlur){var m=(o=o||{})&&o.buffer||e.slice().reverse();o.refreshFromBuffer=!0,o.buffer=u(m,r.digits,r,!0).reverse()}}return o},onKeyDown:function(t,e,n,i){var r,o=l(this);if(3!=t.location){var a,c=t.key;if((a=i.shortcuts&&i.shortcuts[c])&&a.length>1)return this.inputmask.__valueSet.call(this,parseFloat(this.inputmask.unmaskedvalue())*parseInt(a)),o.trigger("setvalue"),!1}if(t.ctrlKey)switch(t.key){case s.keys.ArrowUp:return this.inputmask.__valueSet.call(this,parseFloat(this.inputmask.unmaskedvalue())+parseInt(i.step)),o.trigger("setvalue"),!1;case s.keys.ArrowDown:return this.inputmask.__valueSet.call(this,parseFloat(this.inputmask.unmaskedvalue())-parseInt(i.step)),o.trigger("setvalue"),!1}if(!t.shiftKey&&(t.key===s.keys.Delete||t.key===s.keys.Backspace||t.key===s.keys.BACKSPACE_SAFARI)&&n.begin!==e.length){if(e[t.key===s.keys.Delete?n.begin-1:n.end]===i.negationSymbol.front)return r=e.slice().reverse(),""!==i.negationSymbol.front&&r.shift(),""!==i.negationSymbol.back&&r.pop(),o.trigger("setvalue",[r.join(""),n.begin]),!1;if(!0===i._radixDance){var d,h=e.indexOf(i.radixPoint);if(i.digitsOptional){if(0===h)return(r=e.slice().reverse()).pop(),o.trigger("setvalue",[r.join(""),n.begin>=r.length?r.length:n.begin]),!1}else if(-1!==h&&(n.begin<h||n.end<h||t.key===s.keys.Delete&&(n.begin===h||n.begin-1===h)))return n.begin===n.end&&(t.key===s.keys.Backspace||t.key===s.keys.BACKSPACE_SAFARI?n.begin++:t.key===s.keys.Delete&&n.begin-1===h&&(d=l.extend({},n),n.begin--,n.end--)),(r=e.slice().reverse()).splice(r.length-n.begin,n.begin-n.end+1),r=u(r,i.digits,i).join(""),d&&(n=d),o.trigger("setvalue",[r,n.begin>=r.length?h+1:n.begin]),!1}}}},currency:{prefix:"",groupSeparator:",",alias:"numeric",digits:2,digitsOptional:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",inputmode:"numeric",digits:0},percentage:{alias:"numeric",min:0,max:100,suffix:" %",digits:0,allowMinus:!1},indianns:{alias:"numeric",_mask:function(t){return"("+t.groupSeparator+"99){*|1}("+t.groupSeparator+"999){1|1}"},groupSeparator:",",radixPoint:".",placeholder:"0",digits:2,digitsOptional:!1}})},9380:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=!("undefined"==typeof window||!window.document||!window.document.createElement);e.default=n?window:{}},7760:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.HandleNativePlaceholder=function(t,e){var n=t?t.inputmask:this;if(i.ie){if(t.inputmask._valueGet()!==e&&(t.placeholder!==e||""===t.placeholder)){var r=o.getBuffer.call(n).slice(),s=t.inputmask._valueGet();if(s!==e){var a=o.getLastValidPosition.call(n);-1===a&&s===o.getBufferTemplate.call(n).join("")?r=[]:-1!==a&&u.call(n,r),h(t,r)}}}else t.placeholder!==e&&(t.placeholder=e,""===t.placeholder&&t.removeAttribute("placeholder"))},e.applyInputValue=c,e.checkVal=d,e.clearOptionalTail=u,e.unmaskedvalue=function(t){var e=t?t.inputmask:this,n=e.opts,i=e.maskset;if(t){if(void 0===t.inputmask)return t.value;t.inputmask&&t.inputmask.refreshValue&&c(t,t.inputmask._valueGet(!0))}for(var r=[],s=i.validPositions,a=0,l=s.length;a<l;a++)s[a]&&s[a].match&&(1!=s[a].match.static||Array.isArray(i.metadata)&&!0!==s[a].generatedInput)&&r.push(s[a].input);var u=0===r.length?"":(e.isRTL?r.reverse():r).join("");if("function"==typeof n.onUnMask){var d=(e.isRTL?o.getBuffer.call(e).slice().reverse():o.getBuffer.call(e)).join("");u=n.onUnMask.call(e,d,u,n)}return u},e.writeBuffer=h;var i=n(9845),r=n(6030),s=n(2839),o=n(8711),a=n(7215),l=n(4713);function c(t,e,n){var i=t?t.inputmask:this,r=i.opts;t.inputmask.refreshValue=!1,"function"==typeof r.onBeforeMask&&(e=r.onBeforeMask.call(i,e,r)||e),d(t,!0,!1,e=(e||"").toString().split(""),n),i.undoValue=i._valueGet(!0),(r.clearMaskOnLostFocus||r.clearIncomplete)&&t.inputmask._valueGet()===o.getBufferTemplate.call(i).join("")&&-1===o.getLastValidPosition.call(i)&&t.inputmask._valueSet("")}function u(t){t.length=0;for(var e,n=l.getMaskTemplate.call(this,!0,0,!0,void 0,!0);void 0!==(e=n.shift());)t.push(e);return t}function d(t,e,n,i,s){var c,u=t?t.inputmask:this,d=u.maskset,p=u.opts,f=u.dependencyLib,m=i.slice(),g="",v=-1,y=p.skipOptionalPartCharacter;p.skipOptionalPartCharacter="",o.resetMaskSet.call(u,!1),u.clicked=0,v=p.radixPoint?o.determineNewCaretPosition.call(u,{begin:0,end:0},!1,!1===p.__financeInput?"radixFocus":void 0).begin:0,d.p=v,u.caretPos={begin:v};var b=[],w=u.caretPos;if(m.forEach((function(t,e){if(void 0!==t){var i=new f.Event("_checkval");i.key=t,g+=t;var s=o.getLastValidPosition.call(u,void 0,!0);!function(t,e){for(var n=l.getMaskTemplate.call(u,!0,0).slice(t,o.seekNext.call(u,t,!1,!1)).join("").replace(/'/g,""),i=n.indexOf(e);i>0&&" "===n[i-1];)i--;var r=0===i&&!o.isMask.call(u,t)&&(l.getTest.call(u,t).match.nativeDef===e.charAt(0)||!0===l.getTest.call(u,t).match.static&&l.getTest.call(u,t).match.nativeDef==="'"+e.charAt(0)||" "===l.getTest.call(u,t).match.nativeDef&&(l.getTest.call(u,t+1).match.nativeDef===e.charAt(0)||!0===l.getTest.call(u,t+1).match.static&&l.getTest.call(u,t+1).match.nativeDef==="'"+e.charAt(0)));if(!r&&i>0&&!o.isMask.call(u,t,!1,!0)){var s=o.seekNext.call(u,t);u.caretPos.begin<s&&(u.caretPos={begin:s})}return r}(v,g)?(c=r.EventHandlers.keypressEvent.call(u,i,!0,!1,n,u.caretPos.begin))&&(v=u.caretPos.begin+1,g=""):c=r.EventHandlers.keypressEvent.call(u,i,!0,!1,n,s+1),c?(void 0!==c.pos&&d.validPositions[c.pos]&&!0===d.validPositions[c.pos].match.static&&void 0===d.validPositions[c.pos].alternation&&(b.push(c.pos),u.isRTL||(c.forwardPosition=c.pos+1)),h.call(u,void 0,o.getBuffer.call(u),c.forwardPosition,i,!1),u.caretPos={begin:c.forwardPosition,end:c.forwardPosition},w=u.caretPos):void 0===d.validPositions[e]&&m[e]===l.getPlaceholder.call(u,e)&&o.isMask.call(u,e,!0)?u.caretPos.begin++:u.caretPos=w}})),b.length>0){var k,x,S=o.seekNext.call(u,-1,void 0,!1);if(!a.isComplete.call(u,o.getBuffer.call(u))&&b.length<=S||a.isComplete.call(u,o.getBuffer.call(u))&&b.length>0&&b.length!==S&&0===b[0])for(var C=S;void 0!==(k=b.shift());)if(k<C){var _=new f.Event("_checkval");if((x=d.validPositions[k]).generatedInput=!0,_.key=x.input,(c=r.EventHandlers.keypressEvent.call(u,_,!0,!1,n,C))&&void 0!==c.pos&&c.pos!==k&&d.validPositions[c.pos]&&!0===d.validPositions[c.pos].match.static)b.push(c.pos);else if(!c)break;C++}}e&&h.call(u,t,o.getBuffer.call(u),c?c.forwardPosition:u.caretPos.begin,s||new f.Event("checkval"),s&&("input"===s.type&&u.undoValue!==o.getBuffer.call(u).join("")||"paste"===s.type)),p.skipOptionalPartCharacter=y}function h(t,e,n,i,r){var l=t?t.inputmask:this,c=l.opts,u=l.dependencyLib;if(i&&"function"==typeof c.onBeforeWrite){var d=c.onBeforeWrite.call(l,i,e,n,c);if(d){if(d.refreshFromBuffer){var h=d.refreshFromBuffer;a.refreshFromBuffer.call(l,!0===h?h:h.start,h.end,d.buffer||e),e=o.getBuffer.call(l,!0)}void 0!==n&&(n=void 0!==d.caret?d.caret:n)}}if(void 0!==t&&(t.inputmask._valueSet(e.join("")),void 0===n||void 0!==i&&"blur"===i.type||o.caret.call(l,t,n,void 0,void 0,void 0!==i&&"keydown"===i.type&&(i.key===s.keys.Delete||i.key===s.keys.Backspace)),void 0===t.inputmask.writeBufferHook||t.inputmask.writeBufferHook(n),!0===r)){var p=u(t),f=t.inputmask._valueGet();t.inputmask.skipInputEvent=!0,p.trigger("input"),setTimeout((function(){f===o.getBufferTemplate.call(l).join("")?p.trigger("cleared"):!0===a.isComplete.call(l,e)&&p.trigger("complete")}),0)}}},2394:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=m(n(3976)),r=m(n(7392)),s=m(n(4963)),o=n(9716),a=m(n(9380)),l=n(7760),c=n(157),u=n(2391),d=n(8711),h=n(7215),p=n(4713);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function m(t){return t&&t.__esModule?t:{default:t}}var g=a.default.document,v="_inputmask_opts";function y(t,e,n){if(!(this instanceof y))return new y(t,e,n);this.dependencyLib=s.default,this.el=void 0,this.events={},this.maskset=void 0,!0!==n&&("[object Object]"===Object.prototype.toString.call(t)?e=t:(e=e||{},t&&(e.alias=t)),this.opts=s.default.extend(!0,{},this.defaults,e),this.noMasksCache=e&&void 0!==e.definitions,this.userOptions=e||{},b(this.opts.alias,e,this.opts)),this.refreshValue=!1,this.undoValue=void 0,this.$el=void 0,this.skipInputEvent=!1,this.validationEvent=!1,this.ignorable=!1,this.maxLength,this.mouseEnter=!1,this.clicked=0,this.originalPlaceholder=void 0,this.isComposing=!1,this.hasAlternator=!1}function b(t,e,n){var i=y.prototype.aliases[t];return i?(i.alias&&b(i.alias,void 0,n),s.default.extend(!0,n,i),s.default.extend(!0,n,e),!0):(null===n.mask&&(n.mask=t),!1)}y.prototype={dataAttribute:"data-inputmask",defaults:i.default,definitions:r.default,aliases:{},masksCache:{},i18n:{},get isRTL(){return this.opts.isRTL||this.opts.numericInput},mask:function(t){var e=this;return"string"==typeof t&&(t=g.getElementById(t)||g.querySelectorAll(t)),(t=t.nodeName?[t]:Array.isArray(t)?t:[].slice.call(t)).forEach((function(t,n){var i=s.default.extend(!0,{},e.opts);if(function(t,e,n,i){function r(e,r){var s=""===i?e:i+"-"+e;null!==(r=void 0!==r?r:t.getAttribute(s))&&("string"==typeof r&&(0===e.indexOf("on")?r=a.default[r]:"false"===r?r=!1:"true"===r&&(r=!0)),n[e]=r)}if(!0===e.importDataAttributes){var o,l,c,u,d=t.getAttribute(i);if(d&&""!==d&&(d=d.replace(/'/g,'"'),l=JSON.parse("{"+d+"}")),l)for(u in c=void 0,l)if("alias"===u.toLowerCase()){c=l[u];break}for(o in r("alias",c),n.alias&&b(n.alias,n,e),e){if(l)for(u in c=void 0,l)if(u.toLowerCase()===o.toLowerCase()){c=l[u];break}r(o,c)}}return s.default.extend(!0,e,n),("rtl"===t.dir||e.rightAlign)&&(t.style.textAlign="right"),("rtl"===t.dir||e.numericInput)&&(t.dir="ltr",t.removeAttribute("dir"),e.isRTL=!0),Object.keys(n).length}(t,i,s.default.extend(!0,{},e.userOptions),e.dataAttribute)){var r=(0,u.generateMaskSet)(i,e.noMasksCache);void 0!==r&&(void 0!==t.inputmask&&(t.inputmask.opts.autoUnmask=!0,t.inputmask.remove()),t.inputmask=new y(void 0,void 0,!0),t.inputmask.opts=i,t.inputmask.noMasksCache=e.noMasksCache,t.inputmask.userOptions=s.default.extend(!0,{},e.userOptions),t.inputmask.el=t,t.inputmask.$el=(0,s.default)(t),t.inputmask.maskset=r,s.default.data(t,v,e.userOptions),c.mask.call(t.inputmask))}})),t&&t[0]&&t[0].inputmask||this},option:function(t,e){return"string"==typeof t?this.opts[t]:"object"===f(t)?(s.default.extend(this.userOptions,t),this.el&&!0!==e&&this.mask(this.el),this):void 0},unmaskedvalue:function(t){if(this.maskset=this.maskset||(0,u.generateMaskSet)(this.opts,this.noMasksCache),void 0===this.el||void 0!==t){var e=("function"==typeof this.opts.onBeforeMask&&this.opts.onBeforeMask.call(this,t,this.opts)||t).split("");l.checkVal.call(this,void 0,!1,!1,e),"function"==typeof this.opts.onBeforeWrite&&this.opts.onBeforeWrite.call(this,void 0,d.getBuffer.call(this),0,this.opts)}return l.unmaskedvalue.call(this,this.el)},remove:function(){if(this.el){s.default.data(this.el,v,null);var t=this.opts.autoUnmask?(0,l.unmaskedvalue)(this.el):this._valueGet(this.opts.autoUnmask);t!==d.getBufferTemplate.call(this).join("")?this._valueSet(t,this.opts.autoUnmask):this._valueSet(""),o.EventRuler.off(this.el),Object.getOwnPropertyDescriptor&&Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.el),"value")&&this.__valueGet&&Object.defineProperty(this.el,"value",{get:this.__valueGet,set:this.__valueSet,configurable:!0}):g.__lookupGetter__&&this.el.__lookupGetter__("value")&&this.__valueGet&&(this.el.__defineGetter__("value",this.__valueGet),this.el.__defineSetter__("value",this.__valueSet)),this.el.inputmask=void 0}return this.el},getemptymask:function(){return this.maskset=this.maskset||(0,u.generateMaskSet)(this.opts,this.noMasksCache),(this.isRTL?d.getBufferTemplate.call(this).reverse():d.getBufferTemplate.call(this)).join("")},hasMaskedValue:function(){return!this.opts.autoUnmask},isComplete:function(){return this.maskset=this.maskset||(0,u.generateMaskSet)(this.opts,this.noMasksCache),h.isComplete.call(this,d.getBuffer.call(this))},getmetadata:function(){if(this.maskset=this.maskset||(0,u.generateMaskSet)(this.opts,this.noMasksCache),Array.isArray(this.maskset.metadata)){var t=p.getMaskTemplate.call(this,!0,0,!1).join("");return this.maskset.metadata.forEach((function(e){return e.mask!==t||(t=e,!1)})),t}return this.maskset.metadata},isValid:function(t){if(this.maskset=this.maskset||(0,u.generateMaskSet)(this.opts,this.noMasksCache),t){var e=("function"==typeof this.opts.onBeforeMask&&this.opts.onBeforeMask.call(this,t,this.opts)||t).split("");l.checkVal.call(this,void 0,!0,!1,e)}else t=this.isRTL?d.getBuffer.call(this).slice().reverse().join(""):d.getBuffer.call(this).join("");for(var n=d.getBuffer.call(this),i=d.determineLastRequiredPosition.call(this),r=n.length-1;r>i&&!d.isMask.call(this,r);r--);return n.splice(i,r+1-i),h.isComplete.call(this,n)&&t===(this.isRTL?d.getBuffer.call(this).slice().reverse().join(""):d.getBuffer.call(this).join(""))},format:function(t,e){this.maskset=this.maskset||(0,u.generateMaskSet)(this.opts,this.noMasksCache);var n=("function"==typeof this.opts.onBeforeMask&&this.opts.onBeforeMask.call(this,t,this.opts)||t).split("");l.checkVal.call(this,void 0,!0,!1,n);var i=this.isRTL?d.getBuffer.call(this).slice().reverse().join(""):d.getBuffer.call(this).join("");return e?{value:i,metadata:this.getmetadata()}:i},setValue:function(t){this.el&&(0,s.default)(this.el).trigger("setvalue",[t])},analyseMask:u.analyseMask},y.extendDefaults=function(t){s.default.extend(!0,y.prototype.defaults,t)},y.extendDefinitions=function(t){s.default.extend(!0,y.prototype.definitions,t)},y.extendAliases=function(t){s.default.extend(!0,y.prototype.aliases,t)},y.format=function(t,e,n){return y(e).format(t,n)},y.unmask=function(t,e){return y(e).unmaskedvalue(t)},y.isValid=function(t,e){return y(e).isValid(t)},y.remove=function(t){"string"==typeof t&&(t=g.getElementById(t)||g.querySelectorAll(t)),(t=t.nodeName?[t]:t).forEach((function(t){t.inputmask&&t.inputmask.remove()}))},y.setValue=function(t,e){"string"==typeof t&&(t=g.getElementById(t)||g.querySelectorAll(t)),(t=t.nodeName?[t]:t).forEach((function(t){t.inputmask?t.inputmask.setValue(e):(0,s.default)(t).trigger("setvalue",[e])}))},y.dependencyLib=s.default,a.default.Inputmask=y,e.default=y},5296:function(t,e,n){function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var r=p(n(9380)),s=p(n(2394));function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(s=void 0,s=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r.key,"string"),"symbol"===i(s)?s:String(s)),r)}var s}function a(t){var e=u();return function(){var n,r=h(t);if(e){var s=h(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function l(t){var e="function"==typeof Map?new Map:void 0;return l=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return c(t,arguments,h(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),d(n,t)},l(t)}function c(t,e,n){return c=u()?Reflect.construct.bind():function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&d(r,n.prototype),r},c.apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function p(t){return t&&t.__esModule?t:{default:t}}var f=r.default.document;if(f&&f.head&&f.head.attachShadow&&r.default.customElements&&void 0===r.default.customElements.get("input-mask")){var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(l,t);var e,n,i,r=a(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var e=(t=r.call(this)).getAttributeNames(),n=t.attachShadow({mode:"closed"});for(var i in t.input=f.createElement("input"),t.input.type="text",n.appendChild(t.input),e)Object.prototype.hasOwnProperty.call(e,i)&&t.input.setAttribute(e[i],t.getAttribute(e[i]));var o=new s.default;return o.dataAttribute="",o.mask(t.input),t.input.inputmask.shadowRoot=n,t}return e=l,(n=[{key:"attributeChangedCallback",value:function(t,e,n){this.input.setAttribute(t,n)}},{key:"value",get:function(){return this.input.value},set:function(t){this.input.value=t}}])&&o(e.prototype,n),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),l}(l(HTMLElement));r.default.customElements.define("input-mask",m)}},2839:function(t,e){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=s.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t,e,i){return(e=function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Object.defineProperty(e,"__esModule",{value:!0}),e.keys=e.keyCode=void 0,e.toKey=function(t,e){return l[t]||(e?String.fromCharCode(t):String.fromCharCode(t).toLowerCase())},e.toKeyCode=function(t){return a[t]};var a=e.keyCode=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({c:67,x:88,z:90,BACKSPACE_SAFARI:127,Enter:13,Meta_LEFT:91,Meta_RIGHT:92,Space:32},{Alt:18,AltGraph:18,ArrowDown:40,ArrowLeft:37,ArrowRight:39,ArrowUp:38,Backspace:8,CapsLock:20,Control:17,ContextMenu:93,Dead:221,Delete:46,End:35,Escape:27,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Home:36,Insert:45,NumLock:144,PageDown:34,PageUp:33,Pause:19,PrintScreen:44,Process:229,Shift:16,ScrollLock:145,Tab:9,Unidentified:229}),l=Object.entries(a).reduce((function(t,e){var n=i(e,2),r=n[0],s=n[1];return t[s]=void 0===t[s]?r:t[s],t}),{});e.keys=Object.entries(a).reduce((function(t,e){var n=i(e,2),r=n[0];return n[1],t[r]="Space"===r?" ":r,t}),{})},2391:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.analyseMask=function(t,e,n){var i,r,l,c,u,d,h=/(?:[?*+]|\{[0-9+*]+(?:,[0-9+*]*)?(?:\|[0-9+*]*)?\})|[^.?*+^${[]()|\\]+|./g,p=/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,f=!1,m=new o.default,g=[],v=[],y=!1;function b(t,i,r){r=void 0!==r?r:t.matches.length;var o=t.matches[r-1];if(e){if(0===i.indexOf("[")||f&&/\\d|\\s|\\w|\\p/i.test(i)||"."===i){var l=n.casing?"i":"";/\\p\{.*}/i.test(i)&&(l+="u"),t.matches.splice(r++,0,{fn:new RegExp(i,l),static:!1,optionality:!1,newBlockMarker:void 0===o?"master":o.def!==i,casing:null,def:i,placeholder:"object"===a(n.placeholder)?n.placeholder[m.matches.length]:void 0,nativeDef:i})}else f&&(i=i[i.length-1]),i.split("").forEach((function(e,i){o=t.matches[r-1],t.matches.splice(r++,0,{fn:/[a-z]/i.test(n.staticDefinitionSymbol||e)?new RegExp("["+(n.staticDefinitionSymbol||e)+"]",n.casing?"i":""):null,static:!0,optionality:!1,newBlockMarker:void 0===o?"master":o.def!==e&&!0!==o.static,casing:null,def:n.staticDefinitionSymbol||e,placeholder:void 0!==n.staticDefinitionSymbol?e:"object"===a(n.placeholder)?n.placeholder[m.matches.length]:void 0,nativeDef:(f?"'":"")+e})}));f=!1}else{var c=n.definitions&&n.definitions[i]||n.usePrototypeDefinitions&&s.default.prototype.definitions[i];c&&!f?t.matches.splice(r++,0,{fn:c.validator?"string"==typeof c.validator?new RegExp(c.validator,n.casing?"i":""):new function(){this.test=c.validator}:/./,static:c.static||!1,optionality:c.optional||!1,defOptionality:c.optional||!1,newBlockMarker:void 0===o||c.optional?"master":o.def!==(c.definitionSymbol||i),casing:c.casing,def:c.definitionSymbol||i,placeholder:c.placeholder,nativeDef:i,generated:c.generated}):(t.matches.splice(r++,0,{fn:/[a-z]/i.test(n.staticDefinitionSymbol||i)?new RegExp("["+(n.staticDefinitionSymbol||i)+"]",n.casing?"i":""):null,static:!0,optionality:!1,newBlockMarker:void 0===o?"master":o.def!==i&&!0!==o.static,casing:null,def:n.staticDefinitionSymbol||i,placeholder:void 0!==n.staticDefinitionSymbol?i:void 0,nativeDef:(f?"'":"")+i}),f=!1)}}function w(){if(g.length>0){if(b(c=g[g.length-1],r),c.isAlternator){u=g.pop();for(var t=0;t<u.matches.length;t++)u.matches[t].isGroup&&(u.matches[t].isGroup=!1);g.length>0?(c=g[g.length-1]).matches.push(u):m.matches.push(u)}}else b(m,r)}function k(t){var e=new o.default(!0);return e.openGroup=!1,e.matches=t,e}function x(){if((l=g.pop()).openGroup=!1,void 0!==l)if(g.length>0){if((c=g[g.length-1]).matches.push(l),c.isAlternator){u=g.pop();for(var t=0;t<u.matches.length;t++)u.matches[t].isGroup=!1,u.matches[t].alternatorGroup=!1;g.length>0?(c=g[g.length-1]).matches.push(u):m.matches.push(u)}}else m.matches.push(l);else w()}function S(t){var e=t.pop();return e.isQuantifier&&(e=k([t.pop(),e])),e}for(e&&(n.optionalmarker[0]=void 0,n.optionalmarker[1]=void 0);i=e?p.exec(t):h.exec(t);){if(r=i[0],e){switch(r.charAt(0)){case"?":r="{0,1}";break;case"+":case"*":r="{"+r+"}";break;case"|":if(0===g.length){var C=k(m.matches);C.openGroup=!0,g.push(C),m.matches=[],y=!0}}switch(r){case"\\d":r="[0-9]";break;case"\\p":r+=p.exec(t)[0],r+=p.exec(t)[0]}}if(f)w();else switch(r.charAt(0)){case"$":case"^":e||w();break;case n.escapeChar:f=!0,e&&w();break;case n.optionalmarker[1]:case n.groupmarker[1]:x();break;case n.optionalmarker[0]:g.push(new o.default(!1,!0));break;case n.groupmarker[0]:g.push(new o.default(!0));break;case n.quantifiermarker[0]:var _=new o.default(!1,!1,!0),T=(r=r.replace(/[{}?]/g,"")).split("|"),M=T[0].split(","),O=isNaN(M[0])?M[0]:parseInt(M[0]),E=1===M.length?O:isNaN(M[1])?M[1]:parseInt(M[1]),A=isNaN(T[1])?T[1]:parseInt(T[1]);"*"!==O&&"+"!==O||(O="*"===E?0:1),_.quantifier={min:O,max:E,jit:A};var N=g.length>0?g[g.length-1].matches:m.matches;(i=N.pop()).isGroup||(i=k([i])),N.push(i),N.push(_);break;case n.alternatormarker:if(g.length>0){var D=(c=g[g.length-1]).matches[c.matches.length-1];d=c.openGroup&&(void 0===D.matches||!1===D.isGroup&&!1===D.isAlternator)?g.pop():S(c.matches)}else d=S(m.matches);if(d.isAlternator)g.push(d);else if(d.alternatorGroup?(u=g.pop(),d.alternatorGroup=!1):u=new o.default(!1,!1,!1,!0),u.matches.push(d),g.push(u),d.openGroup){d.openGroup=!1;var L=new o.default(!0);L.alternatorGroup=!0,g.push(L)}break;default:w()}}for(y&&x();g.length>0;)l=g.pop(),m.matches.push(l);return m.matches.length>0&&(function t(i){i&&i.matches&&i.matches.forEach((function(r,s){var o=i.matches[s+1];(void 0===o||void 0===o.matches||!1===o.isQuantifier)&&r&&r.isGroup&&(r.isGroup=!1,e||(b(r,n.groupmarker[0],0),!0!==r.openGroup&&b(r,n.groupmarker[1]))),t(r)}))}(m),v.push(m)),(n.numericInput||n.isRTL)&&function t(e){for(var i in e.matches=e.matches.reverse(),e.matches)if(Object.prototype.hasOwnProperty.call(e.matches,i)){var r=parseInt(i);if(e.matches[i].isQuantifier&&e.matches[r+1]&&e.matches[r+1].isGroup){var s=e.matches[i];e.matches.splice(i,1),e.matches.splice(r+1,0,s)}void 0!==e.matches[i].matches?e.matches[i]=t(e.matches[i]):e.matches[i]=((o=e.matches[i])===n.optionalmarker[0]?o=n.optionalmarker[1]:o===n.optionalmarker[1]?o=n.optionalmarker[0]:o===n.groupmarker[0]?o=n.groupmarker[1]:o===n.groupmarker[1]&&(o=n.groupmarker[0]),o)}var o;return e}(v[0]),v},e.generateMaskSet=function(t,e){var n;function o(t,e){var n=e.repeat,i=e.groupmarker,s=e.quantifiermarker,o=e.keepStatic;if(n>0||"*"===n||"+"===n){var a="*"===n?0:"+"===n?1:n;if(a!=n)t=i[0]+t+i[1]+s[0]+a+","+n+s[1];else for(var c=t,u=1;u<a;u++)t+=c}if(!0===o){var d=t.match(new RegExp("(.)\\[([^\\]]*)\\]","g"));d&&d.forEach((function(e,n){var i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=s.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.split("["),2),s=i[0],o=i[1];o=o.replace("]",""),t=t.replace(new RegExp("".concat((0,r.default)(s),"\\[").concat((0,r.default)(o),"\\]")),s.charAt(0)===o.charAt(0)?"(".concat(s,"|").concat(s).concat(o,")"):"".concat(s,"[").concat(o,"]"))}))}return t}function c(t,n,r){var l,c,u=!1;return null!==t&&""!==t||((u=null!==r.regex)?t=(t=r.regex).replace(/^(\^)(.*)(\$)$/,"$2"):(u=!0,t=".*")),1===t.length&&!1===r.greedy&&0!==r.repeat&&(r.placeholder=""),t=o(t,r),c=u?"regex_"+r.regex:r.numericInput?t.split("").reverse().join(""):t,null!==r.keepStatic&&(c="ks_"+r.keepStatic+c),"object"===a(r.placeholder)&&(c="ph_"+JSON.stringify(r.placeholder)+c),void 0===s.default.prototype.masksCache[c]||!0===e?(l={mask:t,maskToken:s.default.prototype.analyseMask(t,u,r),validPositions:[],_buffer:void 0,buffer:void 0,tests:{},excludes:{},metadata:n,maskLength:void 0,jitOffset:{}},!0!==e&&(s.default.prototype.masksCache[c]=l,l=i.default.extend(!0,{},s.default.prototype.masksCache[c]))):l=i.default.extend(!0,{},s.default.prototype.masksCache[c]),l}if("function"==typeof t.mask&&(t.mask=t.mask(t)),Array.isArray(t.mask)){if(t.mask.length>1){null===t.keepStatic&&(t.keepStatic=!0);var u=t.groupmarker[0];return(t.isRTL?t.mask.reverse():t.mask).forEach((function(e){u.length>1&&(u+=t.alternatormarker),void 0!==e.mask&&"function"!=typeof e.mask?u+=e.mask:u+=e})),c(u+=t.groupmarker[1],t.mask,t)}t.mask=t.mask.pop()}return n=t.mask&&void 0!==t.mask.mask&&"function"!=typeof t.mask.mask?c(t.mask.mask,t.mask,t):c(t.mask,t.mask,t),null===t.keepStatic&&(t.keepStatic=!1),n};var i=c(n(4963)),r=c(n(7184)),s=c(n(2394)),o=c(n(9695));function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function c(t){return t&&t.__esModule?t:{default:t}}},157:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.mask=function(){var t=this,e=this.opts,n=this.el,c=this.dependencyLib;s.EventRuler.off(n);var u=function(e,n){var i=e.getAttribute("type"),r="input"===e.tagName.toLowerCase()&&n.supportsInputType.includes(i)||e.isContentEditable||"textarea"===e.tagName.toLowerCase();if(!r)if("input"===e.tagName.toLowerCase()){var l=document.createElement("input");l.setAttribute("type",i),r="text"===l.type,l=null}else r="partial";return!1!==r?function(e){var i,r;function l(){return this.inputmask?this.inputmask.opts.autoUnmask?this.inputmask.unmaskedvalue():-1!==a.getLastValidPosition.call(t)||!0!==n.nullable?(this.inputmask.shadowRoot||this.ownerDocument).activeElement===this&&n.clearMaskOnLostFocus?(t.isRTL?o.clearOptionalTail.call(t,a.getBuffer.call(t).slice()).reverse():o.clearOptionalTail.call(t,a.getBuffer.call(t).slice())).join(""):i.call(this):"":i.call(this)}function u(t){r.call(this,t),this.inputmask&&(0,o.applyInputValue)(this,t)}if(!e.inputmask.__valueGet){if(!0!==n.noValuePatching){if(Object.getOwnPropertyDescriptor){var d=Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"value"):void 0;d&&d.get&&d.set?(i=d.get,r=d.set,Object.defineProperty(e,"value",{get:l,set:u,configurable:!0})):"input"!==e.tagName.toLowerCase()&&(i=function(){return this.textContent},r=function(t){this.textContent=t},Object.defineProperty(e,"value",{get:l,set:u,configurable:!0}))}else document.__lookupGetter__&&e.__lookupGetter__("value")&&(i=e.__lookupGetter__("value"),r=e.__lookupSetter__("value"),e.__defineGetter__("value",l),e.__defineSetter__("value",u));e.inputmask.__valueGet=i,e.inputmask.__valueSet=r}e.inputmask._valueGet=function(e){return t.isRTL&&!0!==e?i.call(this.el).split("").reverse().join(""):i.call(this.el)},e.inputmask._valueSet=function(e,n){r.call(this.el,null==e?"":!0!==n&&t.isRTL?e.split("").reverse().join(""):e)},void 0===i&&(i=function(){return this.value},r=function(t){this.value=t},function(e){if(c.valHooks&&(void 0===c.valHooks[e]||!0!==c.valHooks[e].inputmaskpatch)){var i=c.valHooks[e]&&c.valHooks[e].get?c.valHooks[e].get:function(t){return t.value},r=c.valHooks[e]&&c.valHooks[e].set?c.valHooks[e].set:function(t,e){return t.value=e,t};c.valHooks[e]={get:function(e){if(e.inputmask){if(e.inputmask.opts.autoUnmask)return e.inputmask.unmaskedvalue();var r=i(e);return-1!==a.getLastValidPosition.call(t,void 0,void 0,e.inputmask.maskset.validPositions)||!0!==n.nullable?r:""}return i(e)},set:function(t,e){var n=r(t,e);return t.inputmask&&(0,o.applyInputValue)(t,e),n},inputmaskpatch:!0}}}(e.type),function(t){s.EventRuler.on(t,"mouseenter",(function(){var t=this,e=t.inputmask._valueGet(!0);e!=(t.inputmask.isRTL?a.getBuffer.call(t.inputmask).slice().reverse():a.getBuffer.call(t.inputmask)).join("")&&(0,o.applyInputValue)(t,e)}))}(e))}}(e):e.inputmask=void 0,r}(n,e);if(!1!==u){t.originalPlaceholder=n.placeholder,t.maxLength=void 0!==n?n.maxLength:void 0,-1===t.maxLength&&(t.maxLength=void 0),"inputMode"in n&&null===n.getAttribute("inputmode")&&(n.inputMode=e.inputmode,n.setAttribute("inputmode",e.inputmode)),!0===u&&(e.showMaskOnFocus=e.showMaskOnFocus&&-1===["cc-number","cc-exp"].indexOf(n.autocomplete),i.iphone&&(e.insertModeVisual=!1,n.setAttribute("autocorrect","off")),s.EventRuler.on(n,"submit",r.EventHandlers.submitEvent),s.EventRuler.on(n,"reset",r.EventHandlers.resetEvent),s.EventRuler.on(n,"blur",r.EventHandlers.blurEvent),s.EventRuler.on(n,"focus",r.EventHandlers.focusEvent),s.EventRuler.on(n,"invalid",r.EventHandlers.invalidEvent),s.EventRuler.on(n,"click",r.EventHandlers.clickEvent),s.EventRuler.on(n,"mouseleave",r.EventHandlers.mouseleaveEvent),s.EventRuler.on(n,"mouseenter",r.EventHandlers.mouseenterEvent),s.EventRuler.on(n,"paste",r.EventHandlers.pasteEvent),s.EventRuler.on(n,"cut",r.EventHandlers.cutEvent),s.EventRuler.on(n,"complete",e.oncomplete),s.EventRuler.on(n,"incomplete",e.onincomplete),s.EventRuler.on(n,"cleared",e.oncleared),!0!==e.inputEventOnly&&s.EventRuler.on(n,"keydown",r.EventHandlers.keyEvent),(i.mobile||e.inputEventOnly)&&n.removeAttribute("maxLength"),s.EventRuler.on(n,"input",r.EventHandlers.inputFallBackEvent)),s.EventRuler.on(n,"setvalue",r.EventHandlers.setValueEvent),void 0===t.applyMaskHook||t.applyMaskHook(),a.getBufferTemplate.call(t).join(""),t.undoValue=t._valueGet(!0);var d=(n.inputmask.shadowRoot||n.ownerDocument).activeElement;if(""!==n.inputmask._valueGet(!0)||!1===e.clearMaskOnLostFocus||d===n){(0,o.applyInputValue)(n,n.inputmask._valueGet(!0),e);var h=a.getBuffer.call(t).slice();!1===l.isComplete.call(t,h)&&e.clearIncomplete&&a.resetMaskSet.call(t,!1),e.clearMaskOnLostFocus&&d!==n&&(-1===a.getLastValidPosition.call(t)?h=[]:o.clearOptionalTail.call(t,h)),(!1===e.clearMaskOnLostFocus||e.showMaskOnFocus&&d===n||""!==n.inputmask._valueGet(!0))&&(0,o.writeBuffer)(n,h),d===n&&a.caret.call(t,n,a.seekNext.call(t,a.getLastValidPosition.call(t)))}}};var i=n(9845),r=n(6030),s=n(9716),o=n(7760),a=n(8711),l=n(7215)},9695:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,i){this.matches=[],this.openGroup=t||!1,this.alternatorGroup=!1,this.isGroup=t||!1,this.isOptional=e||!1,this.isQuantifier=n||!1,this.isAlternator=i||!1,this.quantifier={min:1,max:1}}},3194:function(){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;for(var r=0|e,s=Math.max(r>=0?r:i-Math.abs(r),0);s<i;){if(n[s]===t)return!0;s++}return!1}})},9302:function(){var t=Function.bind.call(Function.call,Array.prototype.reduce),e=Function.bind.call(Function.call,Object.prototype.propertyIsEnumerable),n=Function.bind.call(Function.call,Array.prototype.concat),i=Object.keys;Object.entries||(Object.entries=function(r){return t(i(r),(function(t,i){return n(t,"string"==typeof i&&e(r,i)?[[i,r[i]]]:[])}),[])})},7149:function(){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"===t("test".__proto__)?function(t){return t.__proto__}:function(t){return t.constructor.prototype})},4013:function(){String.prototype.includes||(String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)})},8711:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.caret=function(t,e,n,i,s){var o,a=this,l=this.opts;if(void 0===e)return"selectionStart"in t&&"selectionEnd"in t?(e=t.selectionStart,n=t.selectionEnd):r.default.getSelection?(o=r.default.getSelection().getRangeAt(0)).commonAncestorContainer.parentNode!==t&&o.commonAncestorContainer!==t||(e=o.startOffset,n=o.endOffset):document.selection&&document.selection.createRange&&(n=(e=0-(o=document.selection.createRange()).duplicate().moveStart("character",-t.inputmask._valueGet().length))+o.text.length),{begin:i?e:d.call(a,e),end:i?n:d.call(a,n)};if(Array.isArray(e)&&(n=a.isRTL?e[0]:e[1],e=a.isRTL?e[1]:e[0]),void 0!==e.begin&&(n=a.isRTL?e.begin:e.end,e=a.isRTL?e.end:e.begin),"number"==typeof e){e=i?e:d.call(a,e),n="number"==typeof(n=i?n:d.call(a,n))?n:e;var c=parseInt(((t.ownerDocument.defaultView||r.default).getComputedStyle?(t.ownerDocument.defaultView||r.default).getComputedStyle(t,null):t.currentStyle).fontSize)*n;if(t.scrollLeft=c>t.scrollWidth?c:0,t.inputmask.caretPos={begin:e,end:n},l.insertModeVisual&&!1===l.insertMode&&e===n&&(s||n++),t===(t.inputmask.shadowRoot||t.ownerDocument).activeElement){if("setSelectionRange"in t)t.setSelectionRange(e,n);else if(r.default.getSelection){if(o=document.createRange(),void 0===t.firstChild||null===t.firstChild){var u=document.createTextNode("");t.appendChild(u)}o.setStart(t.firstChild,e<t.inputmask._valueGet().length?e:t.inputmask._valueGet().length),o.setEnd(t.firstChild,n<t.inputmask._valueGet().length?n:t.inputmask._valueGet().length),o.collapse(!0);var h=r.default.getSelection();h.removeAllRanges(),h.addRange(o)}else t.createTextRange&&((o=t.createTextRange()).collapse(!0),o.moveEnd("character",n),o.moveStart("character",e),o.select());void 0===t.inputmask.caretHook||t.inputmask.caretHook.call(a,{begin:e,end:n})}}},e.determineLastRequiredPosition=function(t){var e,n,i=this,r=i.maskset,a=i.dependencyLib,c=l.call(i),u={},d=r.validPositions[c],h=o.getMaskTemplate.call(i,!0,l.call(i),!0,!0),p=h.length,f=void 0!==d?d.locator.slice():void 0;for(e=c+1;e<h.length;e++)f=(n=o.getTestTemplate.call(i,e,f,e-1)).locator.slice(),u[e]=a.extend(!0,{},n);var m=d&&void 0!==d.alternation?d.locator[d.alternation]:void 0;for(e=p-1;e>c&&((n=u[e]).match.optionality||n.match.optionalQuantifier&&n.match.newBlockMarker||m&&(m!==u[e].locator[d.alternation]&&!0!==n.match.static||!0===n.match.static&&n.locator[d.alternation]&&s.checkAlternationMatch.call(i,n.locator[d.alternation].toString().split(","),m.toString().split(","))&&""!==o.getTests.call(i,e)[0].def))&&h[e]===o.getPlaceholder.call(i,e,n.match);e--)p--;return t?{l:p,def:u[p]?u[p].match:void 0}:p},e.determineNewCaretPosition=function(t,e,n){var i,r,s,d=this,h=d.maskset,p=d.opts;if(e&&(d.isRTL?t.end=t.begin:t.begin=t.end),t.begin===t.end){switch(n=n||p.positionCaretOnClick){case"none":break;case"select":t={begin:0,end:a.call(d).length};break;case"ignore":t.end=t.begin=u.call(d,l.call(d));break;case"radixFocus":if(d.clicked>1&&0===h.validPositions.length)break;if(function(t){if(""!==p.radixPoint&&0!==p.digits){var e=h.validPositions;if(void 0===e[t]||void 0===e[t].input){if(t<u.call(d,-1))return!0;var n=a.call(d).indexOf(p.radixPoint);if(-1!==n){for(var i=0,r=e.length;i<r;i++)if(e[i]&&n<i&&e[i].input!==o.getPlaceholder.call(d,i))return!1;return!0}}}return!1}(t.begin)){var f=a.call(d).join("").indexOf(p.radixPoint);t.end=t.begin=p.numericInput?u.call(d,f):f;break}default:if(i=t.begin,r=l.call(d,i,!0),i<=(s=u.call(d,-1!==r||c.call(d,0)?r:-1)))t.end=t.begin=c.call(d,i,!1,!0)?i:u.call(d,i);else{var m=h.validPositions[r],g=o.getTestTemplate.call(d,s,m?m.match.locator:void 0,m),v=o.getPlaceholder.call(d,s,g.match);if(""!==v&&a.call(d)[s]!==v&&!0!==g.match.optionalQuantifier&&!0!==g.match.newBlockMarker||!c.call(d,s,p.keepStatic,!0)&&g.match.def===v){var y=u.call(d,s);(i>=y||i===s)&&(s=y)}t.end=t.begin=s}}return t}},e.getBuffer=a,e.getBufferTemplate=function(){var t=this.maskset;return void 0===t._buffer&&(t._buffer=o.getMaskTemplate.call(this,!1,1),void 0===t.buffer&&(t.buffer=t._buffer.slice())),t._buffer},e.getLastValidPosition=l,e.isMask=c,e.resetMaskSet=function(t){var e=this.maskset;e.buffer=void 0,!0!==t&&(e.validPositions=[],e.p=0),!1===t&&(e.tests={},e.jitOffset={})},e.seekNext=u,e.seekPrevious=function(t,e){var n=this,i=t-1;if(t<=0)return 0;for(;i>0&&(!0===e&&(!0!==o.getTest.call(n,i).match.newBlockMarker||!c.call(n,i,void 0,!0))||!0!==e&&!c.call(n,i,void 0,!0));)i--;return i},e.translatePosition=d;var i,r=(i=n(9380))&&i.__esModule?i:{default:i},s=n(7215),o=n(4713);function a(t){var e=this,n=e.maskset;return void 0!==n.buffer&&!0!==t||(n.buffer=o.getMaskTemplate.call(e,!0,l.call(e),!0),void 0===n._buffer&&(n._buffer=n.buffer.slice())),n.buffer}function l(t,e,n){var i=this.maskset,r=-1,s=-1,o=n||i.validPositions;void 0===t&&(t=-1);for(var a=0,l=o.length;a<l;a++)o[a]&&(e||!0!==o[a].generatedInput)&&(a<=t&&(r=a),a>=t&&(s=a));return-1===r||r===t?s:-1===s||t-r<s-t?r:s}function c(t,e,n){var i=this,r=this.maskset,s=o.getTestTemplate.call(i,t).match;if(""===s.def&&(s=o.getTest.call(i,t).match),!0!==s.static)return s.fn;if(!0===n&&void 0!==r.validPositions[t]&&!0!==r.validPositions[t].generatedInput)return!0;if(!0!==e&&t>-1){if(n){var a=o.getTests.call(i,t);return a.length>1+(""===a[a.length-1].match.def?1:0)}var l=o.determineTestTemplate.call(i,t,o.getTests.call(i,t)),c=o.getPlaceholder.call(i,t,l.match);return l.match.def!==c}return!1}function u(t,e,n){var i=this;void 0===n&&(n=!0);for(var r=t+1;""!==o.getTest.call(i,r).match.def&&(!0===e&&(!0!==o.getTest.call(i,r).match.newBlockMarker||!c.call(i,r,void 0,!0))||!0!==e&&!c.call(i,r,void 0,n));)r++;return r}function d(t){var e=this.opts,n=this.el;return!this.isRTL||"number"!=typeof t||e.greedy&&""===e.placeholder||!n||(t=this._valueGet().length-t)<0&&(t=0),t}},4713:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.determineTestTemplate=d,e.getDecisionTaker=l,e.getMaskTemplate=function(t,e,n,i,r){var s=this,o=this.opts,a=this.maskset,l=o.greedy;r&&o.greedy&&(o.greedy=!1,s.maskset.tests={}),e=e||0;var h,p,m,g,v=[],y=0;do{if(!0===t&&a.validPositions[y])p=(m=r&&a.validPositions[y].match.optionality&&void 0===a.validPositions[y+1]&&(!0===a.validPositions[y].generatedInput||a.validPositions[y].input==o.skipOptionalPartCharacter&&y>0)?d.call(s,y,f.call(s,y,h,y-1)):a.validPositions[y]).match,h=m.locator.slice(),v.push(!0===n?m.input:!1===n?p.nativeDef:c.call(s,y,p));else{p=(m=u.call(s,y,h,y-1)).match,h=m.locator.slice();var b=!0!==i&&(!1!==o.jitMasking?o.jitMasking:p.jit);(g=(g||a.validPositions[y-1])&&p.static&&p.def!==o.groupSeparator&&null===p.fn)||!1===b||void 0===b||"number"==typeof b&&isFinite(b)&&b>y?v.push(!1===n?p.nativeDef:c.call(s,v.length,p)):g=!1}y++}while(!0!==p.static||""!==p.def||e>y);return""===v[v.length-1]&&v.pop(),!1===n&&void 0!==a.maskLength||(a.maskLength=y-1),o.greedy=l,v},e.getPlaceholder=c,e.getTest=h,e.getTestTemplate=u,e.getTests=f,e.isSubsetOf=p;var i,r=(i=n(2394))&&i.__esModule?i:{default:i},s=n(8711);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){var n=(null!=t.alternation?t.mloc[l(t)]:t.locator).join("");if(""!==n)for(n=n.split(":")[0];n.length<e;)n+="0";return n}function l(t){var e=t.locator[t.alternation];return"string"==typeof e&&e.length>0&&(e=e.split(",")[0]),void 0!==e?e.toString():""}function c(t,e,n){var i=this,r=this.opts,a=this.maskset;if(void 0!==(e=e||h.call(i,t).match).placeholder||!0===n){if(""!==e.placeholder&&!0===e.static&&!0!==e.generated){var l=s.getLastValidPosition.call(i,t),c=s.seekNext.call(i,l);return(n?t<=c:t<c)?r.staticDefinitionSymbol&&e.static?e.nativeDef:e.def:"function"==typeof e.placeholder?e.placeholder(r):e.placeholder}return"function"==typeof e.placeholder?e.placeholder(r):e.placeholder}if(!0===e.static){if(t>-1&&void 0===a.validPositions[t]){var u,d=f.call(i,t),p=[];if("string"==typeof r.placeholder&&d.length>1+(""===d[d.length-1].match.def?1:0))for(var m=0;m<d.length;m++)if(""!==d[m].match.def&&!0!==d[m].match.optionality&&!0!==d[m].match.optionalQuantifier&&(!0===d[m].match.static||void 0===u||!1!==d[m].match.fn.test(u.match.def,a,t,!0,r))&&(p.push(d[m]),!0===d[m].match.static&&(u=d[m]),p.length>1&&/[0-9a-bA-Z]/.test(p[0].match.def)))return r.placeholder.charAt(t%r.placeholder.length)}return e.def}return"object"===o(r.placeholder)?e.def:r.placeholder.charAt(t%r.placeholder.length)}function u(t,e,n){return this.maskset.validPositions[t]||d.call(this,t,f.call(this,t,e?e.slice():e,n))}function d(t,e){var n=this.opts,i=0,r=function(t,e){var n=0,i=!1;return e.forEach((function(t){t.match.optionality&&(0!==n&&n!==t.match.optionality&&(i=!0),(0===n||n>t.match.optionality)&&(n=t.match.optionality))})),n&&(0==t||1==e.length?n=0:i||(n=0)),n}(t,e);t=t>0?t-1:0;var s,o,l,c=a(h.call(this,t));n.greedy&&e.length>1&&""===e[e.length-1].match.def&&(i=1);for(var u=0;u<e.length-i;u++){var d=e[u];s=a(d,c.length);var p=Math.abs(s-c);(!0!==d.unMatchedAlternationStopped||e.filter((function(t){return!0!==t.unMatchedAlternationStopped})).length<=1)&&(void 0===o||""!==s&&p<o||l&&!n.greedy&&l.match.optionality&&l.match.optionality-r>0&&"master"===l.match.newBlockMarker&&(!d.match.optionality||d.match.optionality-r<1||!d.match.newBlockMarker)||l&&!n.greedy&&l.match.optionalQuantifier&&!d.match.optionalQuantifier)&&(o=p,l=d)}return l}function h(t,e){var n=this.maskset;return n.validPositions[t]?n.validPositions[t]:(e||f.call(this,t))[0]}function p(t,e,n){function i(t){for(var e,n=[],i=-1,r=0,s=t.length;r<s;r++)if("-"===t.charAt(r))for(e=t.charCodeAt(r+1);++i<e;)n.push(String.fromCharCode(i));else i=t.charCodeAt(r),n.push(t.charAt(r));return n.join("")}return t.match.def===e.match.nativeDef||!(!(n.regex||t.match.fn instanceof RegExp&&e.match.fn instanceof RegExp)||!0===t.match.static||!0===e.match.static)&&("."===e.match.fn.source||-1!==i(e.match.fn.source.replace(/[[\]/]/g,"")).indexOf(i(t.match.fn.source.replace(/[[\]/]/g,""))))}function f(t,e,n){var i,s,o=this,a=this.dependencyLib,l=this.maskset,c=this.opts,u=this.el,h=l.maskToken,f=e?n:0,m=e?e.slice():[0],g=[],v=!1,y=e?e.join(""):"",b=!1;function w(e,n,s,a){function d(s,a,h){function m(t,e){var n=0===e.matches.indexOf(t);return n||e.matches.every((function(i,r){return!0===i.isQuantifier?n=m(t,e.matches[r-1]):Object.prototype.hasOwnProperty.call(i,"matches")&&(n=m(t,i)),!n})),n}function x(t,e,n){var i,r;if((l.tests[t]||l.validPositions[t])&&(l.validPositions[t]?[l.validPositions[t]]:l.tests[t]).every((function(t,s){if(t.mloc[e])return i=t,!1;var o=void 0!==n?n:t.alternation,a=void 0!==t.locator[o]?t.locator[o].toString().indexOf(e):-1;return(void 0===r||a<r)&&-1!==a&&(i=t,r=a),!0})),i){var s=i.locator[i.alternation],o=i.mloc[e]||i.mloc[s]||i.locator;return-1!==o[o.length-1].toString().indexOf(":")&&o.pop(),o.slice((void 0!==n?n:i.alternation)+1)}return void 0!==n?x(t,e):void 0}function S(e,n){return!0===e.match.static&&!0!==n.match.static&&n.match.fn.test(e.match.def,l,t,!1,c,!1)}function C(t,e){var n=t.alternation,i=void 0===e||n<=e.alternation&&-1===t.locator[n].toString().indexOf(e.locator[n]);if(!i&&n>e.alternation)for(var r=0;r<n;r++)if(t.locator[r]!==e.locator[r]){n=r,i=!0;break}return!!i&&function(n){t.mloc=t.mloc||{};var i=t.locator[n];if(void 0!==i){if("string"==typeof i&&(i=i.split(",")[0]),void 0===t.mloc[i]&&(t.mloc[i]=t.locator.slice(),t.mloc[i].push(":".concat(t.alternation))),void 0!==e){for(var r in e.mloc)"string"==typeof r&&(r=parseInt(r.split(",")[0])),t.mloc[r+0]=e.mloc[r];t.locator[n]=Object.keys(t.mloc).join(",")}return t.alternation>n&&(t.alternation=n),!0}return t.alternation=void 0,!1}(n)}function _(t,e){if(t.locator.length!==e.locator.length)return!1;for(var n=t.alternation+1;n<t.locator.length;n++)if(t.locator[n]!==e.locator[n])return!1;return!0}if(f>t+c._maxTestPos)throw new Error("Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. ".concat(l.mask));if(f===t&&void 0===s.matches){if(g.push({match:s,locator:a.reverse(),cd:y,mloc:{}}),!s.optionality||void 0!==h||!(c.definitions&&c.definitions[s.nativeDef]&&c.definitions[s.nativeDef].optional||r.default.prototype.definitions[s.nativeDef]&&r.default.prototype.definitions[s.nativeDef].optional))return!0;v=!0,f=t}else if(void 0!==s.matches){if(s.isGroup&&h!==s)return function(){if(s=d(e.matches[e.matches.indexOf(s)+1],a,h))return!0}();if(s.isOptional)return function(){var e=s,r=g.length;if(s=w(s,n,a,h),g.length>0){if(g.forEach((function(t,e){e>=r&&(t.match.optionality=t.match.optionality?t.match.optionality+1:1)})),i=g[g.length-1].match,void 0!==h||!m(i,e))return s;v=!0,f=t}}();if(s.isAlternator)return function(){function i(t){for(var e,n=t.matches[0].matches?t.matches[0].matches.length:1,i=0;i<t.matches.length&&n===(e=t.matches[i].matches?t.matches[i].matches.length:1);i++);return n!==e}o.hasAlternator=!0;var r,m=s,y=[],w=g.slice(),k=a.length,T=n.length>0?n.shift():-1;if(-1===T||"string"==typeof T){var M,O=f,E=n.slice(),A=[];if("string"==typeof T)A=T.split(",");else for(M=0;M<m.matches.length;M++)A.push(M.toString());if(void 0!==l.excludes[t]){for(var N=A.slice(),D=0,L=l.excludes[t].length;D<L;D++){var I=l.excludes[t][D].toString().split(":");a.length==I[1]&&A.splice(A.indexOf(I[0]),1)}0===A.length&&(delete l.excludes[t],A=N)}(!0===c.keepStatic||isFinite(parseInt(c.keepStatic))&&O>=c.keepStatic)&&(A=A.slice(0,1));for(var P=0;P<A.length;P++){M=parseInt(A[P]),g=[],n="string"==typeof T&&x(f,M,k)||E.slice();var B=m.matches[M];if(B&&d(B,[M].concat(a),h))s=!0;else if(0===P&&(b=i(m)),B&&B.matches&&B.matches.length>m.matches[0].matches.length)break;r=g.slice(),f=O,g=[];for(var j=0;j<r.length;j++){var F=r[j],R=!1;F.alternation=F.alternation||k,C(F);for(var $=0;$<y.length;$++){var V=y[$];if("string"!=typeof T||void 0!==F.alternation&&A.includes(F.locator[F.alternation].toString())){if(F.match.nativeDef===V.match.nativeDef){R=!0,C(V,F);break}if(p(F,V,c)){C(F,V)&&(R=!0,y.splice(y.indexOf(V),0,F));break}if(p(V,F,c)){C(V,F);break}if(S(F,V)){_(F,V)||void 0!==u.inputmask.userOptions.keepStatic?C(F,V)&&(R=!0,y.splice(y.indexOf(V),0,F)):c.keepStatic=!0;break}if(S(V,F)){C(V,F);break}}}R||y.push(F)}}g=w.concat(y),f=t,v=g.length>0&&b,s=y.length>0&&!b,b&&v&&!s&&g.forEach((function(t,e){t.unMatchedAlternationStopped=!0})),n=E.slice()}else s=d(m.matches[T]||e.matches[T],[T].concat(a),h);if(s)return!0}();if(s.isQuantifier&&h!==e.matches[e.matches.indexOf(s)-1])return function(){for(var r=s,o=!1,u=n.length>0?n.shift():0;u<(isNaN(r.quantifier.max)?u+1:r.quantifier.max)&&f<=t;u++){var h=e.matches[e.matches.indexOf(r)-1];if(s=d(h,[u].concat(a),h)){if(g.forEach((function(e,n){(i=k(h,e.match)?e.match:g[g.length-1].match).optionalQuantifier=u>=r.quantifier.min,i.jit=(u+1)*(h.matches.indexOf(i)+1)>r.quantifier.jit,i.optionalQuantifier&&m(i,h)&&(v=!0,f=t,c.greedy&&null==l.validPositions[t-1]&&u>r.quantifier.min&&-1!=["*","+"].indexOf(r.quantifier.max)&&(g.pop(),y=void 0),o=!0,s=!1),!o&&i.jit&&(l.jitOffset[t]=h.matches.length-h.matches.indexOf(i))})),o)break;return!0}}}();if(s=w(s,n,a,h))return!0}else f++}for(var h=n.length>0?n.shift():0;h<e.matches.length;h++)if(!0!==e.matches[h].isQuantifier){var m=d(e.matches[h],[h].concat(s),a);if(m&&f===t)return m;if(f>t)break}}function k(t,e){var n=-1!=t.matches.indexOf(e);return n||t.matches.forEach((function(t,i){void 0===t.matches||n||(n=k(t,e))})),n}if(t>-1){if(void 0===e){for(var x,S=t-1;void 0===(x=l.validPositions[S]||l.tests[S])&&S>-1;)S--;void 0!==x&&S>-1&&(m=function(t,e){var n,i=[];return Array.isArray(e)||(e=[e]),e.length>0&&(void 0===e[0].alternation||!0===c.keepStatic?0===(i=d.call(o,t,e.slice()).locator.slice()).length&&(i=e[0].locator.slice()):e.forEach((function(t){""!==t.def&&(0===i.length?(n=t.alternation,i=t.locator.slice()):t.locator[n]&&-1===i[n].toString().indexOf(t.locator[n])&&(i[n]+=","+t.locator[n]))}))),i}(S,x),y=m.join(""),f=S)}if(l.tests[t]&&l.tests[t][0].cd===y)return l.tests[t];for(var C=m.shift();C<h.length&&!(w(h[C],m,[C])&&f===t||f>t);C++);}return(0===g.length||v)&&g.push({match:{fn:null,static:!0,optionality:!1,casing:null,def:"",placeholder:""},locator:b&&0===g.filter((function(t){return!0!==t.unMatchedAlternationStopped})).length?[0]:[],mloc:{},cd:y}),void 0!==e&&l.tests[t]?s=a.extend(!0,[],g):(l.tests[t]=a.extend(!0,[],g),s=l.tests[t]),g.forEach((function(t){t.match.optionality=t.match.defOptionality||!1})),s}},7215:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.alternate=a,e.checkAlternationMatch=function(t,e,n){for(var i,r=this.opts.greedy?e:e.slice(0,1),s=!1,o=void 0!==n?n.split(","):[],a=0;a<o.length;a++)-1!==(i=t.indexOf(o[a]))&&t.splice(i,1);for(var l=0;l<t.length;l++)if(r.includes(t[l])){s=!0;break}return s},e.handleRemove=function(t,e,n,i,l){var c=this,u=this.maskset,d=this.opts;if((d.numericInput||c.isRTL)&&(e===r.keys.Backspace?e=r.keys.Delete:e===r.keys.Delete&&(e=r.keys.Backspace),c.isRTL)){var h=n.end;n.end=n.begin,n.begin=h}var p,f=s.getLastValidPosition.call(c,void 0,!0);n.end>=s.getBuffer.call(c).length&&f>=n.end&&(n.end=f+1),e===r.keys.Backspace?n.end-n.begin<1&&(n.begin=s.seekPrevious.call(c,n.begin)):e===r.keys.Delete&&n.begin===n.end&&(n.end=s.isMask.call(c,n.end,!0,!0)?n.end+1:s.seekNext.call(c,n.end)+1),!1!==(p=m.call(c,n))&&((!0!==i&&!1!==d.keepStatic||null!==d.regex&&-1!==o.getTest.call(c,n.begin).match.def.indexOf("|"))&&a.call(c,!0),!0!==i&&(u.p=e===r.keys.Delete?n.begin+p:n.begin,u.p=s.determineNewCaretPosition.call(c,{begin:u.p,end:u.p},!1,!1===d.insertMode&&e===r.keys.Backspace?"none":void 0).begin))},e.isComplete=c,e.isSelection=u,e.isValid=d,e.refreshFromBuffer=p,e.revalidateMask=m;var i=n(6030),r=n(2839),s=n(8711),o=n(4713);function a(t,e,n,i,r,l){var c=this,u=this.dependencyLib,h=this.opts,p=c.maskset;if(!c.hasAlternator)return!1;var f,m,g,v,y,b,w,k,x,S,C,_=u.extend(!0,[],p.validPositions),T=u.extend(!0,{},p.tests),M=!1,O=!1,E=void 0!==r?r:s.getLastValidPosition.call(c);if(l&&(S=l.begin,C=l.end,l.begin>l.end&&(S=l.end,C=l.begin)),-1===E&&void 0===r)f=0,m=(v=o.getTest.call(c,f)).alternation;else for(;E>=0;E--)if((g=p.validPositions[E])&&void 0!==g.alternation){if(E<=(t||0)&&v&&v.locator[g.alternation]!==g.locator[g.alternation])break;f=E,m=p.validPositions[f].alternation,v=g}if(void 0!==m){w=parseInt(f),p.excludes[w]=p.excludes[w]||[],!0!==t&&p.excludes[w].push((0,o.getDecisionTaker)(v)+":"+v.alternation);var A=[],N=-1;for(y=w;w<s.getLastValidPosition.call(c,void 0,!0)+1;y++)-1===N&&t<=y&&void 0!==e&&(A.push(e),N=A.length-1),(b=p.validPositions[w])&&!0!==b.generatedInput&&(void 0===l||y<S||y>=C)&&A.push(b.input),p.validPositions.splice(w,1);for(-1===N&&void 0!==e&&(A.push(e),N=A.length-1);void 0!==p.excludes[w]&&p.excludes[w].length<10;){for(p.tests={},s.resetMaskSet.call(c,!0),M=!0,y=0;y<A.length&&(k=M.caret||0==h.insertMode&&null!=k?s.seekNext.call(c,k):s.getLastValidPosition.call(c,void 0,!0)+1,x=A[y],M=d.call(c,k,x,!1,i,!0));y++)y===N&&(O=M),1==t&&M&&(O={caretPos:y});if(M)break;if(s.resetMaskSet.call(c),v=o.getTest.call(c,w),p.validPositions=u.extend(!0,[],_),p.tests=u.extend(!0,{},T),!p.excludes[w]){O=a.call(c,t,e,n,i,w-1,l);break}if(null!=v.alternation){var D=(0,o.getDecisionTaker)(v);if(-1!==p.excludes[w].indexOf(D+":"+v.alternation)){O=a.call(c,t,e,n,i,w-1,l);break}for(p.excludes[w].push(D+":"+v.alternation),y=w;y<s.getLastValidPosition.call(c,void 0,!0)+1;y++)p.validPositions.splice(w)}else delete p.excludes[w]}}return O&&!1===h.keepStatic||delete p.excludes[w],O}function l(t,e,n){var i=this.opts,s=this.maskset;switch(i.casing||e.casing){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break;case"title":var o=s.validPositions[n-1];t=0===n||o&&o.input===String.fromCharCode(r.keyCode.Space)?t.toUpperCase():t.toLowerCase();break;default:if("function"==typeof i.casing){var a=Array.prototype.slice.call(arguments);a.push(s.validPositions),t=i.casing.apply(this,a)}}return t}function c(t){var e=this,n=this.opts,i=this.maskset;if("function"==typeof n.isComplete)return n.isComplete(t,n);if("*"!==n.repeat){var r=!1,a=s.determineLastRequiredPosition.call(e,!0),l=a.l;if(void 0===a.def||a.def.newBlockMarker||a.def.optionality||a.def.optionalQuantifier){r=!0;for(var c=0;c<=l;c++){var u=o.getTestTemplate.call(e,c).match;if(!0!==u.static&&void 0===i.validPositions[c]&&(!1===u.optionality||void 0===u.optionality||u.optionality&&0==u.newBlockMarker)&&(!1===u.optionalQuantifier||void 0===u.optionalQuantifier)||!0===u.static&&""!=u.def&&t[c]!==o.getPlaceholder.call(e,c,u)){r=!1;break}}}return r}}function u(t){var e=this.opts.insertMode?0:1;return this.isRTL?t.begin-t.end>e:t.end-t.begin>e}function d(t,e,n,i,r,h,g){var v=this,y=this.dependencyLib,b=this.opts,w=v.maskset;n=!0===n;var k=t;function x(t){if(void 0!==t){if(void 0!==t.remove&&(Array.isArray(t.remove)||(t.remove=[t.remove]),t.remove.sort((function(t,e){return v.isRTL?t.pos-e.pos:e.pos-t.pos})).forEach((function(t){m.call(v,{begin:t,end:t+1})})),t.remove=void 0),void 0!==t.insert&&(Array.isArray(t.insert)||(t.insert=[t.insert]),t.insert.sort((function(t,e){return v.isRTL?e.pos-t.pos:t.pos-e.pos})).forEach((function(t){""!==t.c&&d.call(v,t.pos,t.c,void 0===t.strict||t.strict,void 0!==t.fromIsValid?t.fromIsValid:i)})),t.insert=void 0),t.refreshFromBuffer&&t.buffer){var e=t.refreshFromBuffer;p.call(v,!0===e?e:e.start,e.end,t.buffer),t.refreshFromBuffer=void 0}void 0!==t.rewritePosition&&(k=t.rewritePosition,t=!0)}return t}function S(e,n,r){var a=!1;return o.getTests.call(v,e).every((function(c,d){var h=c.match;if(s.getBuffer.call(v,!0),!1!==(a=(!h.jit||void 0!==w.validPositions[s.seekPrevious.call(v,e)])&&(null!=h.fn?h.fn.test(n,w,e,r,b,u.call(v,t)):(n===h.def||n===b.skipOptionalPartCharacter)&&""!==h.def&&{c:o.getPlaceholder.call(v,e,h,!0)||h.def,pos:e}))){var p=void 0!==a.c?a.c:n,f=e;return p=p===b.skipOptionalPartCharacter&&!0===h.static?o.getPlaceholder.call(v,e,h,!0)||h.def:p,!0!==(a=x(a))&&void 0!==a.pos&&a.pos!==e&&(f=a.pos),!0!==a&&void 0===a.pos&&void 0===a.c||!1===m.call(v,t,y.extend({},c,{input:l.call(v,p,h,f)}),i,f)&&(a=!1),!1}return!0})),a}void 0!==t.begin&&(k=v.isRTL?t.end:t.begin);var C=!0,_=y.extend(!0,[],w.validPositions);if(!1===b.keepStatic&&void 0!==w.excludes[k]&&!0!==r&&!0!==i)for(var T=k;T<(v.isRTL?t.begin:t.end);T++)void 0!==w.excludes[T]&&(w.excludes[T]=void 0,delete w.tests[T]);if("function"==typeof b.preValidation&&!0!==i&&!0!==h&&(C=x(C=b.preValidation.call(v,s.getBuffer.call(v),k,e,u.call(v,t),b,w,t,n||r))),!0===C){if(C=S(k,e,n),(!n||!0===i)&&!1===C&&!0!==h){var M=w.validPositions[k];if(!M||!0!==M.match.static||M.match.def!==e&&e!==b.skipOptionalPartCharacter){if(b.insertMode||void 0===w.validPositions[s.seekNext.call(v,k)]||t.end>k){var O=!1;if(w.jitOffset[k]&&void 0===w.validPositions[s.seekNext.call(v,k)]&&!1!==(C=d.call(v,k+w.jitOffset[k],e,!0,!0))&&(!0!==r&&(C.caret=k),O=!0),t.end>k&&(w.validPositions[k]=void 0),!O&&!s.isMask.call(v,k,b.keepStatic&&0===k))for(var E=k+1,A=s.seekNext.call(v,k,!1,0!==k);E<=A;E++)if(!1!==(C=S(E,e,n))){C=f.call(v,k,void 0!==C.pos?C.pos:E)||C,k=E;break}}}else C={caret:s.seekNext.call(v,k)}}v.hasAlternator&&!0!==r&&!n&&(r=!0,!1===C&&b.keepStatic&&(c.call(v,s.getBuffer.call(v))||0===k)?C=a.call(v,k,e,n,i,void 0,t):(u.call(v,t)&&w.tests[k]&&w.tests[k].length>1&&b.keepStatic||1==C&&!0!==b.numericInput&&w.tests[k]&&w.tests[k].length>1&&s.getLastValidPosition.call(v,void 0,!0)>k)&&(C=a.call(v,!0))),!0===C&&(C={pos:k})}if("function"==typeof b.postValidation&&!0!==i&&!0!==h){var N=b.postValidation.call(v,s.getBuffer.call(v,!0),void 0!==t.begin?v.isRTL?t.end:t.begin:t,e,C,b,w,n,g);void 0!==N&&(C=!0===N?C:N)}C&&void 0===C.pos&&(C.pos=k),!1===C||!0===h?(s.resetMaskSet.call(v,!0),w.validPositions=y.extend(!0,[],_)):f.call(v,void 0,k,!0);var D=x(C);return void 0!==v.maxLength&&s.getBuffer.call(v).length>v.maxLength&&!i&&(s.resetMaskSet.call(v,!0),w.validPositions=y.extend(!0,[],_),D=!1),D}function h(t,e,n){for(var i=this.maskset,r=!1,s=o.getTests.call(this,t),a=0;a<s.length;a++){if(s[a].match&&(s[a].match.nativeDef===e.match[n.shiftPositions?"def":"nativeDef"]&&(!n.shiftPositions||!e.match.static)||s[a].match.nativeDef===e.match.nativeDef||n.regex&&!s[a].match.static&&s[a].match.fn.test(e.input,i,t,!1,n))){r=!0;break}if(s[a].match&&s[a].match.def===e.match.nativeDef){r=void 0;break}}return!1===r&&void 0!==i.jitOffset[t]&&(r=h.call(this,t+i.jitOffset[t],e,n)),r}function p(t,e,n){var r,o,a=this,l=this.maskset,c=this.opts,u=this.dependencyLib,d=c.skipOptionalPartCharacter,h=a.isRTL?n.slice().reverse():n;if(c.skipOptionalPartCharacter="",!0===t)s.resetMaskSet.call(a,!1),t=0,e=n.length,o=s.determineNewCaretPosition.call(a,{begin:0,end:0},!1).begin;else{for(r=t;r<e;r++)l.validPositions.splice(t,0);o=t}var p=new u.Event("keypress");for(r=t;r<e;r++){p.key=h[r].toString(),a.ignorable=!1;var f=i.EventHandlers.keypressEvent.call(a,p,!0,!1,!1,o);!1!==f&&void 0!==f&&(o=f.forwardPosition)}c.skipOptionalPartCharacter=d}function f(t,e,n){var i=this,r=this.maskset,a=this.dependencyLib;if(void 0===t)for(t=e-1;t>0&&!r.validPositions[t];t--);for(var l=t;l<e;l++)if(void 0===r.validPositions[l]&&!s.isMask.call(i,l,!1)&&(0==l?o.getTest.call(i,l):r.validPositions[l-1])){var c=o.getTests.call(i,l).slice();""===c[c.length-1].match.def&&c.pop();var u,h=o.determineTestTemplate.call(i,l,c);if(h&&(!0!==h.match.jit||"master"===h.match.newBlockMarker&&(u=r.validPositions[l+1])&&!0===u.match.optionalQuantifier)&&((h=a.extend({},h,{input:o.getPlaceholder.call(i,l,h.match,!0)||h.match.def})).generatedInput=!0,m.call(i,l,h,!0),!0!==n)){var p=r.validPositions[e].input;return r.validPositions[e]=void 0,d.call(i,e,p,!0,!0)}}}function m(t,e,n,i){var r=this,a=this.maskset,l=this.opts,c=this.dependencyLib;function p(t,e,n){var i=e[t];if(void 0!==i&&!0===i.match.static&&!0!==i.match.optionality&&(void 0===e[0]||void 0===e[0].alternation)){var r=n.begin<=t-1?e[t-1]&&!0===e[t-1].match.static&&e[t-1]:e[t-1],s=n.end>t+1?e[t+1]&&!0===e[t+1].match.static&&e[t+1]:e[t+1];return r&&s}return!1}var f=0,m=void 0!==t.begin?t.begin:t,g=void 0!==t.end?t.end:t,v=!0;if(t.begin>t.end&&(m=t.end,g=t.begin),i=void 0!==i?i:m,void 0===n&&(m!==g||l.insertMode&&void 0!==a.validPositions[i]||void 0===e||e.match.optionalQuantifier||e.match.optionality)){var y,b=c.extend(!0,[],a.validPositions),w=s.getLastValidPosition.call(r,void 0,!0);a.p=m;var k=u.call(r,t)?m:i;for(y=w;y>=k;y--)a.validPositions.splice(y,1),void 0===e&&delete a.tests[y+1];var x,S,C=i,_=C;for(e&&(a.validPositions[i]=c.extend(!0,{},e),_++,C++),null==b[g]&&a.jitOffset[g]&&(g+=a.jitOffset[g]+1),y=e?g:g-1;y<=w;y++){if(void 0!==(x=b[y])&&!0!==x.generatedInput&&(y>=g||y>=m&&p(y,b,{begin:m,end:g}))){for(;""!==o.getTest.call(r,_).match.def;){if(!1!==(S=h.call(r,_,x,l))||"+"===x.match.def){"+"===x.match.def&&s.getBuffer.call(r,!0);var T=d.call(r,_,x.input,"+"!==x.match.def,!0);if(v=!1!==T,C=(T.pos||_)+1,!v&&S)break}else v=!1;if(v){void 0===e&&x.match.static&&y===t.begin&&f++;break}if(!v&&s.getBuffer.call(r),_>a.maskLength)break;_++}""==o.getTest.call(r,_).match.def&&(v=!1),_=C}if(!v)break}if(!v)return a.validPositions=c.extend(!0,[],b),s.resetMaskSet.call(r,!0),!1}else e&&o.getTest.call(r,i).match.cd===e.match.cd&&(a.validPositions[i]=c.extend(!0,{},e));return s.resetMaskSet.call(r,!0),f}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}var i={};return function(){var t=i;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(7149),n(3194),n(9302),n(4013),n(3851),n(219),n(207),n(5296);var e,r=(e=n(2394))&&e.__esModule?e:{default:e};t.default=r.default}(),i}()},197:function(t){var e;e=()=>(()=>{var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,r={};((e,n)=>{for(var i in n)t(e,i,{get:n[i],enumerable:!0})})(r,{Iti:()=>y,default:()=>w});var s=[["af","93"],["al","355"],["dz","213"],["as","1",5,["684"]],["ad","376"],["ao","244"],["ai","1",6,["264"]],["ag","1",7,["268"]],["ar","54"],["am","374"],["aw","297"],["ac","247"],["au","61",0],["at","43"],["az","994"],["bs","1",8,["242"]],["bh","973"],["bd","880"],["bb","1",9,["246"]],["by","375"],["be","32"],["bz","501"],["bj","229"],["bm","1",10,["441"]],["bt","975"],["bo","591"],["ba","387"],["bw","267"],["br","55"],["io","246"],["vg","1",11,["284"]],["bn","673"],["bg","359"],["bf","226"],["bi","257"],["kh","855"],["cm","237"],["ca","1",1,["204","226","236","249","250","263","289","306","343","354","365","367","368","382","387","403","416","418","428","431","437","438","450","584","468","474","506","514","519","548","579","581","584","587","604","613","639","647","672","683","705","709","742","753","778","780","782","807","819","825","867","873","879","902","905"]],["cv","238"],["bq","599",1,["3","4","7"]],["ky","1",12,["345"]],["cf","236"],["td","235"],["cl","56"],["cn","86"],["cx","61",2,["89164"]],["cc","61",1,["89162"]],["co","57"],["km","269"],["cg","242"],["cd","243"],["ck","682"],["cr","506"],["ci","225"],["hr","385"],["cu","53"],["cw","599",0],["cy","357"],["cz","420"],["dk","45"],["dj","253"],["dm","1",13,["767"]],["do","1",2,["809","829","849"]],["ec","593"],["eg","20"],["sv","503"],["gq","240"],["er","291"],["ee","372"],["sz","268"],["et","251"],["fk","500"],["fo","298"],["fj","679"],["fi","358",0],["fr","33"],["gf","594"],["pf","689"],["ga","241"],["gm","220"],["ge","995"],["de","49"],["gh","233"],["gi","350"],["gr","30"],["gl","299"],["gd","1",14,["473"]],["gp","590",0],["gu","1",15,["671"]],["gt","502"],["gg","44",1,["1481","7781","7839","7911"]],["gn","224"],["gw","245"],["gy","592"],["ht","509"],["hn","504"],["hk","852"],["hu","36"],["is","354"],["in","91"],["id","62"],["ir","98"],["iq","964"],["ie","353"],["im","44",2,["1624","74576","7524","7924","7624"]],["il","972"],["it","39",0],["jm","1",4,["876","658"]],["jp","81"],["je","44",3,["1534","7509","7700","7797","7829","7937"]],["jo","962"],["kz","7",1,["33","7"]],["ke","254"],["ki","686"],["xk","383"],["kw","965"],["kg","996"],["la","856"],["lv","371"],["lb","961"],["ls","266"],["lr","231"],["ly","218"],["li","423"],["lt","370"],["lu","352"],["mo","853"],["mg","261"],["mw","265"],["my","60"],["mv","960"],["ml","223"],["mt","356"],["mh","692"],["mq","596"],["mr","222"],["mu","230"],["yt","262",1,["269","639"]],["mx","52"],["fm","691"],["md","373"],["mc","377"],["mn","976"],["me","382"],["ms","1",16,["664"]],["ma","212",0],["mz","258"],["mm","95"],["na","264"],["nr","674"],["np","977"],["nl","31"],["nc","687"],["nz","64"],["ni","505"],["ne","227"],["ng","234"],["nu","683"],["nf","672"],["kp","850"],["mk","389"],["mp","1",17,["670"]],["no","47",0],["om","968"],["pk","92"],["pw","680"],["ps","970"],["pa","507"],["pg","675"],["py","595"],["pe","51"],["ph","63"],["pl","48"],["pt","351"],["pr","1",3,["787","939"]],["qa","974"],["re","262",0],["ro","40"],["ru","7",0],["rw","250"],["ws","685"],["sm","378"],["st","239"],["sa","966"],["sn","221"],["rs","381"],["sc","248"],["sl","232"],["sg","65"],["sx","1",21,["721"]],["sk","421"],["si","386"],["sb","677"],["so","252"],["za","27"],["kr","82"],["ss","211"],["es","34"],["lk","94"],["bl","590",1],["sh","290"],["kn","1",18,["869"]],["lc","1",19,["758"]],["mf","590",2],["pm","508"],["vc","1",20,["784"]],["sd","249"],["sr","597"],["sj","47",1,["79"]],["se","46"],["ch","41"],["sy","963"],["tw","886"],["tj","992"],["tz","255"],["th","66"],["tl","670"],["tg","228"],["tk","690"],["to","676"],["tt","1",22,["868"]],["tn","216"],["tr","90"],["tm","993"],["tc","1",23,["649"]],["tv","688"],["ug","256"],["ua","380"],["ae","971"],["gb","44",0],["us","1",0],["uy","598"],["vi","1",24,["340"]],["uz","998"],["vu","678"],["va","39",1,["06698"]],["ve","58"],["vn","84"],["wf","681"],["eh","212",1,["5288","5289"]],["ye","967"],["zm","260"],["zw","263"],["ax","358",1,["18"]]],o=[];for(let t=0;t<s.length;t++){const e=s[t];o[t]={name:"",iso2:e[0],dialCode:e[1],priority:e[2]||0,areaCodes:e[3]||null,nodeById:{}}}var a=o,l={af:"Afghanistan",ax:"Åland Islands",al:"Albania",dz:"Algeria",as:"American Samoa",ad:"Andorra",ao:"Angola",ai:"Anguilla",aq:"Antarctica",ag:"Antigua & Barbuda",ar:"Argentina",am:"Armenia",aw:"Aruba",au:"Australia",at:"Austria",az:"Azerbaijan",bs:"Bahamas",bh:"Bahrain",bd:"Bangladesh",bb:"Barbados",by:"Belarus",be:"Belgium",bz:"Belize",bj:"Benin",bm:"Bermuda",bt:"Bhutan",bo:"Bolivia",ba:"Bosnia & Herzegovina",bw:"Botswana",bv:"Bouvet Island",br:"Brazil",io:"British Indian Ocean Territory",vg:"British Virgin Islands",bn:"Brunei",bg:"Bulgaria",bf:"Burkina Faso",bi:"Burundi",kh:"Cambodia",cm:"Cameroon",ca:"Canada",cv:"Cape Verde",bq:"Caribbean Netherlands",ky:"Cayman Islands",cf:"Central African Republic",td:"Chad",cl:"Chile",cn:"China",cx:"Christmas Island",cc:"Cocos (Keeling) Islands",co:"Colombia",km:"Comoros",cg:"Congo - Brazzaville",cd:"Congo - Kinshasa",ck:"Cook Islands",cr:"Costa Rica",ci:"Côte d’Ivoire",hr:"Croatia",cu:"Cuba",cw:"Curaçao",cy:"Cyprus",cz:"Czechia",dk:"Denmark",dj:"Djibouti",dm:"Dominica",do:"Dominican Republic",ec:"Ecuador",eg:"Egypt",sv:"El Salvador",gq:"Equatorial Guinea",er:"Eritrea",ee:"Estonia",sz:"Eswatini",et:"Ethiopia",fk:"Falkland Islands",fo:"Faroe Islands",fj:"Fiji",fi:"Finland",fr:"France",gf:"French Guiana",pf:"French Polynesia",tf:"French Southern Territories",ga:"Gabon",gm:"Gambia",ge:"Georgia",de:"Germany",gh:"Ghana",gi:"Gibraltar",gr:"Greece",gl:"Greenland",gd:"Grenada",gp:"Guadeloupe",gu:"Guam",gt:"Guatemala",gg:"Guernsey",gn:"Guinea",gw:"Guinea-Bissau",gy:"Guyana",ht:"Haiti",hm:"Heard & McDonald Islands",hn:"Honduras",hk:"Hong Kong SAR China",hu:"Hungary",is:"Iceland",in:"India",id:"Indonesia",ir:"Iran",iq:"Iraq",ie:"Ireland",im:"Isle of Man",il:"Israel",it:"Italy",jm:"Jamaica",jp:"Japan",je:"Jersey",jo:"Jordan",kz:"Kazakhstan",ke:"Kenya",ki:"Kiribati",kw:"Kuwait",kg:"Kyrgyzstan",la:"Laos",lv:"Latvia",lb:"Lebanon",ls:"Lesotho",lr:"Liberia",ly:"Libya",li:"Liechtenstein",lt:"Lithuania",lu:"Luxembourg",mo:"Macao SAR China",mg:"Madagascar",mw:"Malawi",my:"Malaysia",mv:"Maldives",ml:"Mali",mt:"Malta",mh:"Marshall Islands",mq:"Martinique",mr:"Mauritania",mu:"Mauritius",yt:"Mayotte",mx:"Mexico",fm:"Micronesia",md:"Moldova",mc:"Monaco",mn:"Mongolia",me:"Montenegro",ms:"Montserrat",ma:"Morocco",mz:"Mozambique",mm:"Myanmar (Burma)",na:"Namibia",nr:"Nauru",np:"Nepal",nl:"Netherlands",nc:"New Caledonia",nz:"New Zealand",ni:"Nicaragua",ne:"Niger",ng:"Nigeria",nu:"Niue",nf:"Norfolk Island",kp:"North Korea",mk:"North Macedonia",mp:"Northern Mariana Islands",no:"Norway",om:"Oman",pk:"Pakistan",pw:"Palau",ps:"Palestinian Territories",pa:"Panama",pg:"Papua New Guinea",py:"Paraguay",pe:"Peru",ph:"Philippines",pn:"Pitcairn Islands",pl:"Poland",pt:"Portugal",pr:"Puerto Rico",qa:"Qatar",re:"Réunion",ro:"Romania",ru:"Russia",rw:"Rwanda",ws:"Samoa",sm:"San Marino",st:"São Tomé & Príncipe",sa:"Saudi Arabia",sn:"Senegal",rs:"Serbia",sc:"Seychelles",sl:"Sierra Leone",sg:"Singapore",sx:"Sint Maarten",sk:"Slovakia",si:"Slovenia",sb:"Solomon Islands",so:"Somalia",za:"South Africa",gs:"South Georgia & South Sandwich Islands",kr:"South Korea",ss:"South Sudan",es:"Spain",lk:"Sri Lanka",bl:"St. Barthélemy",sh:"St. Helena",kn:"St. Kitts & Nevis",lc:"St. Lucia",mf:"St. Martin",pm:"St. Pierre & Miquelon",vc:"St. Vincent & Grenadines",sd:"Sudan",sr:"Suriname",sj:"Svalbard & Jan Mayen",se:"Sweden",ch:"Switzerland",sy:"Syria",tw:"Taiwan",tj:"Tajikistan",tz:"Tanzania",th:"Thailand",tl:"Timor-Leste",tg:"Togo",tk:"Tokelau",to:"Tonga",tt:"Trinidad & Tobago",tn:"Tunisia",tr:"Turkey",tm:"Turkmenistan",tc:"Turks & Caicos Islands",tv:"Tuvalu",um:"U.S. Outlying Islands",vi:"U.S. Virgin Islands",ug:"Uganda",ua:"Ukraine",ae:"United Arab Emirates",gb:"United Kingdom",us:"United States",uy:"Uruguay",uz:"Uzbekistan",vu:"Vanuatu",va:"Vatican City",ve:"Venezuela",vn:"Vietnam",wf:"Wallis & Futuna",eh:"Western Sahara",ye:"Yemen",zm:"Zambia",zw:"Zimbabwe",selectedCountryAriaLabel:"Selected country",noCountrySelected:"No country selected",countryListAriaLabel:"List of countries",searchPlaceholder:"Search",zeroSearchResults:"No results found",oneSearchResult:"1 result found",multipleSearchResults:"${count} results found",ac:"Ascension Island",xk:"Kosovo"};for(let t=0;t<a.length;t++)a[t].name=l[a[t].iso2];var c,u=0,d={allowDropdown:!0,autoPlaceholder:"polite",containerClass:"",countryOrder:null,customPlaceholder:null,dropdownContainer:null,excludeCountries:[],fixDropdownWidth:!0,formatAsYouType:!0,formatOnDisplay:!0,geoIpLookup:null,hiddenInput:null,i18n:{},initialCountry:"",nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",showFlags:!0,separateDialCode:!1,strictMode:!1,useFullscreenPopup:"undefined"!=typeof navigator&&"undefined"!=typeof window&&(/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=500),utilsScript:"",validationNumberType:"MOBILE"},h=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"],p=t=>t.replace(/\D/g,""),f=(t="")=>t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),m=t=>{const e=p(t);if("1"===e.charAt(0)){const t=e.substr(1,3);return-1!==h.indexOf(t)}return!1},g=(t,e,n)=>{const i=document.createElement(t);return e&&Object.entries(e).forEach((([t,e])=>i.setAttribute(t,e))),n&&n.appendChild(i),i},v=t=>{const{instances:e}=b;Object.values(e).forEach((e=>e[t]()))},y=class{id;promise;telInput;highlightedItem;options;hadInitialPlaceholder;isRTL;isAndroid;selectedCountryData;countries;dialCodeMaxLen;dialCodeToIso2Map;dialCodes;countryContainer;selectedCountry;selectedCountryInner;selectedCountryA11yText;selectedDialCode;dropdownArrow;dropdownContent;searchInput;searchResultsA11yText;countryList;dropdown;hiddenInput;hiddenInputCountry;maxCoreNumberLength;defaultCountry;_handleHiddenInputSubmit;_handleLabelClick;_handleClickSelectedCountry;_handleCountryContainerKeydown;_handleInputEvent;_handleKeydownEvent;_handleWindowScroll;_handleMouseoverCountryList;_handleClickCountryList;_handleClickOffToClose;_handleKeydownOnDropdown;_handleSearchChange;resolveAutoCountryPromise;rejectAutoCountryPromise;resolveUtilsScriptPromise;rejectUtilsScriptPromise;constructor(t,e={}){this.id=u++,this.telInput=t,this.highlightedItem=null,this.options=Object.assign({},d,e),this.hadInitialPlaceholder=Boolean(t.getAttribute("placeholder"))}_init(){this.options.useFullscreenPopup&&(this.options.fixDropdownWidth=!1),this.options.separateDialCode&&(this.options.allowDropdown=!0,this.options.nationalMode=!1),this.options.showFlags||this.options.separateDialCode||(this.options.nationalMode=!1),this.options.useFullscreenPopup&&!this.options.dropdownContainer&&(this.options.dropdownContainer=document.body),this.isAndroid="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),this.isRTL=!!this.telInput.closest("[dir=rtl]"),this.options.i18n={...l,...this.options.i18n};const t=new Promise(((t,e)=>{this.resolveAutoCountryPromise=t,this.rejectAutoCountryPromise=e})),e=new Promise(((t,e)=>{this.resolveUtilsScriptPromise=t,this.rejectUtilsScriptPromise=e}));this.promise=Promise.all([t,e]),this.selectedCountryData={},this._processCountryData(),this._generateMarkup(),this._setInitialState(),this._initListeners(),this._initRequests()}_processCountryData(){this._processAllCountries(),this._processDialCodes(),this._translateCountryNames(),this.options.countryOrder&&(this.options.countryOrder=this.options.countryOrder.map((t=>t.toLowerCase()))),this._sortCountries()}_sortCountries(){this.countries.sort(((t,e)=>{const{countryOrder:n}=this.options;if(n){const i=n.indexOf(t.iso2),r=n.indexOf(e.iso2),s=i>-1,o=r>-1;if(s||o)return s&&o?i-r:s?-1:1}return t.name<e.name?-1:t.name>e.name?1:0}))}_addToDialCodeMap(t,e,n){e.length>this.dialCodeMaxLen&&(this.dialCodeMaxLen=e.length),this.dialCodeToIso2Map.hasOwnProperty(e)||(this.dialCodeToIso2Map[e]=[]);for(let n=0;n<this.dialCodeToIso2Map[e].length;n++)if(this.dialCodeToIso2Map[e][n]===t)return;const i=void 0!==n?n:this.dialCodeToIso2Map[e].length;this.dialCodeToIso2Map[e][i]=t}_processAllCountries(){const{onlyCountries:t,excludeCountries:e}=this.options;if(t.length){const e=t.map((t=>t.toLowerCase()));this.countries=a.filter((t=>e.indexOf(t.iso2)>-1))}else if(e.length){const t=e.map((t=>t.toLowerCase()));this.countries=a.filter((e=>-1===t.indexOf(e.iso2)))}else this.countries=a}_translateCountryNames(){for(let t=0;t<this.countries.length;t++){const e=this.countries[t].iso2.toLowerCase();this.options.i18n.hasOwnProperty(e)&&(this.countries[t].name=this.options.i18n[e])}}_processDialCodes(){this.dialCodes={},this.dialCodeMaxLen=0,this.dialCodeToIso2Map={};for(let t=0;t<this.countries.length;t++){const e=this.countries[t];this.dialCodes[e.dialCode]||(this.dialCodes[e.dialCode]=!0),this._addToDialCodeMap(e.iso2,e.dialCode,e.priority)}for(let t=0;t<this.countries.length;t++){const e=this.countries[t];if(e.areaCodes){const t=this.dialCodeToIso2Map[e.dialCode][0];for(let n=0;n<e.areaCodes.length;n++){const i=e.areaCodes[n];for(let n=1;n<i.length;n++){const r=e.dialCode+i.substr(0,n);this._addToDialCodeMap(t,r),this._addToDialCodeMap(e.iso2,r)}this._addToDialCodeMap(e.iso2,e.dialCode+i)}}}}_generateMarkup(){this.telInput.classList.add("iti__tel-input"),this.telInput.hasAttribute("autocomplete")||this.telInput.form&&this.telInput.form.hasAttribute("autocomplete")||this.telInput.setAttribute("autocomplete","off");const{allowDropdown:t,separateDialCode:e,showFlags:n,containerClass:i,hiddenInput:r,dropdownContainer:s,fixDropdownWidth:o,useFullscreenPopup:a,i18n:l}=this.options;let c="iti";t&&(c+=" iti--allow-dropdown"),n&&(c+=" iti--show-flags"),i&&(c+=` ${i}`),a||(c+=" iti--inline-dropdown");const u=g("div",{class:c});if(this.telInput.parentNode?.insertBefore(u,this.telInput),t||n){this.countryContainer=g("div",{class:"iti__country-container"},u),this.selectedCountry=g("button",{type:"button",class:"iti__selected-country",...t&&{"aria-expanded":"false","aria-label":this.options.i18n.selectedCountryAriaLabel,"aria-haspopup":"true","aria-controls":`iti-${this.id}__dropdown-content`,role:"combobox"}},this.countryContainer);const n=g("div",{class:"iti__selected-country-primary"},this.selectedCountry);if(this.selectedCountryInner=g("div",null,n),this.selectedCountryA11yText=g("span",{class:"iti__a11y-text"},this.selectedCountryInner),this.telInput.disabled?this.selectedCountry.setAttribute("aria-disabled","true"):this.selectedCountry.setAttribute("tabindex","0"),t&&(this.dropdownArrow=g("div",{class:"iti__arrow","aria-hidden":"true"},n)),e&&(this.selectedDialCode=g("div",{class:"iti__selected-dial-code"},this.selectedCountry)),t){const t=o?"":"iti--flexible-dropdown-width";if(this.dropdownContent=g("div",{id:`iti-${this.id}__dropdown-content`,class:`iti__dropdown-content iti__hide ${t}`}),this.searchInput=g("input",{type:"text",class:"iti__search-input",placeholder:l.searchPlaceholder,role:"combobox","aria-expanded":"true","aria-label":l.searchPlaceholder,"aria-controls":`iti-${this.id}__country-listbox`,"aria-autocomplete":"list",autocomplete:"off"},this.dropdownContent),this.searchResultsA11yText=g("span",{class:"iti__a11y-text"},this.dropdownContent),this.countryList=g("ul",{class:"iti__country-list",id:`iti-${this.id}__country-listbox`,role:"listbox","aria-label":l.countryListAriaLabel},this.dropdownContent),this._appendListItems(this.countries,"iti__standard"),this._updateSearchResultsText(),s){let t="iti iti--container";t+=a?" iti--fullscreen-popup":" iti--inline-dropdown",this.dropdown=g("div",{class:t}),this.dropdown.appendChild(this.dropdownContent)}else this.countryContainer.appendChild(this.dropdownContent)}}if(u.appendChild(this.telInput),r){const t=r(this.telInput.getAttribute("name")||"");t.phone&&(this.hiddenInput=g("input",{type:"hidden",name:t.phone}),u.appendChild(this.hiddenInput)),t.country&&(this.hiddenInputCountry=g("input",{type:"hidden",name:t.country}),u.appendChild(this.hiddenInputCountry))}}_appendListItems(t,e){for(let n=0;n<t.length;n++){const i=t[n],r=g("li",{id:`iti-${this.id}__item-${i.iso2}`,class:`iti__country ${e}`,tabindex:"-1",role:"option","data-dial-code":i.dialCode,"data-country-code":i.iso2,"aria-selected":"false"},this.countryList);i.nodeById[this.id]=r;let s="";this.options.showFlags&&(s+=`<div class='iti__flag-box'><div class='iti__flag iti__${i.iso2}'></div></div>`),s+=`<span class='iti__country-name'>${i.name}</span>`,s+=`<span class='iti__dial-code'>+${i.dialCode}</span>`,r.insertAdjacentHTML("beforeend",s)}}_setInitialState(t=!1){const e=this.telInput.getAttribute("value"),n=this.telInput.value,i=!e||"+"!==e.charAt(0)||n&&"+"===n.charAt(0)?n:e,r=this._getDialCode(i),s=m(i),{initialCountry:o,geoIpLookup:a}=this.options,l="auto"===o&&a;if(r&&!s)this._updateCountryFromNumber(i);else if(!l||t){const t=o?o.toLowerCase():"";t&&this._getCountryData(t,!0)?this._setCountry(t):r&&s?this._setCountry("us"):this._setCountry()}i&&this._updateValFromNumber(i)}_initListeners(){this._initTelInputListeners(),this.options.allowDropdown&&this._initDropdownListeners(),(this.hiddenInput||this.hiddenInputCountry)&&this.telInput.form&&this._initHiddenInputListener()}_initHiddenInputListener(){this._handleHiddenInputSubmit=()=>{this.hiddenInput&&(this.hiddenInput.value=this.getNumber()),this.hiddenInputCountry&&(this.hiddenInputCountry.value=this.getSelectedCountryData().iso2||"")},this.telInput.form?.addEventListener("submit",this._handleHiddenInputSubmit)}_initDropdownListeners(){this._handleLabelClick=t=>{this.dropdownContent.classList.contains("iti__hide")?this.telInput.focus():t.preventDefault()};const t=this.telInput.closest("label");t&&t.addEventListener("click",this._handleLabelClick),this._handleClickSelectedCountry=()=>{!this.dropdownContent.classList.contains("iti__hide")||this.telInput.disabled||this.telInput.readOnly||this._openDropdown()},this.selectedCountry.addEventListener("click",this._handleClickSelectedCountry),this._handleCountryContainerKeydown=t=>{this.dropdownContent.classList.contains("iti__hide")&&["ArrowUp","ArrowDown"," ","Enter"].includes(t.key)&&(t.preventDefault(),t.stopPropagation(),this._openDropdown()),"Tab"===t.key&&this._closeDropdown()},this.countryContainer.addEventListener("keydown",this._handleCountryContainerKeydown)}_initRequests(){const{utilsScript:t,initialCountry:e,geoIpLookup:n}=this.options;t&&!b.utils?b.documentReady()?b.loadUtils(t):window.addEventListener("load",(()=>{b.loadUtils(t)})):this.resolveUtilsScriptPromise(),"auto"===e&&n&&!this.selectedCountryData.iso2?this._loadAutoCountry():this.resolveAutoCountryPromise()}_loadAutoCountry(){b.autoCountry?this.handleAutoCountry():b.startedLoadingAutoCountry||(b.startedLoadingAutoCountry=!0,"function"==typeof this.options.geoIpLookup&&this.options.geoIpLookup(((t="")=>{const e=t.toLowerCase();e&&this._getCountryData(e,!0)?(b.autoCountry=e,setTimeout((()=>v("handleAutoCountry")))):(this._setInitialState(!0),v("rejectAutoCountryPromise"))}),(()=>{this._setInitialState(!0),v("rejectAutoCountryPromise")})))}_initTelInputListeners(){const{strictMode:t,formatAsYouType:e,separateDialCode:n,formatOnDisplay:i}=this.options;let r=!1;const s=()=>{this._openDropdown(),this.searchInput.value="+",this._filterCountries("",!0)};this._handleInputEvent=o=>{if(this.isAndroid&&"+"===o?.data&&n){const t=this.telInput.selectionStart||0,e=this.telInput.value.substring(0,t-1),n=this.telInput.value.substring(t);return this.telInput.value=e+n,void s()}this._updateCountryFromNumber(this.telInput.value)&&this._triggerCountryChange();const a=o?.data&&/[^+0-9]/.test(o.data),l="insertFromPaste"===o?.inputType&&this.telInput.value;a||l&&!t?r=!0:/[^+0-9]/.test(this.telInput.value)||(r=!1);const c=o?.detail&&o.detail.isSetNumber&&!i;if(e&&!r&&!c){const t=this.telInput.selectionStart||0,e=this.telInput.value.substring(0,t).replace(/[^+0-9]/g,"").length,n="deleteContentForward"===o?.inputType,i=this._formatNumberAsYouType(),r=((t,e,n,i)=>{if(0===n&&!i)return 0;let r=0;for(let n=0;n<e.length;n++){if(/[+0-9]/.test(e[n])&&r++,r===t&&!i)return n+1;if(i&&r===t+1)return n}return e.length})(e,i,t,n);this.telInput.value=i,this.telInput.setSelectionRange(r,r)}},this.telInput.addEventListener("input",this._handleInputEvent),(t||n)&&(this._handleKeydownEvent=e=>{if(e.key&&1===e.key.length&&!e.altKey&&!e.ctrlKey&&!e.metaKey){if(n&&"+"===e.key)return e.preventDefault(),void s();if(t){const t=0===this.telInput.selectionStart&&"+"===e.key,n=/^[0-9]$/.test(e.key),i=t||n,r=this._getFullNumber(),s=b.utils.getCoreNumber(r,this.selectedCountryData.iso2),o=this.maxCoreNumberLength&&s.length>=this.maxCoreNumberLength,a=this.telInput.value.substring(this.telInput.selectionStart,this.telInput.selectionEnd),l=/\d/.test(a);(!i||o&&!l)&&e.preventDefault()}}},this.telInput.addEventListener("keydown",this._handleKeydownEvent))}_cap(t){const e=parseInt(this.telInput.getAttribute("maxlength")||"",10);return e&&t.length>e?t.substr(0,e):t}_trigger(t,e={}){const n=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:e});this.telInput.dispatchEvent(n)}_openDropdown(){const{fixDropdownWidth:t}=this.options;t&&(this.dropdownContent.style.width=`${this.telInput.offsetWidth}px`),this.dropdownContent.classList.remove("iti__hide"),this.selectedCountry.setAttribute("aria-expanded","true"),this._setDropdownPosition();const e=this.countryList.firstElementChild;e&&(this._highlightListItem(e,!1),this.countryList.scrollTop=0),this.searchInput.focus(),this._bindDropdownListeners(),this.dropdownArrow.classList.add("iti__arrow--up"),this._trigger("open:countrydropdown")}_setDropdownPosition(){if(this.options.dropdownContainer&&this.options.dropdownContainer.appendChild(this.dropdown),!this.options.useFullscreenPopup){const t=this.telInput.getBoundingClientRect(),e=this.telInput.offsetHeight;this.options.dropdownContainer&&(this.dropdown.style.top=`${t.top+e}px`,this.dropdown.style.left=`${t.left}px`,this._handleWindowScroll=()=>this._closeDropdown(),window.addEventListener("scroll",this._handleWindowScroll))}}_bindDropdownListeners(){this._handleMouseoverCountryList=t=>{const e=t.target?.closest(".iti__country");e&&this._highlightListItem(e,!1)},this.countryList.addEventListener("mouseover",this._handleMouseoverCountryList),this._handleClickCountryList=t=>{const e=t.target?.closest(".iti__country");e&&this._selectListItem(e)},this.countryList.addEventListener("click",this._handleClickCountryList);let t=!0;this._handleClickOffToClose=()=>{t||this._closeDropdown(),t=!1},document.documentElement.addEventListener("click",this._handleClickOffToClose),this._handleKeydownOnDropdown=t=>{["ArrowUp","ArrowDown","Enter","Escape"].includes(t.key)&&(t.preventDefault(),t.stopPropagation(),"ArrowUp"===t.key||"ArrowDown"===t.key?this._handleUpDownKey(t.key):"Enter"===t.key?this._handleEnterKey():"Escape"===t.key&&this._closeDropdown())},document.addEventListener("keydown",this._handleKeydownOnDropdown);const e=()=>{const t=this.searchInput.value.trim();t?this._filterCountries(t):this._filterCountries("",!0)};let n=null;this._handleSearchChange=()=>{n&&clearTimeout(n),n=setTimeout((()=>{e(),n=null}),100)},this.searchInput.addEventListener("input",this._handleSearchChange),this.searchInput.addEventListener("click",(t=>t.stopPropagation()))}_filterCountries(t,e=!1){let n=!0;this.countryList.innerHTML="";const i=f(t);for(let t=0;t<this.countries.length;t++){const r=this.countries[t],s=f(r.name),o=`+${r.dialCode}`;if(e||s.includes(i)||o.includes(i)||r.iso2.includes(i)){const t=r.nodeById[this.id];t&&this.countryList.appendChild(t),n&&(this._highlightListItem(t,!1),n=!1)}}n&&this._highlightListItem(null,!1),this.countryList.scrollTop=0,this._updateSearchResultsText()}_updateSearchResultsText(){const{i18n:t}=this.options,e=this.countryList.childElementCount;let n;n=0===e?t.zeroSearchResults:1===e?t.oneSearchResult:t.multipleSearchResults.replace("${count}",e.toString()),this.searchResultsA11yText.textContent=n}_handleUpDownKey(t){let e="ArrowUp"===t?this.highlightedItem?.previousElementSibling:this.highlightedItem?.nextElementSibling;!e&&this.countryList.childElementCount>1&&(e="ArrowUp"===t?this.countryList.lastElementChild:this.countryList.firstElementChild),e&&(this._scrollTo(e),this._highlightListItem(e,!1))}_handleEnterKey(){this.highlightedItem&&this._selectListItem(this.highlightedItem)}_updateValFromNumber(t){let e=t;if(this.options.formatOnDisplay&&b.utils&&this.selectedCountryData){const t=this.options.nationalMode||"+"!==e.charAt(0)&&!this.options.separateDialCode,{NATIONAL:n,INTERNATIONAL:i}=b.utils.numberFormat,r=t?n:i;e=b.utils.formatNumber(e,this.selectedCountryData.iso2,r)}e=this._beforeSetNumber(e),this.telInput.value=e}_updateCountryFromNumber(t){const e=t.indexOf("+");let n=e?t.substring(e):t;const i=this.selectedCountryData.dialCode;n&&"1"===i&&"+"!==n.charAt(0)&&("1"!==n.charAt(0)&&(n=`1${n}`),n=`+${n}`),this.options.separateDialCode&&i&&"+"!==n.charAt(0)&&(n=`+${i}${n}`);const r=this._getDialCode(n,!0),s=p(n);let o=null;if(r){const t=this.dialCodeToIso2Map[p(r)],e=-1!==t.indexOf(this.selectedCountryData.iso2)&&s.length<=r.length-1;if(!("1"===i&&m(s)||e))for(let e=0;e<t.length;e++)if(t[e]){o=t[e];break}}else"+"===n.charAt(0)&&s.length?o="":n&&"+"!==n||this.selectedCountryData.iso2||(o=this.defaultCountry);return null!==o&&this._setCountry(o)}_highlightListItem(t,e){const n=this.highlightedItem;if(n&&(n.classList.remove("iti__highlight"),n.setAttribute("aria-selected","false")),this.highlightedItem=t,this.highlightedItem){this.highlightedItem.classList.add("iti__highlight"),this.highlightedItem.setAttribute("aria-selected","true");const t=this.highlightedItem.getAttribute("id")||"";this.selectedCountry.setAttribute("aria-activedescendant",t),this.searchInput.setAttribute("aria-activedescendant",t)}e&&this.highlightedItem.focus()}_getCountryData(t,e){for(let e=0;e<this.countries.length;e++)if(this.countries[e].iso2===t)return this.countries[e];if(e)return null;throw new Error(`No country data for '${t}'`)}_setCountry(t){const{separateDialCode:e,showFlags:n,i18n:i}=this.options,r=this.selectedCountryData.iso2?this.selectedCountryData:{};if(this.selectedCountryData=t&&this._getCountryData(t,!1)||{},this.selectedCountryData.iso2&&(this.defaultCountry=this.selectedCountryData.iso2),this.selectedCountryInner){let e="",r="";t&&n?(e=`iti__flag iti__${t}`,r=`${this.selectedCountryData.name} +${this.selectedCountryData.dialCode}`):(e="iti__flag iti__globe",r=i.noCountrySelected),this.selectedCountryInner.className=e,this.selectedCountryA11yText.textContent=r}if(this._setSelectedCountryTitleAttribute(t,e),e){const t=this.selectedCountryData.dialCode?`+${this.selectedCountryData.dialCode}`:"";this.selectedDialCode.innerHTML=t;const e=(this.selectedCountry.offsetWidth||this._getHiddenSelectedCountryWidth())+8;this.isRTL?this.telInput.style.paddingRight=`${e}px`:this.telInput.style.paddingLeft=`${e}px`}return this._updatePlaceholder(),this._updateMaxLength(),r.iso2!==t}_updateMaxLength(){const{strictMode:t,placeholderNumberType:e,validationNumberType:n}=this.options;if(t&&b.utils)if(this.selectedCountryData.iso2){const t=b.utils.numberType[e];let i=b.utils.getExampleNumber(this.selectedCountryData.iso2,!1,t,!0),r=i;for(;b.utils.isPossibleNumber(i,this.selectedCountryData.iso2,n);)r=i,i+="0";const s=b.utils.getCoreNumber(r,this.selectedCountryData.iso2);this.maxCoreNumberLength=s.length}else this.maxCoreNumberLength=null}_setSelectedCountryTitleAttribute(t=null,e){if(!this.selectedCountry)return;let n;n=t&&!e?`${this.selectedCountryData.name}: +${this.selectedCountryData.dialCode}`:t?this.selectedCountryData.name:"Unknown",this.selectedCountry.setAttribute("title",n)}_getHiddenSelectedCountryWidth(){if(this.telInput.parentNode){const t=this.telInput.parentNode.cloneNode(!1);t.style.visibility="hidden",document.body.appendChild(t);const e=this.countryContainer.cloneNode();t.appendChild(e);const n=this.selectedCountry.cloneNode(!0);e.appendChild(n);const i=n.offsetWidth;return document.body.removeChild(t),i}return 0}_updatePlaceholder(){const{autoPlaceholder:t,placeholderNumberType:e,nationalMode:n,customPlaceholder:i}=this.options,r="aggressive"===t||!this.hadInitialPlaceholder&&"polite"===t;if(b.utils&&r){const t=b.utils.numberType[e];let r=this.selectedCountryData.iso2?b.utils.getExampleNumber(this.selectedCountryData.iso2,n,t):"";r=this._beforeSetNumber(r),"function"==typeof i&&(r=i(r,this.selectedCountryData)),this.telInput.setAttribute("placeholder",r)}}_selectListItem(t){const e=this._setCountry(t.getAttribute("data-country-code"));this._closeDropdown(),this._updateDialCode(t.getAttribute("data-dial-code")),this.telInput.focus(),e&&this._triggerCountryChange()}_closeDropdown(){this.dropdownContent.classList.add("iti__hide"),this.selectedCountry.setAttribute("aria-expanded","false"),this.selectedCountry.removeAttribute("aria-activedescendant"),this.highlightedItem&&this.highlightedItem.setAttribute("aria-selected","false"),this.searchInput.removeAttribute("aria-activedescendant"),this.dropdownArrow.classList.remove("iti__arrow--up"),document.removeEventListener("keydown",this._handleKeydownOnDropdown),this.searchInput.removeEventListener("input",this._handleSearchChange),document.documentElement.removeEventListener("click",this._handleClickOffToClose),this.countryList.removeEventListener("mouseover",this._handleMouseoverCountryList),this.countryList.removeEventListener("click",this._handleClickCountryList),this.options.dropdownContainer&&(this.options.useFullscreenPopup||window.removeEventListener("scroll",this._handleWindowScroll),this.dropdown.parentNode&&this.dropdown.parentNode.removeChild(this.dropdown)),this._trigger("close:countrydropdown")}_scrollTo(t){const e=this.countryList,n=document.documentElement.scrollTop,i=e.offsetHeight,r=e.getBoundingClientRect().top+n,s=r+i,o=t.offsetHeight,a=t.getBoundingClientRect().top+n,l=a+o,c=a-r+e.scrollTop;if(a<r)e.scrollTop=c;else if(l>s){const t=i-o;e.scrollTop=c-t}}_updateDialCode(t){const e=this.telInput.value,n=`+${t}`;let i;if("+"===e.charAt(0)){const t=this._getDialCode(e);i=t?e.replace(t,n):n,this.telInput.value=i}}_getDialCode(t,e){let n="";if("+"===t.charAt(0)){let i="";for(let r=0;r<t.length;r++){const s=t.charAt(r);if(!isNaN(parseInt(s,10))){if(i+=s,e)this.dialCodeToIso2Map[i]&&(n=t.substr(0,r+1));else if(this.dialCodes[i]){n=t.substr(0,r+1);break}if(i.length===this.dialCodeMaxLen)break}}}return n}_getFullNumber(){const t=this.telInput.value.trim(),{dialCode:e}=this.selectedCountryData;let n;const i=p(t);return n=this.options.separateDialCode&&"+"!==t.charAt(0)&&e&&i?`+${e}`:"",n+t}_beforeSetNumber(t){let e=t;if(this.options.separateDialCode){let t=this._getDialCode(e);if(t){t=`+${this.selectedCountryData.dialCode}`;const n=" "===e[t.length]||"-"===e[t.length]?t.length+1:t.length;e=e.substr(n)}}return this._cap(e)}_triggerCountryChange(){this._trigger("countrychange")}_formatNumberAsYouType(){const t=this._getFullNumber(),e=b.utils?b.utils.formatNumberAsYouType(t,this.selectedCountryData.iso2):t,{dialCode:n}=this.selectedCountryData;return this.options.separateDialCode&&"+"!==this.telInput.value.charAt(0)&&e.includes(`+${n}`)?(e.split(`+${n}`)[1]||"").trim():e}handleAutoCountry(){"auto"===this.options.initialCountry&&b.autoCountry&&(this.defaultCountry=b.autoCountry,this.selectedCountryData.iso2||this.selectedCountryInner.classList.contains("iti__globe")||this.setCountry(this.defaultCountry),this.resolveAutoCountryPromise())}handleUtils(){b.utils&&(this.telInput.value&&this._updateValFromNumber(this.telInput.value),this.selectedCountryData.iso2&&(this._updatePlaceholder(),this._updateMaxLength())),this.resolveUtilsScriptPromise()}destroy(){if(this.options.allowDropdown){this._closeDropdown(),this.selectedCountry.removeEventListener("click",this._handleClickSelectedCountry),this.countryContainer.removeEventListener("keydown",this._handleCountryContainerKeydown);const t=this.telInput.closest("label");t&&t.removeEventListener("click",this._handleLabelClick)}const{form:t}=this.telInput;this._handleHiddenInputSubmit&&t&&t.removeEventListener("submit",this._handleHiddenInputSubmit),this.telInput.removeEventListener("input",this._handleInputEvent),this._handleKeydownEvent&&this.telInput.removeEventListener("keydown",this._handleKeydownEvent),this.telInput.removeAttribute("data-intl-tel-input-id");const e=this.telInput.parentNode;e?.parentNode?.insertBefore(this.telInput,e),e?.parentNode?.removeChild(e),delete b.instances[this.id]}getExtension(){return b.utils?b.utils.getExtension(this._getFullNumber(),this.selectedCountryData.iso2):""}getNumber(t){if(b.utils){const{iso2:e}=this.selectedCountryData;return b.utils.formatNumber(this._getFullNumber(),e,t)}return""}getNumberType(){return b.utils?b.utils.getNumberType(this._getFullNumber(),this.selectedCountryData.iso2):-99}getSelectedCountryData(){return this.selectedCountryData}getValidationError(){if(b.utils){const{iso2:t}=this.selectedCountryData;return b.utils.getValidationError(this._getFullNumber(),t)}return-99}isValidNumber(){const t=this._getFullNumber();return!/\p{L}/u.test(t)&&(b.utils?b.utils.isPossibleNumber(t,this.selectedCountryData.iso2,this.options.validationNumberType):null)}isValidNumberPrecise(){const t=this._getFullNumber();return!/\p{L}/u.test(t)&&(b.utils?b.utils.isValidNumber(t,this.selectedCountryData.iso2):null)}setCountry(t){const e=t?.toLowerCase(),n=this.selectedCountryData.iso2;(t&&e!==n||!t&&n)&&(this._setCountry(e),this._updateDialCode(this.selectedCountryData.dialCode),this._triggerCountryChange())}setNumber(t){const e=this._updateCountryFromNumber(t);this._updateValFromNumber(t),e&&this._triggerCountryChange(),this._trigger("input",{isSetNumber:!0})}setPlaceholderNumberType(t){this.options.placeholderNumberType=t,this._updatePlaceholder()}},b=Object.assign(((t,e)=>{const n=new y(t,e);return n._init(),t.setAttribute("data-intl-tel-input-id",n.id.toString()),b.instances[n.id]=n,n}),{defaults:d,documentReady:()=>"complete"===document.readyState,getCountryData:()=>a,getInstance:t=>{const e=t.getAttribute("data-intl-tel-input-id");return e?b.instances[e]:null},instances:{},loadUtils:t=>b.utils||b.startedLoadingUtilsScript?null:(b.startedLoadingUtilsScript=!0,new Promise(((e,n)=>{import(t).then((({default:t})=>{b.utils=t,v("handleUtils"),e(!0)})).catch((()=>{v("rejectUtilsScriptPromise"),n()}))}))),version:"23.1.0"}),w=b;return c=r,((r,s,o,a)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let l of n(s))i.call(r,l)||l===o||t(r,l,{get:()=>s[l],enumerable:!(a=e(s,l))||a.enumerable});return r})(t({},"__esModule",{value:!0}),c)})().default,t.exports?t.exports=e():window.intlTelInput=e()},588:function(t){
/*!
 * Toastify js 1.12.0
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */
var e,n;e=this,n=function(t){var e=function(t){return new e.lib.init(t)};function n(t,e){return e.offset[t]?isNaN(e.offset[t])?e.offset[t]:e.offset[t]+"px":"0px"}function i(t,e){return!(!t||"string"!=typeof e||!(t.className&&t.className.trim().split(/\s+/gi).indexOf(e)>-1))}return e.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},e.lib=e.prototype={toastify:"1.12.0",constructor:e,init:function(t){return t||(t={}),this.options={},this.toastElement=null,this.options.text=t.text||e.defaults.text,this.options.node=t.node||e.defaults.node,this.options.duration=0===t.duration?0:t.duration||e.defaults.duration,this.options.selector=t.selector||e.defaults.selector,this.options.callback=t.callback||e.defaults.callback,this.options.destination=t.destination||e.defaults.destination,this.options.newWindow=t.newWindow||e.defaults.newWindow,this.options.close=t.close||e.defaults.close,this.options.gravity="bottom"===t.gravity?"toastify-bottom":e.defaults.gravity,this.options.positionLeft=t.positionLeft||e.defaults.positionLeft,this.options.position=t.position||e.defaults.position,this.options.backgroundColor=t.backgroundColor||e.defaults.backgroundColor,this.options.avatar=t.avatar||e.defaults.avatar,this.options.className=t.className||e.defaults.className,this.options.stopOnFocus=void 0===t.stopOnFocus?e.defaults.stopOnFocus:t.stopOnFocus,this.options.onClick=t.onClick||e.defaults.onClick,this.options.offset=t.offset||e.defaults.offset,this.options.escapeMarkup=void 0!==t.escapeMarkup?t.escapeMarkup:e.defaults.escapeMarkup,this.options.ariaLive=t.ariaLive||e.defaults.ariaLive,this.options.style=t.style||e.defaults.style,t.backgroundColor&&(this.options.style.background=t.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var t=document.createElement("div");for(var e in t.className="toastify on "+this.options.className,this.options.position?t.className+=" toastify-"+this.options.position:!0===this.options.positionLeft?(t.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):t.className+=" toastify-right",t.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.'),this.options.style)t.style[e]=this.options.style[e];if(this.options.ariaLive&&t.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)t.appendChild(this.options.node);else if(this.options.escapeMarkup?t.innerText=this.options.text:t.innerHTML=this.options.text,""!==this.options.avatar){var i=document.createElement("img");i.src=this.options.avatar,i.className="toastify-avatar","left"==this.options.position||!0===this.options.positionLeft?t.appendChild(i):t.insertAdjacentElement("afterbegin",i)}if(!0===this.options.close){var r=document.createElement("button");r.type="button",r.setAttribute("aria-label","Close"),r.className="toast-close",r.innerHTML="&#10006;",r.addEventListener("click",function(t){t.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var s=window.innerWidth>0?window.innerWidth:screen.width;("left"==this.options.position||!0===this.options.positionLeft)&&s>360?t.insertAdjacentElement("afterbegin",r):t.appendChild(r)}if(this.options.stopOnFocus&&this.options.duration>0){var o=this;t.addEventListener("mouseover",(function(e){window.clearTimeout(t.timeOutValue)})),t.addEventListener("mouseleave",(function(){t.timeOutValue=window.setTimeout((function(){o.removeElement(t)}),o.options.duration)}))}if(void 0!==this.options.destination&&t.addEventListener("click",function(t){t.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),"function"==typeof this.options.onClick&&void 0===this.options.destination&&t.addEventListener("click",function(t){t.stopPropagation(),this.options.onClick()}.bind(this)),"object"==typeof this.options.offset){var a=n("x",this.options),l=n("y",this.options),c="left"==this.options.position?a:"-"+a,u="toastify-top"==this.options.gravity?l:"-"+l;t.style.transform="translate("+c+","+u+")"}return t},showToast:function(){var t;if(this.toastElement=this.buildToast(),!(t="string"==typeof this.options.selector?document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||"undefined"!=typeof ShadowRoot&&this.options.selector instanceof ShadowRoot?this.options.selector:document.body))throw"Root element is not defined";var n=e.defaults.oldestFirst?t.firstChild:t.lastChild;return t.insertBefore(this.toastElement,n),e.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(t){t.className=t.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),t.parentNode&&t.parentNode.removeChild(t),this.options.callback.call(t),e.reposition()}.bind(this),400)}},e.reposition=function(){for(var t,e={top:15,bottom:15},n={top:15,bottom:15},r={top:15,bottom:15},s=document.getElementsByClassName("toastify"),o=0;o<s.length;o++){t=!0===i(s[o],"toastify-top")?"toastify-top":"toastify-bottom";var a=s[o].offsetHeight;t=t.substr(9,t.length-1),(window.innerWidth>0?window.innerWidth:screen.width)<=360?(s[o].style[t]=r[t]+"px",r[t]+=a+15):!0===i(s[o],"toastify-left")?(s[o].style[t]=e[t]+"px",e[t]+=a+15):(s[o].style[t]=n[t]+"px",n[t]+=a+15)}return this},e.lib.init.prototype=e.lib,e},t.exports?t.exports=n():e.Toastify=n()},541:function(){(function(){var t,e,n,i,r,s=function(t,e){return function(){return t.apply(e,arguments)}},o=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};e=function(){function t(){}return t.prototype.extend=function(t,e){var n,i;for(n in e)i=e[n],null==t[n]&&(t[n]=i);return t},t.prototype.isMobile=function(t){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)},t.prototype.createEvent=function(t,e,n,i){var r;return null==e&&(e=!1),null==n&&(n=!1),null==i&&(i=null),null!=document.createEvent?(r=document.createEvent("CustomEvent")).initCustomEvent(t,e,n,i):null!=document.createEventObject?(r=document.createEventObject()).eventType=t:r.eventName=t,r},t.prototype.emitEvent=function(t,e){return null!=t.dispatchEvent?t.dispatchEvent(e):e in(null!=t)?t[e]():"on"+e in(null!=t)?t["on"+e]():void 0},t.prototype.addEvent=function(t,e,n){return null!=t.addEventListener?t.addEventListener(e,n,!1):null!=t.attachEvent?t.attachEvent("on"+e,n):t[e]=n},t.prototype.removeEvent=function(t,e,n){return null!=t.removeEventListener?t.removeEventListener(e,n,!1):null!=t.detachEvent?t.detachEvent("on"+e,n):delete t[e]},t.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},t}(),n=this.WeakMap||this.MozWeakMap||(n=function(){function t(){this.keys=[],this.values=[]}return t.prototype.get=function(t){var e,n,i,r;for(e=n=0,i=(r=this.keys).length;n<i;e=++n)if(r[e]===t)return this.values[e]},t.prototype.set=function(t,e){var n,i,r,s;for(n=i=0,r=(s=this.keys).length;i<r;n=++i)if(s[n]===t)return void(this.values[n]=e);return this.keys.push(t),this.values.push(e)},t}()),t=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(t=function(){function t(){"undefined"!=typeof console&&null!==console&&console.warn("MutationObserver is not supported by your browser."),"undefined"!=typeof console&&null!==console&&console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content.")}return t.notSupported=!0,t.prototype.observe=function(){},t}()),i=this.getComputedStyle||function(t,e){return this.getPropertyValue=function(e){var n;return"float"===e&&(e="styleFloat"),r.test(e)&&e.replace(r,(function(t,e){return e.toUpperCase()})),(null!=(n=t.currentStyle)?n[e]:void 0)||null},this},r=/(\-([a-z]){1})/g,this.WOW=function(){function r(t){null==t&&(t={}),this.scrollCallback=s(this.scrollCallback,this),this.scrollHandler=s(this.scrollHandler,this),this.resetAnimation=s(this.resetAnimation,this),this.start=s(this.start,this),this.scrolled=!0,this.config=this.util().extend(t,this.defaults),null!=t.scrollContainer&&(this.config.scrollContainer=document.querySelector(t.scrollContainer)),this.animationNameCache=new n,this.wowEvent=this.util().createEvent(this.config.boxClass)}return r.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null,scrollContainer:null},r.prototype.init=function(){var t;return this.element=window.document.documentElement,"interactive"===(t=document.readyState)||"complete"===t?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},r.prototype.start=function(){var e,n,i,r,s;if(this.stopped=!1,this.boxes=function(){var t,n,i,r;for(r=[],t=0,n=(i=this.element.querySelectorAll("."+this.config.boxClass)).length;t<n;t++)e=i[t],r.push(e);return r}.call(this),this.all=function(){var t,n,i,r;for(r=[],t=0,n=(i=this.boxes).length;t<n;t++)e=i[t],r.push(e);return r}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(n=0,i=(r=this.boxes).length;n<i;n++)e=r[n],this.applyStyle(e,!0);if(this.disabled()||(this.util().addEvent(this.config.scrollContainer||window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live)return new t((s=this,function(t){var e,n,i,r,o;for(o=[],e=0,n=t.length;e<n;e++)r=t[e],o.push(function(){var t,e,n,s;for(s=[],t=0,e=(n=r.addedNodes||[]).length;t<e;t++)i=n[t],s.push(this.doSync(i));return s}.call(s));return o})).observe(document.body,{childList:!0,subtree:!0})},r.prototype.stop=function(){if(this.stopped=!0,this.util().removeEvent(this.config.scrollContainer||window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval)return clearInterval(this.interval)},r.prototype.sync=function(e){if(t.notSupported)return this.doSync(this.element)},r.prototype.doSync=function(t){var e,n,i,r,s;if(null==t&&(t=this.element),1===t.nodeType){for(s=[],n=0,i=(r=(t=t.parentNode||t).querySelectorAll("."+this.config.boxClass)).length;n<i;n++)e=r[n],o.call(this.all,e)<0?(this.boxes.push(e),this.all.push(e),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(e,!0),s.push(this.scrolled=!0)):s.push(void 0);return s}},r.prototype.show=function(t){return this.applyStyle(t),t.className=t.className+" "+this.config.animateClass,null!=this.config.callback&&this.config.callback(t),this.util().emitEvent(t,this.wowEvent),this.util().addEvent(t,"animationend",this.resetAnimation),this.util().addEvent(t,"oanimationend",this.resetAnimation),this.util().addEvent(t,"webkitAnimationEnd",this.resetAnimation),this.util().addEvent(t,"MSAnimationEnd",this.resetAnimation),t},r.prototype.applyStyle=function(t,e){var n,i,r,s;return i=t.getAttribute("data-wow-duration"),n=t.getAttribute("data-wow-delay"),r=t.getAttribute("data-wow-iteration"),this.animate((s=this,function(){return s.customStyle(t,e,i,n,r)}))},r.prototype.animate="requestAnimationFrame"in window?function(t){return window.requestAnimationFrame(t)}:function(t){return t()},r.prototype.resetStyle=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.boxes).length;e<n;e++)t=i[e],r.push(t.style.visibility="visible");return r},r.prototype.resetAnimation=function(t){var e;if(t.type.toLowerCase().indexOf("animationend")>=0)return(e=t.target||t.srcElement).className=e.className.replace(this.config.animateClass,"").trim()},r.prototype.customStyle=function(t,e,n,i,r){return e&&this.cacheAnimationName(t),t.style.visibility=e?"hidden":"visible",n&&this.vendorSet(t.style,{animationDuration:n}),i&&this.vendorSet(t.style,{animationDelay:i}),r&&this.vendorSet(t.style,{animationIterationCount:r}),this.vendorSet(t.style,{animationName:e?"none":this.cachedAnimationName(t)}),t},r.prototype.vendors=["moz","webkit"],r.prototype.vendorSet=function(t,e){var n,i,r,s;for(n in i=[],e)r=e[n],t[""+n]=r,i.push(function(){var e,i,o,a;for(a=[],e=0,i=(o=this.vendors).length;e<i;e++)s=o[e],a.push(t[""+s+n.charAt(0).toUpperCase()+n.substr(1)]=r);return a}.call(this));return i},r.prototype.vendorCSS=function(t,e){var n,r,s,o,a,l;for(o=(a=i(t)).getPropertyCSSValue(e),n=0,r=(s=this.vendors).length;n<r;n++)l=s[n],o=o||a.getPropertyCSSValue("-"+l+"-"+e);return o},r.prototype.animationName=function(t){var e;try{e=this.vendorCSS(t,"animation-name").cssText}catch(n){e=i(t).getPropertyValue("animation-name")}return"none"===e?"":e},r.prototype.cacheAnimationName=function(t){return this.animationNameCache.set(t,this.animationName(t))},r.prototype.cachedAnimationName=function(t){return this.animationNameCache.get(t)},r.prototype.scrollHandler=function(){return this.scrolled=!0},r.prototype.scrollCallback=function(){var t;if(this.scrolled&&(this.scrolled=!1,this.boxes=function(){var e,n,i,r;for(r=[],e=0,n=(i=this.boxes).length;e<n;e++)(t=i[e])&&(this.isVisible(t)?this.show(t):r.push(t));return r}.call(this),!this.boxes.length&&!this.config.live))return this.stop()},r.prototype.offsetTop=function(t){for(var e;void 0===t.offsetTop;)t=t.parentNode;for(e=t.offsetTop;t=t.offsetParent;)e+=t.offsetTop;return e},r.prototype.isVisible=function(t){var e,n,i,r,s;return n=t.getAttribute("data-wow-offset")||this.config.offset,r=(s=this.config.scrollContainer&&this.config.scrollContainer.scrollTop||window.pageYOffset)+Math.min(this.element.clientHeight,this.util().innerHeight())-n,e=(i=this.offsetTop(t))+t.clientHeight,i<=r&&e>=s},r.prototype.util=function(){return null!=this._util?this._util:this._util=new e},r.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},r}()}).call(this)}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,n),s.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},function(){"use strict";var t={};n.r(t),n.d(t,{afterMain:function(){return k},afterRead:function(){return y},afterWrite:function(){return C},applyStyles:function(){return N},arrow:function(){return Q},auto:function(){return o},basePlacements:function(){return a},beforeMain:function(){return b},beforeRead:function(){return g},beforeWrite:function(){return x},bottom:function(){return i},clippingParents:function(){return u},computeStyles:function(){return et},createPopper:function(){return Nt},createPopperBase:function(){return At},createPopperLite:function(){return Dt},detectOverflow:function(){return vt},end:function(){return c},eventListeners:function(){return it},flip:function(){return yt},hide:function(){return kt},left:function(){return s},main:function(){return w},modifierPhases:function(){return _},offset:function(){return xt},placements:function(){return m},popper:function(){return h},popperGenerator:function(){return Et},popperOffsets:function(){return St},preventOverflow:function(){return Ct},read:function(){return v},reference:function(){return p},right:function(){return r},start:function(){return l},top:function(){return e},variationPlacements:function(){return f},viewport:function(){return d},write:function(){return S}});var e="top",i="bottom",r="right",s="left",o="auto",a=[e,i,r,s],l="start",c="end",u="clippingParents",d="viewport",h="popper",p="reference",f=a.reduce((function(t,e){return t.concat([e+"-"+l,e+"-"+c])}),[]),m=[].concat(a,[o]).reduce((function(t,e){return t.concat([e,e+"-"+l,e+"-"+c])}),[]),g="beforeRead",v="read",y="afterRead",b="beforeMain",w="main",k="afterMain",x="beforeWrite",S="write",C="afterWrite",_=[g,v,y,b,w,k,x,S,C];function T(t){return t?(t.nodeName||"").toLowerCase():null}function M(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function O(t){return t instanceof M(t).Element||t instanceof Element}function E(t){return t instanceof M(t).HTMLElement||t instanceof HTMLElement}function A(t){return"undefined"!=typeof ShadowRoot&&(t instanceof M(t).ShadowRoot||t instanceof ShadowRoot)}var N={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},r=e.elements[t];E(r)&&T(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],r=e.attributes[t]||{},s=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});E(i)&&T(i)&&(Object.assign(i.style,s),Object.keys(r).forEach((function(t){i.removeAttribute(t)})))}))}},requires:["computeStyles"]};function D(t){return t.split("-")[0]}var L=Math.max,I=Math.min,P=Math.round;function B(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function j(){return!/^((?!chrome|android).)*safari/i.test(B())}function F(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=t.getBoundingClientRect(),r=1,s=1;e&&E(t)&&(r=t.offsetWidth>0&&P(i.width)/t.offsetWidth||1,s=t.offsetHeight>0&&P(i.height)/t.offsetHeight||1);var o=(O(t)?M(t):window).visualViewport,a=!j()&&n,l=(i.left+(a&&o?o.offsetLeft:0))/r,c=(i.top+(a&&o?o.offsetTop:0))/s,u=i.width/r,d=i.height/s;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function R(t){var e=F(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function $(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&A(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function V(t){return M(t).getComputedStyle(t)}function z(t){return["table","td","th"].indexOf(T(t))>=0}function H(t){return((O(t)?t.ownerDocument:t.document)||window.document).documentElement}function q(t){return"html"===T(t)?t:t.assignedSlot||t.parentNode||(A(t)?t.host:null)||H(t)}function K(t){return E(t)&&"fixed"!==V(t).position?t.offsetParent:null}function W(t){for(var e=M(t),n=K(t);n&&z(n)&&"static"===V(n).position;)n=K(n);return n&&("html"===T(n)||"body"===T(n)&&"static"===V(n).position)?e:n||function(t){var e=/firefox/i.test(B());if(/Trident/i.test(B())&&E(t)&&"fixed"===V(t).position)return null;var n=q(t);for(A(n)&&(n=n.host);E(n)&&["html","body"].indexOf(T(n))<0;){var i=V(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||e&&"filter"===i.willChange||e&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(t)||e}function U(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function G(t,e,n){return L(t,I(e,n))}function J(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function Y(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}var Q={name:"arrow",enabled:!0,phase:"main",fn:function(t){var n,o=t.state,l=t.name,c=t.options,u=o.elements.arrow,d=o.modifiersData.popperOffsets,h=D(o.placement),p=U(h),f=[s,r].indexOf(h)>=0?"height":"width";if(u&&d){var m=function(t,e){return J("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:Y(t,a))}(c.padding,o),g=R(u),v="y"===p?e:s,y="y"===p?i:r,b=o.rects.reference[f]+o.rects.reference[p]-d[p]-o.rects.popper[f],w=d[p]-o.rects.reference[p],k=W(u),x=k?"y"===p?k.clientHeight||0:k.clientWidth||0:0,S=b/2-w/2,C=m[v],_=x-g[f]-m[y],T=x/2-g[f]/2+S,M=G(C,T,_),O=p;o.modifiersData[l]=((n={})[O]=M,n.centerOffset=M-T,n)}},effect:function(t){var e=t.state,n=t.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=e.elements.popper.querySelector(i)))&&$(e.elements.popper,i)&&(e.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function X(t){return t.split("-")[1]}var Z={top:"auto",right:"auto",bottom:"auto",left:"auto"};function tt(t){var n,o=t.popper,a=t.popperRect,l=t.placement,u=t.variation,d=t.offsets,h=t.position,p=t.gpuAcceleration,f=t.adaptive,m=t.roundOffsets,g=t.isFixed,v=d.x,y=void 0===v?0:v,b=d.y,w=void 0===b?0:b,k="function"==typeof m?m({x:y,y:w}):{x:y,y:w};y=k.x,w=k.y;var x=d.hasOwnProperty("x"),S=d.hasOwnProperty("y"),C=s,_=e,T=window;if(f){var O=W(o),E="clientHeight",A="clientWidth";if(O===M(o)&&"static"!==V(O=H(o)).position&&"absolute"===h&&(E="scrollHeight",A="scrollWidth"),l===e||(l===s||l===r)&&u===c)_=i,w-=(g&&O===T&&T.visualViewport?T.visualViewport.height:O[E])-a.height,w*=p?1:-1;if(l===s||(l===e||l===i)&&u===c)C=r,y-=(g&&O===T&&T.visualViewport?T.visualViewport.width:O[A])-a.width,y*=p?1:-1}var N,D=Object.assign({position:h},f&&Z),L=!0===m?function(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:P(n*r)/r||0,y:P(i*r)/r||0}}({x:y,y:w},M(o)):{x:y,y:w};return y=L.x,w=L.y,p?Object.assign({},D,((N={})[_]=S?"0":"",N[C]=x?"0":"",N.transform=(T.devicePixelRatio||1)<=1?"translate("+y+"px, "+w+"px)":"translate3d("+y+"px, "+w+"px, 0)",N)):Object.assign({},D,((n={})[_]=S?w+"px":"",n[C]=x?y+"px":"",n.transform="",n))}var et={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=void 0===i||i,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,l=void 0===a||a,c={placement:D(e.placement),variation:X(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,tt(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,tt(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},nt={passive:!0};var it={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=void 0===r||r,o=i.resize,a=void 0===o||o,l=M(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach((function(t){t.addEventListener("scroll",n.update,nt)})),a&&l.addEventListener("resize",n.update,nt),function(){s&&c.forEach((function(t){t.removeEventListener("scroll",n.update,nt)})),a&&l.removeEventListener("resize",n.update,nt)}},data:{}},rt={left:"right",right:"left",bottom:"top",top:"bottom"};function st(t){return t.replace(/left|right|bottom|top/g,(function(t){return rt[t]}))}var ot={start:"end",end:"start"};function at(t){return t.replace(/start|end/g,(function(t){return ot[t]}))}function lt(t){var e=M(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function ct(t){return F(H(t)).left+lt(t).scrollLeft}function ut(t){var e=V(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function dt(t){return["html","body","#document"].indexOf(T(t))>=0?t.ownerDocument.body:E(t)&&ut(t)?t:dt(q(t))}function ht(t,e){var n;void 0===e&&(e=[]);var i=dt(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),s=M(i),o=r?[s].concat(s.visualViewport||[],ut(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(ht(q(o)))}function pt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function ft(t,e,n){return e===d?pt(function(t,e){var n=M(t),i=H(t),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=j();(c||!c&&"fixed"===e)&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+ct(t),y:l}}(t,n)):O(e)?function(t,e){var n=F(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):pt(function(t){var e,n=H(t),i=lt(t),r=null==(e=t.ownerDocument)?void 0:e.body,s=L(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=L(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+ct(t),l=-i.scrollTop;return"rtl"===V(r||n).direction&&(a+=L(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}(H(t)))}function mt(t,e,n,i){var r="clippingParents"===e?function(t){var e=ht(q(t)),n=["absolute","fixed"].indexOf(V(t).position)>=0&&E(t)?W(t):t;return O(n)?e.filter((function(t){return O(t)&&$(t,n)&&"body"!==T(t)})):[]}(t):[].concat(e),s=[].concat(r,[n]),o=s[0],a=s.reduce((function(e,n){var r=ft(t,n,i);return e.top=L(r.top,e.top),e.right=I(r.right,e.right),e.bottom=I(r.bottom,e.bottom),e.left=L(r.left,e.left),e}),ft(t,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function gt(t){var n,o=t.reference,a=t.element,u=t.placement,d=u?D(u):null,h=u?X(u):null,p=o.x+o.width/2-a.width/2,f=o.y+o.height/2-a.height/2;switch(d){case e:n={x:p,y:o.y-a.height};break;case i:n={x:p,y:o.y+o.height};break;case r:n={x:o.x+o.width,y:f};break;case s:n={x:o.x-a.width,y:f};break;default:n={x:o.x,y:o.y}}var m=d?U(d):null;if(null!=m){var g="y"===m?"height":"width";switch(h){case l:n[m]=n[m]-(o[g]/2-a[g]/2);break;case c:n[m]=n[m]+(o[g]/2-a[g]/2)}}return n}function vt(t,n){void 0===n&&(n={});var s=n,o=s.placement,l=void 0===o?t.placement:o,c=s.strategy,f=void 0===c?t.strategy:c,m=s.boundary,g=void 0===m?u:m,v=s.rootBoundary,y=void 0===v?d:v,b=s.elementContext,w=void 0===b?h:b,k=s.altBoundary,x=void 0!==k&&k,S=s.padding,C=void 0===S?0:S,_=J("number"!=typeof C?C:Y(C,a)),T=w===h?p:h,M=t.rects.popper,E=t.elements[x?T:w],A=mt(O(E)?E:E.contextElement||H(t.elements.popper),g,y,f),N=F(t.elements.reference),D=gt({reference:N,element:M,strategy:"absolute",placement:l}),L=pt(Object.assign({},M,D)),I=w===h?L:N,P={top:A.top-I.top+_.top,bottom:I.bottom-A.bottom+_.bottom,left:A.left-I.left+_.left,right:I.right-A.right+_.right},B=t.modifiersData.offset;if(w===h&&B){var j=B[l];Object.keys(P).forEach((function(t){var n=[r,i].indexOf(t)>=0?1:-1,s=[e,i].indexOf(t)>=0?"y":"x";P[t]+=j[s]*n}))}return P}var yt={name:"flip",enabled:!0,phase:"main",fn:function(t){var n=t.state,c=t.options,u=t.name;if(!n.modifiersData[u]._skip){for(var d=c.mainAxis,h=void 0===d||d,p=c.altAxis,g=void 0===p||p,v=c.fallbackPlacements,y=c.padding,b=c.boundary,w=c.rootBoundary,k=c.altBoundary,x=c.flipVariations,S=void 0===x||x,C=c.allowedAutoPlacements,_=n.options.placement,T=D(_),M=v||(T===_||!S?[st(_)]:function(t){if(D(t)===o)return[];var e=st(t);return[at(t),e,at(e)]}(_)),O=[_].concat(M).reduce((function(t,e){return t.concat(D(e)===o?function(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,l=n.flipVariations,c=n.allowedAutoPlacements,u=void 0===c?m:c,d=X(i),h=d?l?f:f.filter((function(t){return X(t)===d})):a,p=h.filter((function(t){return u.indexOf(t)>=0}));0===p.length&&(p=h);var g=p.reduce((function(e,n){return e[n]=vt(t,{placement:n,boundary:r,rootBoundary:s,padding:o})[D(n)],e}),{});return Object.keys(g).sort((function(t,e){return g[t]-g[e]}))}(n,{placement:e,boundary:b,rootBoundary:w,padding:y,flipVariations:S,allowedAutoPlacements:C}):e)}),[]),E=n.rects.reference,A=n.rects.popper,N=new Map,L=!0,I=O[0],P=0;P<O.length;P++){var B=O[P],j=D(B),F=X(B)===l,R=[e,i].indexOf(j)>=0,$=R?"width":"height",V=vt(n,{placement:B,boundary:b,rootBoundary:w,altBoundary:k,padding:y}),z=R?F?r:s:F?i:e;E[$]>A[$]&&(z=st(z));var H=st(z),q=[];if(h&&q.push(V[j]<=0),g&&q.push(V[z]<=0,V[H]<=0),q.every((function(t){return t}))){I=B,L=!1;break}N.set(B,q)}if(L)for(var K=function(t){var e=O.find((function(e){var n=N.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return I=e,"break"},W=S?3:1;W>0;W--){if("break"===K(W))break}n.placement!==I&&(n.modifiersData[u]._skip=!0,n.placement=I,n.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function bt(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function wt(t){return[e,r,i,s].some((function(e){return t[e]>=0}))}var kt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=vt(e,{elementContext:"reference"}),a=vt(e,{altBoundary:!0}),l=bt(o,i),c=bt(a,r,s),u=wt(l),d=wt(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}};var xt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var n=t.state,i=t.options,o=t.name,a=i.offset,l=void 0===a?[0,0]:a,c=m.reduce((function(t,i){return t[i]=function(t,n,i){var o=D(t),a=[s,e].indexOf(o)>=0?-1:1,l="function"==typeof i?i(Object.assign({},n,{placement:t})):i,c=l[0],u=l[1];return c=c||0,u=(u||0)*a,[s,r].indexOf(o)>=0?{x:u,y:c}:{x:c,y:u}}(i,n.rects,l),t}),{}),u=c[n.placement],d=u.x,h=u.y;null!=n.modifiersData.popperOffsets&&(n.modifiersData.popperOffsets.x+=d,n.modifiersData.popperOffsets.y+=h),n.modifiersData[o]=c}};var St={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=gt({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};var Ct={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var n=t.state,o=t.options,a=t.name,c=o.mainAxis,u=void 0===c||c,d=o.altAxis,h=void 0!==d&&d,p=o.boundary,f=o.rootBoundary,m=o.altBoundary,g=o.padding,v=o.tether,y=void 0===v||v,b=o.tetherOffset,w=void 0===b?0:b,k=vt(n,{boundary:p,rootBoundary:f,padding:g,altBoundary:m}),x=D(n.placement),S=X(n.placement),C=!S,_=U(x),T="x"===_?"y":"x",M=n.modifiersData.popperOffsets,O=n.rects.reference,E=n.rects.popper,A="function"==typeof w?w(Object.assign({},n.rects,{placement:n.placement})):w,N="number"==typeof A?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),P=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,B={x:0,y:0};if(M){if(u){var j,F="y"===_?e:s,$="y"===_?i:r,V="y"===_?"height":"width",z=M[_],H=z+k[F],q=z-k[$],K=y?-E[V]/2:0,J=S===l?O[V]:E[V],Y=S===l?-E[V]:-O[V],Q=n.elements.arrow,Z=y&&Q?R(Q):{width:0,height:0},tt=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},et=tt[F],nt=tt[$],it=G(0,O[V],Z[V]),rt=C?O[V]/2-K-it-et-N.mainAxis:J-it-et-N.mainAxis,st=C?-O[V]/2+K+it+nt+N.mainAxis:Y+it+nt+N.mainAxis,ot=n.elements.arrow&&W(n.elements.arrow),at=ot?"y"===_?ot.clientTop||0:ot.clientLeft||0:0,lt=null!=(j=null==P?void 0:P[_])?j:0,ct=z+st-lt,ut=G(y?I(H,z+rt-lt-at):H,z,y?L(q,ct):q);M[_]=ut,B[_]=ut-z}if(h){var dt,ht="x"===_?e:s,pt="x"===_?i:r,ft=M[T],mt="y"===T?"height":"width",gt=ft+k[ht],yt=ft-k[pt],bt=-1!==[e,s].indexOf(x),wt=null!=(dt=null==P?void 0:P[T])?dt:0,kt=bt?gt:ft-O[mt]-E[mt]-wt+N.altAxis,xt=bt?ft+O[mt]+E[mt]-wt-N.altAxis:yt,St=y&&bt?function(t,e,n){var i=G(t,e,n);return i>n?n:i}(kt,ft,xt):G(y?kt:gt,ft,y?xt:yt);M[T]=St,B[T]=St-ft}n.modifiersData[a]=B}},requiresIfExists:["offset"]};function _t(t,e,n){void 0===n&&(n=!1);var i,r,s=E(e),o=E(e)&&function(t){var e=t.getBoundingClientRect(),n=P(e.width)/t.offsetWidth||1,i=P(e.height)/t.offsetHeight||1;return 1!==n||1!==i}(e),a=H(e),l=F(t,o,n),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(s||!s&&!n)&&(("body"!==T(e)||ut(a))&&(c=(i=e)!==M(i)&&E(i)?{scrollLeft:(r=i).scrollLeft,scrollTop:r.scrollTop}:lt(i)),E(e)?((u=F(e,!0)).x+=e.clientLeft,u.y+=e.clientTop):a&&(u.x=ct(a))),{x:l.left+c.scrollLeft-u.x,y:l.top+c.scrollTop-u.y,width:l.width,height:l.height}}function Tt(t){var e=new Map,n=new Set,i=[];function r(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var i=e.get(t);i&&r(i)}})),i.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||r(t)})),i}var Mt={placement:"bottom",modifiers:[],strategy:"absolute"};function Ot(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function Et(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,r=e.defaultOptions,s=void 0===r?Mt:r;return function(t,e,n){void 0===n&&(n=s);var r,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Mt,s),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},l=[],c=!1,u={state:a,setOptions:function(n){var r="function"==typeof n?n(a.options):n;d(),a.options=Object.assign({},s,a.options,r),a.scrollParents={reference:O(t)?ht(t):t.contextElement?ht(t.contextElement):[],popper:ht(e)};var o=function(t){var e=Tt(t);return _.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}(function(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}([].concat(i,a.options.modifiers)));return a.orderedModifiers=o.filter((function(t){return t.enabled})),a.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,r=t.effect;if("function"==typeof r){var s=r({state:a,name:e,instance:u,options:i}),o=function(){};l.push(s||o)}})),u.update()},forceUpdate:function(){if(!c){var t=a.elements,e=t.reference,n=t.popper;if(Ot(e,n)){a.rects={reference:_t(e,W(n),"fixed"===a.options.strategy),popper:R(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(t){return a.modifiersData[t.name]=Object.assign({},t.data)}));for(var i=0;i<a.orderedModifiers.length;i++)if(!0!==a.reset){var r=a.orderedModifiers[i],s=r.fn,o=r.options,l=void 0===o?{}:o,d=r.name;"function"==typeof s&&(a=s({state:a,options:l,name:d,instance:u})||a)}else a.reset=!1,i=-1}}},update:(r=function(){return new Promise((function(t){u.forceUpdate(),t(a)}))},function(){return o||(o=new Promise((function(t){Promise.resolve().then((function(){o=void 0,t(r())}))}))),o}),destroy:function(){d(),c=!0}};if(!Ot(t,e))return u;function d(){l.forEach((function(t){return t()})),l=[]}return u.setOptions(n).then((function(t){!c&&n.onFirstUpdate&&n.onFirstUpdate(t)})),u}}var At=Et(),Nt=Et({defaultModifiers:[it,St,et,N,xt,yt,Ct,Q,kt]}),Dt=Et({defaultModifiers:[it,St,et,N]});
/*!
  * Bootstrap v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
const Lt=new Map,It={set(t,e,n){Lt.has(t)||Lt.set(t,new Map);const i=Lt.get(t);i.has(e)||0===i.size?i.set(e,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get(t,e){return Lt.has(t)&&Lt.get(t).get(e)||null},remove(t,e){if(!Lt.has(t))return;const n=Lt.get(t);n.delete(e),0===n.size&&Lt.delete(t)}},Pt="transitionend",Bt=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,((t,e)=>`#${CSS.escape(e)}`))),t),jt=t=>{t.dispatchEvent(new Event(Pt))},Ft=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),Rt=t=>Ft(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(Bt(t)):null,$t=t=>{if(!Ft(t)||0===t.getClientRects().length)return!1;const e="visible"===getComputedStyle(t).getPropertyValue("visibility"),n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const e=t.closest("summary");if(e&&e.parentNode!==n)return!1;if(null===e)return!1}return e},Vt=t=>!t||t.nodeType!==Node.ELEMENT_NODE||(!!t.classList.contains("disabled")||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled"))),zt=t=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?zt(t.parentNode):null},Ht=()=>{},qt=t=>{t.offsetHeight},Kt=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Wt=[],Ut=()=>"rtl"===document.documentElement.dir,Gt=t=>{var e;e=()=>{const e=Kt();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}},"loading"===document.readyState?(Wt.length||document.addEventListener("DOMContentLoaded",(()=>{for(const t of Wt)t()})),Wt.push(e)):e()},Jt=(t,e=[],n=t)=>"function"==typeof t?t(...e):n,Yt=(t,e,n=!0)=>{if(!n)return void Jt(t);const i=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),r=Number.parseFloat(n);return i||r?(e=e.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(n))):0})(e)+5;let r=!1;const s=({target:n})=>{n===e&&(r=!0,e.removeEventListener(Pt,s),Jt(t))};e.addEventListener(Pt,s),setTimeout((()=>{r||jt(e)}),i)},Qt=(t,e,n,i)=>{const r=t.length;let s=t.indexOf(e);return-1===s?!n&&i?t[r-1]:t[0]:(s+=n?1:-1,i&&(s=(s+r)%r),t[Math.max(0,Math.min(s,r-1))])},Xt=/[^.]*(?=\..*)\.|.*/,Zt=/\..*/,te=/::\d+$/,ee={};let ne=1;const ie={mouseenter:"mouseover",mouseleave:"mouseout"},re=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function se(t,e){return e&&`${e}::${ne++}`||t.uidEvent||ne++}function oe(t){const e=se(t);return t.uidEvent=e,ee[e]=ee[e]||{},ee[e]}function ae(t,e,n=null){return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===n))}function le(t,e,n){const i="string"==typeof e,r=i?n:e||n;let s=he(t);return re.has(s)||(s=t),[i,r,s]}function ce(t,e,n,i,r){if("string"!=typeof e||!t)return;let[s,o,a]=le(e,n,i);if(e in ie){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};o=t(o)}const l=oe(t),c=l[a]||(l[a]={}),u=ae(c,o,s?n:null);if(u)return void(u.oneOff=u.oneOff&&r);const d=se(o,e.replace(Xt,"")),h=s?function(t,e,n){return function i(r){const s=t.querySelectorAll(e);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(const a of s)if(a===o)return fe(r,{delegateTarget:o}),i.oneOff&&pe.off(t,r.type,e,n),n.apply(o,[r])}}(t,n,o):function(t,e){return function n(i){return fe(i,{delegateTarget:t}),n.oneOff&&pe.off(t,i.type,e),e.apply(t,[i])}}(t,o);h.delegationSelector=s?n:null,h.callable=o,h.oneOff=r,h.uidEvent=d,c[d]=h,t.addEventListener(a,h,s)}function ue(t,e,n,i,r){const s=ae(e[n],i,r);s&&(t.removeEventListener(n,s,Boolean(r)),delete e[n][s.uidEvent])}function de(t,e,n,i){const r=e[n]||{};for(const[s,o]of Object.entries(r))s.includes(i)&&ue(t,e,n,o.callable,o.delegationSelector)}function he(t){return t=t.replace(Zt,""),ie[t]||t}const pe={on(t,e,n,i){ce(t,e,n,i,!1)},one(t,e,n,i){ce(t,e,n,i,!0)},off(t,e,n,i){if("string"!=typeof e||!t)return;const[r,s,o]=le(e,n,i),a=o!==e,l=oe(t),c=l[o]||{},u=e.startsWith(".");if(void 0===s){if(u)for(const n of Object.keys(l))de(t,l,n,e.slice(1));for(const[n,i]of Object.entries(c)){const r=n.replace(te,"");a&&!e.includes(r)||ue(t,l,o,i.callable,i.delegationSelector)}}else{if(!Object.keys(c).length)return;ue(t,l,o,s,r?n:null)}},trigger(t,e,n){if("string"!=typeof e||!t)return null;const i=Kt();let r=null,s=!0,o=!0,a=!1;e!==he(e)&&i&&(r=i.Event(e,n),i(t).trigger(r),s=!r.isPropagationStopped(),o=!r.isImmediatePropagationStopped(),a=r.isDefaultPrevented());const l=fe(new Event(e,{bubbles:s,cancelable:!0}),n);return a&&l.preventDefault(),o&&t.dispatchEvent(l),l.defaultPrevented&&r&&r.preventDefault(),l}};function fe(t,e={}){for(const[n,i]of Object.entries(e))try{t[n]=i}catch(e){Object.defineProperty(t,n,{configurable:!0,get(){return i}})}return t}function me(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!=typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function ge(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const ve={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${ge(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${ge(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter((t=>t.startsWith("bs")&&!t.startsWith("bsConfig")));for(const i of n){let n=i.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),e[n]=me(t.dataset[i])}return e},getDataAttribute(t,e){return me(t.getAttribute(`data-bs-${ge(e)}`))}};class ye{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=Ft(e)?ve.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"==typeof n?n:{},...Ft(e)?ve.getDataAttributes(e):{},..."object"==typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[i,r]of Object.entries(e)){const e=t[i],s=Ft(e)?"element":null==(n=e)?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(r).test(s))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${s}" but expected type "${r}".`)}var n}}class be extends ye{constructor(t,e){super(),(t=Rt(t))&&(this._element=t,this._config=this._getConfig(e),It.set(this._element,this.constructor.DATA_KEY,this))}dispose(){It.remove(this._element,this.constructor.DATA_KEY),pe.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,n=!0){Yt(t,e,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return It.get(Rt(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.3.2"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const we=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&"#"!==n?Bt(n.trim()):null}return e},ke={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter((t=>t.matches(e)))},parents(t,e){const n=[];let i=t.parentNode.closest(e);for(;i;)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(",");return this.find(e,t).filter((t=>!Vt(t)&&$t(t)))},getSelectorFromElement(t){const e=we(t);return e&&ke.findOne(e)?e:null},getElementFromSelector(t){const e=we(t);return e?ke.findOne(e):null},getMultipleElementsFromSelector(t){const e=we(t);return e?ke.find(e):[]}},xe=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;pe.on(document,n,`[data-bs-dismiss="${i}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),Vt(this))return;const r=ke.getElementFromSelector(this)||this.closest(`.${i}`);t.getOrCreateInstance(r)[e]()}))},Se=".bs.alert",Ce=`close${Se}`,_e=`closed${Se}`;class Te extends be{static get NAME(){return"alert"}close(){if(pe.trigger(this._element,Ce).defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),pe.trigger(this._element,_e),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=Te.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}xe(Te,"close"),Gt(Te);const Me='[data-bs-toggle="button"]';class Oe extends be{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each((function(){const e=Oe.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}pe.on(document,"click.bs.button.data-api",Me,(t=>{t.preventDefault();const e=t.target.closest(Me);Oe.getOrCreateInstance(e).toggle()})),Gt(Oe);const Ee=".bs.swipe",Ae=`touchstart${Ee}`,Ne=`touchmove${Ee}`,De=`touchend${Ee}`,Le=`pointerdown${Ee}`,Ie=`pointerup${Ee}`,Pe={endCallback:null,leftCallback:null,rightCallback:null},Be={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class je extends ye{constructor(t,e){super(),this._element=t,t&&je.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Pe}static get DefaultType(){return Be}static get NAME(){return"swipe"}dispose(){pe.off(this._element,Ee)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Jt(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=40)return;const e=t/this._deltaX;this._deltaX=0,e&&Jt(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(pe.on(this._element,Le,(t=>this._start(t))),pe.on(this._element,Ie,(t=>this._end(t))),this._element.classList.add("pointer-event")):(pe.on(this._element,Ae,(t=>this._start(t))),pe.on(this._element,Ne,(t=>this._move(t))),pe.on(this._element,De,(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&("pen"===t.pointerType||"touch"===t.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Fe=".bs.carousel",Re=".data-api",$e="next",Ve="prev",ze="left",He="right",qe=`slide${Fe}`,Ke=`slid${Fe}`,We=`keydown${Fe}`,Ue=`mouseenter${Fe}`,Ge=`mouseleave${Fe}`,Je=`dragstart${Fe}`,Ye=`load${Fe}${Re}`,Qe=`click${Fe}${Re}`,Xe="carousel",Ze="active",tn=".active",en=".carousel-item",nn=tn+en,rn={ArrowLeft:He,ArrowRight:ze},sn={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},on={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class an extends be{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ke.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Xe&&this.cycle()}static get Default(){return sn}static get DefaultType(){return on}static get NAME(){return"carousel"}next(){this._slide($e)}nextWhenVisible(){!document.hidden&&$t(this._element)&&this.next()}prev(){this._slide(Ve)}pause(){this._isSliding&&jt(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?pe.one(this._element,Ke,(()=>this.cycle())):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void pe.one(this._element,Ke,(()=>this.to(t)));const n=this._getItemIndex(this._getActive());if(n===t)return;const i=t>n?$e:Ve;this._slide(i,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&pe.on(this._element,We,(t=>this._keydown(t))),"hover"===this._config.pause&&(pe.on(this._element,Ue,(()=>this.pause())),pe.on(this._element,Ge,(()=>this._maybeEnableCycle()))),this._config.touch&&je.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of ke.find(".carousel-item img",this._element))pe.on(t,Je,(t=>t.preventDefault()));const t={leftCallback:()=>this._slide(this._directionToOrder(ze)),rightCallback:()=>this._slide(this._directionToOrder(He)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new je(this._element,t)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=rn[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=ke.findOne(tn,this._indicatorsElement);e.classList.remove(Ze),e.removeAttribute("aria-current");const n=ke.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(Ze),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const n=this._getActive(),i=t===$e,r=e||Qt(this._getItems(),n,i,this._config.wrap);if(r===n)return;const s=this._getItemIndex(r),o=e=>pe.trigger(this._element,e,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:s});if(o(qe).defaultPrevented)return;if(!n||!r)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(s),this._activeElement=r;const l=i?"carousel-item-start":"carousel-item-end",c=i?"carousel-item-next":"carousel-item-prev";r.classList.add(c),qt(r),n.classList.add(l),r.classList.add(l);this._queueCallback((()=>{r.classList.remove(l,c),r.classList.add(Ze),n.classList.remove(Ze,c,l),this._isSliding=!1,o(Ke)}),n,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return ke.findOne(nn,this._element)}_getItems(){return ke.find(en,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return Ut()?t===ze?Ve:$e:t===ze?$e:Ve}_orderToDirection(t){return Ut()?t===Ve?ze:He:t===Ve?He:ze}static jQueryInterface(t){return this.each((function(){const e=an.getOrCreateInstance(this,t);if("number"!=typeof t){if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}else e.to(t)}))}}pe.on(document,Qe,"[data-bs-slide], [data-bs-slide-to]",(function(t){const e=ke.getElementFromSelector(this);if(!e||!e.classList.contains(Xe))return;t.preventDefault();const n=an.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");return i?(n.to(i),void n._maybeEnableCycle()):"next"===ve.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),pe.on(window,Ye,(()=>{const t=ke.find('[data-bs-ride="carousel"]');for(const e of t)an.getOrCreateInstance(e)})),Gt(an);const ln=".bs.collapse",cn=`show${ln}`,un=`shown${ln}`,dn=`hide${ln}`,hn=`hidden${ln}`,pn=`click${ln}.data-api`,fn="show",mn="collapse",gn="collapsing",vn=`:scope .${mn} .${mn}`,yn='[data-bs-toggle="collapse"]',bn={parent:null,toggle:!0},wn={parent:"(null|element)",toggle:"boolean"};class kn extends be{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const n=ke.find(yn);for(const t of n){const e=ke.getSelectorFromElement(t),n=ke.find(e).filter((t=>t===this._element));null!==e&&n.length&&this._triggerArray.push(t)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return bn}static get DefaultType(){return wn}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((t=>t!==this._element)).map((t=>kn.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;if(pe.trigger(this._element,cn).defaultPrevented)return;for(const e of t)e.hide();const e=this._getDimension();this._element.classList.remove(mn),this._element.classList.add(gn),this._element.style[e]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n=`scroll${e[0].toUpperCase()+e.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(gn),this._element.classList.add(mn,fn),this._element.style[e]="",pe.trigger(this._element,un)}),this._element,!0),this._element.style[e]=`${this._element[n]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(pe.trigger(this._element,dn).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,qt(this._element),this._element.classList.add(gn),this._element.classList.remove(mn,fn);for(const t of this._triggerArray){const e=ke.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0;this._element.style[t]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(gn),this._element.classList.add(mn),pe.trigger(this._element,hn)}),this._element,!0)}_isShown(t=this._element){return t.classList.contains(fn)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=Rt(t.parent),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(yn);for(const e of t){const t=ke.getElementFromSelector(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=ke.find(vn,this._config.parent);return ke.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const n of t)n.classList.toggle("collapsed",!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const n=kn.getOrCreateInstance(this,e);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}))}}pe.on(document,pn,yn,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();for(const t of ke.getMultipleElementsFromSelector(this))kn.getOrCreateInstance(t,{toggle:!1}).toggle()})),Gt(kn);const xn="dropdown",Sn=".bs.dropdown",Cn=".data-api",_n="ArrowUp",Tn="ArrowDown",Mn=`hide${Sn}`,On=`hidden${Sn}`,En=`show${Sn}`,An=`shown${Sn}`,Nn=`click${Sn}${Cn}`,Dn=`keydown${Sn}${Cn}`,Ln=`keyup${Sn}${Cn}`,In="show",Pn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Bn=`${Pn}.${In}`,jn=".dropdown-menu",Fn=Ut()?"top-end":"top-start",Rn=Ut()?"top-start":"top-end",$n=Ut()?"bottom-end":"bottom-start",Vn=Ut()?"bottom-start":"bottom-end",zn=Ut()?"left-start":"right-start",Hn=Ut()?"right-start":"left-start",qn={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Kn={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Wn extends be{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=ke.next(this._element,jn)[0]||ke.prev(this._element,jn)[0]||ke.findOne(jn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return qn}static get DefaultType(){return Kn}static get NAME(){return xn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Vt(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!pe.trigger(this._element,En,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const t of[].concat(...document.body.children))pe.on(t,"mouseover",Ht);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(In),this._element.classList.add(In),pe.trigger(this._element,An,t)}}hide(){if(Vt(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!pe.trigger(this._element,Mn,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))pe.off(t,"mouseover",Ht);this._popper&&this._popper.destroy(),this._menu.classList.remove(In),this._element.classList.remove(In),this._element.setAttribute("aria-expanded","false"),ve.removeDataAttribute(this._menu,"popper"),pe.trigger(this._element,On,t)}}_getConfig(t){if("object"==typeof(t=super._getConfig(t)).reference&&!Ft(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${xn.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(void 0===t)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=this._parent:Ft(this._config.reference)?e=Rt(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=Nt(e,this._menu,n)}_isShown(){return this._menu.classList.contains(In)}_getPlacement(){const t=this._parent;if(t.classList.contains("dropend"))return zn;if(t.classList.contains("dropstart"))return Hn;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?Rn:Fn:e?Vn:$n}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(ve.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Jt(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const n=ke.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((t=>$t(t)));n.length&&Qt(n,e,t===Tn,!n.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=Wn.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(2===t.button||"keyup"===t.type&&"Tab"!==t.key)return;const e=ke.find(Bn);for(const n of e){const e=Wn.getInstance(n);if(!e||!1===e._config.autoClose)continue;const i=t.composedPath(),r=i.includes(e._menu);if(i.includes(e._element)||"inside"===e._config.autoClose&&!r||"outside"===e._config.autoClose&&r)continue;if(e._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const s={relatedTarget:e._element};"click"===t.type&&(s.clickEvent=t),e._completeHide(s)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),n="Escape"===t.key,i=[_n,Tn].includes(t.key);if(!i&&!n)return;if(e&&!n)return;t.preventDefault();const r=this.matches(Pn)?this:ke.prev(this,Pn)[0]||ke.next(this,Pn)[0]||ke.findOne(Pn,t.delegateTarget.parentNode),s=Wn.getOrCreateInstance(r);if(i)return t.stopPropagation(),s.show(),void s._selectMenuItem(t);s._isShown()&&(t.stopPropagation(),s.hide(),r.focus())}}pe.on(document,Dn,Pn,Wn.dataApiKeydownHandler),pe.on(document,Dn,jn,Wn.dataApiKeydownHandler),pe.on(document,Nn,Wn.clearMenus),pe.on(document,Ln,Wn.clearMenus),pe.on(document,Nn,Pn,(function(t){t.preventDefault(),Wn.getOrCreateInstance(this).toggle()})),Gt(Wn);const Un="backdrop",Gn="show",Jn=`mousedown.bs.${Un}`,Yn={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Qn={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Xn extends ye{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Yn}static get DefaultType(){return Qn}static get NAME(){return Un}show(t){if(!this._config.isVisible)return void Jt(t);this._append();const e=this._getElement();this._config.isAnimated&&qt(e),e.classList.add(Gn),this._emulateAnimation((()=>{Jt(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(Gn),this._emulateAnimation((()=>{this.dispose(),Jt(t)}))):Jt(t)}dispose(){this._isAppended&&(pe.off(this._element,Jn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Rt(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),pe.on(t,Jn,(()=>{Jt(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){Yt(t,this._getElement(),this._config.isAnimated)}}const Zn=".bs.focustrap",ti=`focusin${Zn}`,ei=`keydown.tab${Zn}`,ni="backward",ii={autofocus:!0,trapElement:null},ri={autofocus:"boolean",trapElement:"element"};class si extends ye{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ii}static get DefaultType(){return ri}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),pe.off(document,Zn),pe.on(document,ti,(t=>this._handleFocusin(t))),pe.on(document,ei,(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,pe.off(document,Zn))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const n=ke.focusableChildren(e);0===n.length?e.focus():this._lastTabNavDirection===ni?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?ni:"forward")}}const oi=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ai=".sticky-top",li="padding-right",ci="margin-right";class ui{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,li,(e=>e+t)),this._setElementAttributes(oi,li,(e=>e+t)),this._setElementAttributes(ai,ci,(e=>e-t))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,li),this._resetElementAttributes(oi,li),this._resetElementAttributes(ai,ci)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const i=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+i)return;this._saveInitialAttribute(t,e);const r=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${n(Number.parseFloat(r))}px`)}))}_saveInitialAttribute(t,e){const n=t.style.getPropertyValue(e);n&&ve.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const n=ve.getDataAttribute(t,e);null!==n?(ve.removeDataAttribute(t,e),t.style.setProperty(e,n)):t.style.removeProperty(e)}))}_applyManipulationCallback(t,e){if(Ft(t))e(t);else for(const n of ke.find(t,this._element))e(n)}}const di=".bs.modal",hi=`hide${di}`,pi=`hidePrevented${di}`,fi=`hidden${di}`,mi=`show${di}`,gi=`shown${di}`,vi=`resize${di}`,yi=`click.dismiss${di}`,bi=`mousedown.dismiss${di}`,wi=`keydown.dismiss${di}`,ki=`click${di}.data-api`,xi="modal-open",Si="show",Ci="modal-static",_i={backdrop:!0,focus:!0,keyboard:!0},Ti={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Mi extends be{constructor(t,e){super(t,e),this._dialog=ke.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ui,this._addEventListeners()}static get Default(){return _i}static get DefaultType(){return Ti}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||this._isTransitioning)return;pe.trigger(this._element,mi,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(xi),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){if(!this._isShown||this._isTransitioning)return;pe.trigger(this._element,hi).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Si),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated()))}dispose(){pe.off(window,di),pe.off(this._dialog,di),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Xn({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new si({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=ke.findOne(".modal-body",this._dialog);e&&(e.scrollTop=0),qt(this._element),this._element.classList.add(Si);this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,pe.trigger(this._element,gi,{relatedTarget:t})}),this._dialog,this._isAnimated())}_addEventListeners(){pe.on(this._element,wi,(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),pe.on(window,vi,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),pe.on(this._element,bi,(t=>{pe.one(this._element,yi,(e=>{this._element===t.target&&this._element===e.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(xi),this._resetAdjustments(),this._scrollBar.reset(),pe.trigger(this._element,fi)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(pe.trigger(this._element,pi).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._element.style.overflowY;"hidden"===e||this._element.classList.contains(Ci)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(Ci),this._queueCallback((()=>{this._element.classList.remove(Ci),this._queueCallback((()=>{this._element.style.overflowY=e}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const t=Ut()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!n&&t){const t=Ut()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const n=Mi.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t](e)}}))}}pe.on(document,ki,'[data-bs-toggle="modal"]',(function(t){const e=ke.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),pe.one(e,mi,(t=>{t.defaultPrevented||pe.one(e,fi,(()=>{$t(this)&&this.focus()}))}));const n=ke.findOne(".modal.show");n&&Mi.getInstance(n).hide();Mi.getOrCreateInstance(e).toggle(this)})),xe(Mi),Gt(Mi);const Oi=".bs.offcanvas",Ei=".data-api",Ai=`load${Oi}${Ei}`,Ni="show",Di="showing",Li="hiding",Ii=".offcanvas.show",Pi=`show${Oi}`,Bi=`shown${Oi}`,ji=`hide${Oi}`,Fi=`hidePrevented${Oi}`,Ri=`hidden${Oi}`,$i=`resize${Oi}`,Vi=`click${Oi}${Ei}`,zi=`keydown.dismiss${Oi}`,Hi={backdrop:!0,keyboard:!0,scroll:!1},qi={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ki extends be{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Hi}static get DefaultType(){return qi}static get NAME(){return"offcanvas"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown)return;if(pe.trigger(this._element,Pi,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||(new ui).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Di);this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Ni),this._element.classList.remove(Di),pe.trigger(this._element,Bi,{relatedTarget:t})}),this._element,!0)}hide(){if(!this._isShown)return;if(pe.trigger(this._element,ji).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Li),this._backdrop.hide();this._queueCallback((()=>{this._element.classList.remove(Ni,Li),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new ui).reset(),pe.trigger(this._element,Ri)}),this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=Boolean(this._config.backdrop);return new Xn({className:"offcanvas-backdrop",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{"static"!==this._config.backdrop?this.hide():pe.trigger(this._element,Fi)}:null})}_initializeFocusTrap(){return new si({trapElement:this._element})}_addEventListeners(){pe.on(this._element,zi,(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():pe.trigger(this._element,Fi))}))}static jQueryInterface(t){return this.each((function(){const e=Ki.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}pe.on(document,Vi,'[data-bs-toggle="offcanvas"]',(function(t){const e=ke.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Vt(this))return;pe.one(e,Ri,(()=>{$t(this)&&this.focus()}));const n=ke.findOne(Ii);n&&n!==e&&Ki.getInstance(n).hide();Ki.getOrCreateInstance(e).toggle(this)})),pe.on(window,Ai,(()=>{for(const t of ke.find(Ii))Ki.getOrCreateInstance(t).show()})),pe.on(window,$i,(()=>{for(const t of ke.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&Ki.getOrCreateInstance(t).hide()})),xe(Ki),Gt(Ki);const Wi={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Ui=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Gi=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Ji=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?!Ui.has(n)||Boolean(Gi.test(t.nodeValue)):e.filter((t=>t instanceof RegExp)).some((t=>t.test(n)))};const Yi={allowList:Wi,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Qi={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Xi={entry:"(string|element|function|null)",selector:"(string|element)"};class Zi extends ye{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Yi}static get DefaultType(){return Qi}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((t=>this._resolvePossibleFunction(t))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[e,n]of Object.entries(this._config.content))this._setContent(t,n,e);const e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},Xi)}_setContent(t,e,n){const i=ke.findOne(n,t);i&&((e=this._resolvePossibleFunction(e))?Ft(e)?this._putElementInTemplate(Rt(e),i):this._config.html?i.innerHTML=this._maybeSanitize(e):i.textContent=e:i.remove())}_maybeSanitize(t){return this._config.sanitize?function(t,e,n){if(!t.length)return t;if(n&&"function"==typeof n)return n(t);const i=(new window.DOMParser).parseFromString(t,"text/html"),r=[].concat(...i.body.querySelectorAll("*"));for(const t of r){const n=t.nodeName.toLowerCase();if(!Object.keys(e).includes(n)){t.remove();continue}const i=[].concat(...t.attributes),r=[].concat(e["*"]||[],e[n]||[]);for(const e of i)Ji(e,r)||t.removeAttribute(e.nodeName)}return i.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Jt(t,[this])}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}const tr=new Set(["sanitize","allowList","sanitizeFn"]),er="fade",nr="show",ir=".modal",rr="hide.bs.modal",sr="hover",or="focus",ar={AUTO:"auto",TOP:"top",RIGHT:Ut()?"left":"right",BOTTOM:"bottom",LEFT:Ut()?"right":"left"},lr={allowList:Wi,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},cr={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ur extends be{constructor(e,n){if(void 0===t)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return lr}static get DefaultType(){return cr}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),pe.off(this._element.closest(ir),rr,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=pe.trigger(this._element,this.constructor.eventName("show")),e=(zt(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!e)return;this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(n),pe.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(n),n.classList.add(nr),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))pe.on(t,"mouseover",Ht);this._queueCallback((()=>{pe.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(!this._isShown())return;if(pe.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented)return;if(this._getTipElement().classList.remove(nr),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))pe.off(t,"mouseover",Ht);this._activeTrigger.click=!1,this._activeTrigger[or]=!1,this._activeTrigger[sr]=!1,this._isHovered=null;this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),pe.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(er,nr),e.classList.add(`bs-${this.constructor.NAME}-auto`);const n=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(er),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Zi({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(er)}_isShown(){return this.tip&&this.tip.classList.contains(nr)}_createPopper(t){const e=Jt(this._config.placement,[this,t,this._element]),n=ar[e.toUpperCase()];return Nt(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return Jt(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return{...e,...Jt(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if("click"===e)pe.on(this._element,this.constructor.eventName("click"),this._config.selector,(t=>{this._initializeOnDelegatedTarget(t).toggle()}));else if("manual"!==e){const t=e===sr?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),n=e===sr?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");pe.on(this._element,t,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?or:sr]=!0,e._enter()})),pe.on(this._element,n,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?or:sr]=e._element.contains(t.relatedTarget),e._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},pe.on(this._element.closest(ir),rr,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=ve.getDataAttributes(this._element);for(const t of Object.keys(e))tr.has(t)&&delete e[t];return t={...e,..."object"==typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:Rt(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,n]of Object.entries(this._config))this.constructor.Default[e]!==n&&(t[e]=n);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each((function(){const e=ur.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Gt(ur);const dr={...ur.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},hr={...ur.DefaultType,content:"(null|string|element|function)"};class pr extends ur{static get Default(){return dr}static get DefaultType(){return hr}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each((function(){const e=pr.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Gt(pr);const fr=".bs.scrollspy",mr=`activate${fr}`,gr=`click${fr}`,vr=`load${fr}.data-api`,yr="active",br="[href]",wr=".nav-link",kr=`${wr}, .nav-item > ${wr}, .list-group-item`,xr={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Sr={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Cr extends be{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return xr}static get DefaultType(){return Sr}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Rt(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"==typeof t.threshold&&(t.threshold=t.threshold.split(",").map((t=>Number.parseFloat(t)))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(pe.off(this._config.target,gr),pe.on(this._config.target,gr,br,(t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const n=this._rootElement||window,i=e.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:i,behavior:"smooth"});n.scrollTop=i}})))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((t=>this._observerCallback(t)),t)}_observerCallback(t){const e=t=>this._targetLinks.get(`#${t.target.id}`),n=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},i=(this._rootElement||document.documentElement).scrollTop,r=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const s of t){if(!s.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(s));continue}const t=s.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&t){if(n(s),!i)return}else r||t||n(s)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=ke.find(br,this._config.target);for(const e of t){if(!e.hash||Vt(e))continue;const t=ke.findOne(decodeURI(e.hash),this._element);$t(t)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,t))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(yr),this._activateParents(t),pe.trigger(this._element,mr,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains("dropdown-item"))ke.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(yr);else for(const e of ke.parents(t,".nav, .list-group"))for(const t of ke.prev(e,kr))t.classList.add(yr)}_clearActiveClass(t){t.classList.remove(yr);const e=ke.find(`${br}.${yr}`,t);for(const t of e)t.classList.remove(yr)}static jQueryInterface(t){return this.each((function(){const e=Cr.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}pe.on(window,vr,(()=>{for(const t of ke.find('[data-bs-spy="scroll"]'))Cr.getOrCreateInstance(t)})),Gt(Cr);const _r=".bs.tab",Tr=`hide${_r}`,Mr=`hidden${_r}`,Or=`show${_r}`,Er=`shown${_r}`,Ar=`click${_r}`,Nr=`keydown${_r}`,Dr=`load${_r}`,Lr="ArrowLeft",Ir="ArrowRight",Pr="ArrowUp",Br="ArrowDown",jr="Home",Fr="End",Rr="active",$r="fade",Vr="show",zr=".dropdown-toggle",Hr=`:not(${zr})`,qr='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Kr=`${`.nav-link${Hr}, .list-group-item${Hr}, [role="tab"]${Hr}`}, ${qr}`,Wr=`.${Rr}[data-bs-toggle="tab"], .${Rr}[data-bs-toggle="pill"], .${Rr}[data-bs-toggle="list"]`;class Ur extends be{constructor(t){super(t),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),pe.on(this._element,Nr,(t=>this._keydown(t))))}static get NAME(){return"tab"}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),n=e?pe.trigger(e,Tr,{relatedTarget:t}):null;pe.trigger(t,Or,{relatedTarget:e}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(Rr),this._activate(ke.getElementFromSelector(t));this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),pe.trigger(t,Er,{relatedTarget:e})):t.classList.add(Vr)}),t,t.classList.contains($r))}_deactivate(t,e){if(!t)return;t.classList.remove(Rr),t.blur(),this._deactivate(ke.getElementFromSelector(t));this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),pe.trigger(t,Mr,{relatedTarget:e})):t.classList.remove(Vr)}),t,t.classList.contains($r))}_keydown(t){if(![Lr,Ir,Pr,Br,jr,Fr].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter((t=>!Vt(t)));let n;if([jr,Fr].includes(t.key))n=e[t.key===jr?0:e.length-1];else{const i=[Ir,Br].includes(t.key);n=Qt(e,t.target,i,!0)}n&&(n.focus({preventScroll:!0}),Ur.getOrCreateInstance(n).show())}_getChildren(){return ke.find(Kr,this._parent)}_getActiveElem(){return this._getChildren().find((t=>this._elemIsActive(t)))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const t of e)this._setInitialAttributesOnChild(t)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=ke.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const n=this._getOuterElement(t);if(!n.classList.contains("dropdown"))return;const i=(t,i)=>{const r=ke.findOne(t,n);r&&r.classList.toggle(i,e)};i(zr,Rr),i(".dropdown-menu",Vr),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(Rr)}_getInnerElement(t){return t.matches(Kr)?t:ke.findOne(Kr,t)}_getOuterElement(t){return t.closest(".nav-item, .list-group-item")||t}static jQueryInterface(t){return this.each((function(){const e=Ur.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}pe.on(document,Ar,qr,(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),Vt(this)||Ur.getOrCreateInstance(this).show()})),pe.on(window,Dr,(()=>{for(const t of ke.find(Wr))Ur.getOrCreateInstance(t)})),Gt(Ur);const Gr=".bs.toast",Jr=`mouseover${Gr}`,Yr=`mouseout${Gr}`,Qr=`focusin${Gr}`,Xr=`focusout${Gr}`,Zr=`hide${Gr}`,ts=`hidden${Gr}`,es=`show${Gr}`,ns=`shown${Gr}`,is="hide",rs="show",ss="showing",as={animation:"boolean",autohide:"boolean",delay:"number"},ls={animation:!0,autohide:!0,delay:5e3};class cs extends be{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return ls}static get DefaultType(){return as}static get NAME(){return"toast"}show(){if(pe.trigger(this._element,es).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");this._element.classList.remove(is),qt(this._element),this._element.classList.add(rs,ss),this._queueCallback((()=>{this._element.classList.remove(ss),pe.trigger(this._element,ns),this._maybeScheduleHide()}),this._element,this._config.animation)}hide(){if(!this.isShown())return;if(pe.trigger(this._element,Zr).defaultPrevented)return;this._element.classList.add(ss),this._queueCallback((()=>{this._element.classList.add(is),this._element.classList.remove(ss,rs),pe.trigger(this._element,ts)}),this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(rs),super.dispose()}isShown(){return this._element.classList.contains(rs)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){pe.on(this._element,Jr,(t=>this._onInteraction(t,!0))),pe.on(this._element,Yr,(t=>this._onInteraction(t,!1))),pe.on(this._element,Qr,(t=>this._onInteraction(t,!0))),pe.on(this._element,Xr,(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=cs.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}xe(cs),Gt(cs);var us=n(382),ds=n.n(us);class hs{constructor(t,e,n){this.eventTarget=t,this.eventName=e,this.eventOptions=n,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(t){this.unorderedBindings.add(t)}bindingDisconnected(t){this.unorderedBindings.delete(t)}handleEvent(t){const e=function(t){if("immediatePropagationStopped"in t)return t;{const{stopImmediatePropagation:e}=t;return Object.assign(t,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}(t);for(const t of this.bindings){if(e.immediatePropagationStopped)break;t.handleEvent(e)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort(((t,e)=>{const n=t.index,i=e.index;return n<i?-1:n>i?1:0}))}}class ps{constructor(t){this.application=t,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach((t=>t.connect())))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach((t=>t.disconnect())))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce(((t,e)=>t.concat(Array.from(e.values()))),[])}bindingConnected(t){this.fetchEventListenerForBinding(t).bindingConnected(t)}bindingDisconnected(t,e=!1){this.fetchEventListenerForBinding(t).bindingDisconnected(t),e&&this.clearEventListenersForBinding(t)}handleError(t,e,n={}){this.application.handleError(t,`Error ${e}`,n)}clearEventListenersForBinding(t){const e=this.fetchEventListenerForBinding(t);e.hasBindings()||(e.disconnect(),this.removeMappedEventListenerFor(t))}removeMappedEventListenerFor(t){const{eventTarget:e,eventName:n,eventOptions:i}=t,r=this.fetchEventListenerMapForEventTarget(e),s=this.cacheKey(n,i);r.delete(s),0==r.size&&this.eventListenerMaps.delete(e)}fetchEventListenerForBinding(t){const{eventTarget:e,eventName:n,eventOptions:i}=t;return this.fetchEventListener(e,n,i)}fetchEventListener(t,e,n){const i=this.fetchEventListenerMapForEventTarget(t),r=this.cacheKey(e,n);let s=i.get(r);return s||(s=this.createEventListener(t,e,n),i.set(r,s)),s}createEventListener(t,e,n){const i=new hs(t,e,n);return this.started&&i.connect(),i}fetchEventListenerMapForEventTarget(t){let e=this.eventListenerMaps.get(t);return e||(e=new Map,this.eventListenerMaps.set(t,e)),e}cacheKey(t,e){const n=[t];return Object.keys(e).sort().forEach((t=>{n.push(`${e[t]?"":"!"}${t}`)})),n.join(":")}}const fs={stop({event:t,value:e}){return e&&t.stopPropagation(),!0},prevent({event:t,value:e}){return e&&t.preventDefault(),!0},self({event:t,value:e,element:n}){return!e||n===t.target}},ms=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function gs(t){return"window"==t?window:"document"==t?document:void 0}function vs(t){return t.replace(/(?:[_-])([a-z0-9])/g,((t,e)=>e.toUpperCase()))}function ys(t){return vs(t.replace(/--/g,"-").replace(/__/g,"_"))}function bs(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ws(t){return t.replace(/([A-Z])/g,((t,e)=>`-${e.toLowerCase()}`))}function ks(t){return null!=t}function xs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Ss=["meta","ctrl","alt","shift"];class Cs{constructor(t,e,n,i){this.element=t,this.index=e,this.eventTarget=n.eventTarget||t,this.eventName=n.eventName||function(t){const e=t.tagName.toLowerCase();if(e in _s)return _s[e](t)}(t)||Ts("missing event name"),this.eventOptions=n.eventOptions||{},this.identifier=n.identifier||Ts("missing identifier"),this.methodName=n.methodName||Ts("missing method name"),this.keyFilter=n.keyFilter||"",this.schema=i}static forToken(t,e){return new this(t.element,t.index,function(t){const e=t.trim().match(ms)||[];let n=e[2],i=e[3];return i&&!["keydown","keyup","keypress"].includes(n)&&(n+=`.${i}`,i=""),{eventTarget:gs(e[4]),eventName:n,eventOptions:e[7]?(r=e[7],r.split(":").reduce(((t,e)=>Object.assign(t,{[e.replace(/^!/,"")]:!/^!/.test(e)})),{})):{},identifier:e[5],methodName:e[6],keyFilter:e[1]||i};var r}(t.content),e)}toString(){const t=this.keyFilter?`.${this.keyFilter}`:"",e=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${t}${e}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(t){if(!this.keyFilter)return!1;const e=this.keyFilter.split("+");if(this.keyFilterDissatisfied(t,e))return!0;const n=e.filter((t=>!Ss.includes(t)))[0];return!!n&&(xs(this.keyMappings,n)||Ts(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[n].toLowerCase()!==t.key.toLowerCase())}shouldIgnoreMouseEvent(t){if(!this.keyFilter)return!1;const e=[this.keyFilter];return!!this.keyFilterDissatisfied(t,e)}get params(){const t={},e=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(const{name:n,value:i}of Array.from(this.element.attributes)){const r=n.match(e),s=r&&r[1];s&&(t[vs(s)]=Ms(i))}return t}get eventTargetName(){return(t=this.eventTarget)==window?"window":t==document?"document":void 0;var t}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(t,e){const[n,i,r,s]=Ss.map((t=>e.includes(t)));return t.metaKey!==n||t.ctrlKey!==i||t.altKey!==r||t.shiftKey!==s}}const _s={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:t=>"submit"==t.getAttribute("type")?"click":"input",select:()=>"change",textarea:()=>"input"};function Ts(t){throw new Error(t)}function Ms(t){try{return JSON.parse(t)}catch(e){return t}}class Os{constructor(t,e){this.context=t,this.action=e}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(t){const e=this.prepareActionEvent(t);this.willBeInvokedByEvent(t)&&this.applyEventModifiers(e)&&this.invokeWithEvent(e)}get eventName(){return this.action.eventName}get method(){const t=this.controller[this.methodName];if("function"==typeof t)return t;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(t){const{element:e}=this.action,{actionDescriptorFilters:n}=this.context.application,{controller:i}=this.context;let r=!0;for(const[s,o]of Object.entries(this.eventOptions))if(s in n){const a=n[s];r=r&&a({name:s,value:o,event:t,element:e,controller:i})}return r}prepareActionEvent(t){return Object.assign(t,{params:this.action.params})}invokeWithEvent(t){const{target:e,currentTarget:n}=t;try{this.method.call(this.controller,t),this.context.logDebugActivity(this.methodName,{event:t,target:e,currentTarget:n,action:this.methodName})}catch(e){const{identifier:n,controller:i,element:r,index:s}=this,o={identifier:n,controller:i,element:r,index:s,event:t};this.context.handleError(e,`invoking action "${this.action}"`,o)}}willBeInvokedByEvent(t){const e=t.target;return!(t instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(t))&&(!(t instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(t))&&(this.element===e||(e instanceof Element&&this.element.contains(e)?this.scope.containsElement(e):this.scope.containsElement(this.action.element))))}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}}class Es{constructor(t,e){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=t,this.started=!1,this.delegate=e,this.elements=new Set,this.mutationObserver=new MutationObserver((t=>this.processMutations(t)))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(t){this.started&&(this.mutationObserver.disconnect(),this.started=!1),t(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){const t=new Set(this.matchElementsInTree());for(const e of Array.from(this.elements))t.has(e)||this.removeElement(e);for(const e of Array.from(t))this.addElement(e)}}processMutations(t){if(this.started)for(const e of t)this.processMutation(e)}processMutation(t){"attributes"==t.type?this.processAttributeChange(t.target,t.attributeName):"childList"==t.type&&(this.processRemovedNodes(t.removedNodes),this.processAddedNodes(t.addedNodes))}processAttributeChange(t,e){this.elements.has(t)?this.delegate.elementAttributeChanged&&this.matchElement(t)?this.delegate.elementAttributeChanged(t,e):this.removeElement(t):this.matchElement(t)&&this.addElement(t)}processRemovedNodes(t){for(const e of Array.from(t)){const t=this.elementFromNode(e);t&&this.processTree(t,this.removeElement)}}processAddedNodes(t){for(const e of Array.from(t)){const t=this.elementFromNode(e);t&&this.elementIsActive(t)&&this.processTree(t,this.addElement)}}matchElement(t){return this.delegate.matchElement(t)}matchElementsInTree(t=this.element){return this.delegate.matchElementsInTree(t)}processTree(t,e){for(const n of this.matchElementsInTree(t))e.call(this,n)}elementFromNode(t){if(t.nodeType==Node.ELEMENT_NODE)return t}elementIsActive(t){return t.isConnected==this.element.isConnected&&this.element.contains(t)}addElement(t){this.elements.has(t)||this.elementIsActive(t)&&(this.elements.add(t),this.delegate.elementMatched&&this.delegate.elementMatched(t))}removeElement(t){this.elements.has(t)&&(this.elements.delete(t),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(t))}}class As{constructor(t,e,n){this.attributeName=e,this.delegate=n,this.elementObserver=new Es(t,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(t){return t.hasAttribute(this.attributeName)}matchElementsInTree(t){const e=this.matchElement(t)?[t]:[],n=Array.from(t.querySelectorAll(this.selector));return e.concat(n)}elementMatched(t){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(t,this.attributeName)}elementUnmatched(t){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(t,this.attributeName)}elementAttributeChanged(t,e){this.delegate.elementAttributeValueChanged&&this.attributeName==e&&this.delegate.elementAttributeValueChanged(t,e)}}function Ns(t,e,n){Ls(t,e).add(n)}function Ds(t,e,n){Ls(t,e).delete(n),function(t,e){const n=t.get(e);null!=n&&0==n.size&&t.delete(e)}(t,e)}function Ls(t,e){let n=t.get(e);return n||(n=new Set,t.set(e,n)),n}class Is{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce(((t,e)=>t.concat(Array.from(e))),[])}get size(){return Array.from(this.valuesByKey.values()).reduce(((t,e)=>t+e.size),0)}add(t,e){Ns(this.valuesByKey,t,e)}delete(t,e){Ds(this.valuesByKey,t,e)}has(t,e){const n=this.valuesByKey.get(t);return null!=n&&n.has(e)}hasKey(t){return this.valuesByKey.has(t)}hasValue(t){return Array.from(this.valuesByKey.values()).some((e=>e.has(t)))}getValuesForKey(t){const e=this.valuesByKey.get(t);return e?Array.from(e):[]}getKeysForValue(t){return Array.from(this.valuesByKey).filter((([e,n])=>n.has(t))).map((([t,e])=>t))}}class Ps{constructor(t,e,n,i){this._selector=e,this.details=i,this.elementObserver=new Es(t,this),this.delegate=n,this.matchesByElement=new Is}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(t){this._selector=t,this.refresh()}start(){this.elementObserver.start()}pause(t){this.elementObserver.pause(t)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(t){const{selector:e}=this;if(e){const n=t.matches(e);return this.delegate.selectorMatchElement?n&&this.delegate.selectorMatchElement(t,this.details):n}return!1}matchElementsInTree(t){const{selector:e}=this;if(e){const n=this.matchElement(t)?[t]:[],i=Array.from(t.querySelectorAll(e)).filter((t=>this.matchElement(t)));return n.concat(i)}return[]}elementMatched(t){const{selector:e}=this;e&&this.selectorMatched(t,e)}elementUnmatched(t){const e=this.matchesByElement.getKeysForValue(t);for(const n of e)this.selectorUnmatched(t,n)}elementAttributeChanged(t,e){const{selector:n}=this;if(n){const e=this.matchElement(t),i=this.matchesByElement.has(n,t);e&&!i?this.selectorMatched(t,n):!e&&i&&this.selectorUnmatched(t,n)}}selectorMatched(t,e){this.delegate.selectorMatched(t,e,this.details),this.matchesByElement.add(e,t)}selectorUnmatched(t,e){this.delegate.selectorUnmatched(t,e,this.details),this.matchesByElement.delete(e,t)}}class Bs{constructor(t,e){this.element=t,this.delegate=e,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver((t=>this.processMutations(t)))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(const t of this.knownAttributeNames)this.refreshAttribute(t,null)}processMutations(t){if(this.started)for(const e of t)this.processMutation(e)}processMutation(t){const e=t.attributeName;e&&this.refreshAttribute(e,t.oldValue)}refreshAttribute(t,e){const n=this.delegate.getStringMapKeyForAttribute(t);if(null!=n){this.stringMap.has(t)||this.stringMapKeyAdded(n,t);const i=this.element.getAttribute(t);if(this.stringMap.get(t)!=i&&this.stringMapValueChanged(i,n,e),null==i){const e=this.stringMap.get(t);this.stringMap.delete(t),e&&this.stringMapKeyRemoved(n,t,e)}else this.stringMap.set(t,i)}}stringMapKeyAdded(t,e){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(t,e)}stringMapValueChanged(t,e,n){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(t,e,n)}stringMapKeyRemoved(t,e,n){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(t,e,n)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map((t=>t.name))}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}}class js{constructor(t,e,n){this.attributeObserver=new As(t,e,this),this.delegate=n,this.tokensByElement=new Is}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(t){this.attributeObserver.pause(t)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(t){this.tokensMatched(this.readTokensForElement(t))}elementAttributeValueChanged(t){const[e,n]=this.refreshTokensForElement(t);this.tokensUnmatched(e),this.tokensMatched(n)}elementUnmatchedAttribute(t){this.tokensUnmatched(this.tokensByElement.getValuesForKey(t))}tokensMatched(t){t.forEach((t=>this.tokenMatched(t)))}tokensUnmatched(t){t.forEach((t=>this.tokenUnmatched(t)))}tokenMatched(t){this.delegate.tokenMatched(t),this.tokensByElement.add(t.element,t)}tokenUnmatched(t){this.delegate.tokenUnmatched(t),this.tokensByElement.delete(t.element,t)}refreshTokensForElement(t){const e=this.tokensByElement.getValuesForKey(t),n=this.readTokensForElement(t),i=function(t,e){const n=Math.max(t.length,e.length);return Array.from({length:n},((n,i)=>[t[i],e[i]]))}(e,n).findIndex((([t,e])=>!function(t,e){return t&&e&&t.index==e.index&&t.content==e.content}(t,e)));return-1==i?[[],[]]:[e.slice(i),n.slice(i)]}readTokensForElement(t){const e=this.attributeName;return function(t,e,n){return t.trim().split(/\s+/).filter((t=>t.length)).map(((t,i)=>({element:e,attributeName:n,content:t,index:i})))}(t.getAttribute(e)||"",t,e)}}class Fs{constructor(t,e,n){this.tokenListObserver=new js(t,e,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(t){const{element:e}=t,{value:n}=this.fetchParseResultForToken(t);n&&(this.fetchValuesByTokenForElement(e).set(t,n),this.delegate.elementMatchedValue(e,n))}tokenUnmatched(t){const{element:e}=t,{value:n}=this.fetchParseResultForToken(t);n&&(this.fetchValuesByTokenForElement(e).delete(t),this.delegate.elementUnmatchedValue(e,n))}fetchParseResultForToken(t){let e=this.parseResultsByToken.get(t);return e||(e=this.parseToken(t),this.parseResultsByToken.set(t,e)),e}fetchValuesByTokenForElement(t){let e=this.valuesByTokenByElement.get(t);return e||(e=new Map,this.valuesByTokenByElement.set(t,e)),e}parseToken(t){try{return{value:this.delegate.parseValueForToken(t)}}catch(t){return{error:t}}}}class Rs{constructor(t,e){this.context=t,this.delegate=e,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new Fs(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(t){const e=new Os(this.context,t);this.bindingsByAction.set(t,e),this.delegate.bindingConnected(e)}disconnectAction(t){const e=this.bindingsByAction.get(t);e&&(this.bindingsByAction.delete(t),this.delegate.bindingDisconnected(e))}disconnectAllActions(){this.bindings.forEach((t=>this.delegate.bindingDisconnected(t,!0))),this.bindingsByAction.clear()}parseValueForToken(t){const e=Cs.forToken(t,this.schema);if(e.identifier==this.identifier)return e}elementMatchedValue(t,e){this.connectAction(e)}elementUnmatchedValue(t,e){this.disconnectAction(e)}}class $s{constructor(t,e){this.context=t,this.receiver=e,this.stringMapObserver=new Bs(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(t){if(t in this.valueDescriptorMap)return this.valueDescriptorMap[t].name}stringMapKeyAdded(t,e){const n=this.valueDescriptorMap[e];this.hasValue(t)||this.invokeChangedCallback(t,n.writer(this.receiver[t]),n.writer(n.defaultValue))}stringMapValueChanged(t,e,n){const i=this.valueDescriptorNameMap[e];null!==t&&(null===n&&(n=i.writer(i.defaultValue)),this.invokeChangedCallback(e,t,n))}stringMapKeyRemoved(t,e,n){const i=this.valueDescriptorNameMap[t];this.hasValue(t)?this.invokeChangedCallback(t,i.writer(this.receiver[t]),n):this.invokeChangedCallback(t,i.writer(i.defaultValue),n)}invokeChangedCallbacksForDefaultValues(){for(const{key:t,name:e,defaultValue:n,writer:i}of this.valueDescriptors)null==n||this.controller.data.has(t)||this.invokeChangedCallback(e,i(n),void 0)}invokeChangedCallback(t,e,n){const i=`${t}Changed`,r=this.receiver[i];if("function"==typeof r){const i=this.valueDescriptorNameMap[t];try{const t=i.reader(e);let s=n;n&&(s=i.reader(n)),r.call(this.receiver,t,s)}catch(t){throw t instanceof TypeError&&(t.message=`Stimulus Value "${this.context.identifier}.${i.name}" - ${t.message}`),t}}}get valueDescriptors(){const{valueDescriptorMap:t}=this;return Object.keys(t).map((e=>t[e]))}get valueDescriptorNameMap(){const t={};return Object.keys(this.valueDescriptorMap).forEach((e=>{const n=this.valueDescriptorMap[e];t[n.name]=n})),t}hasValue(t){const e=`has${bs(this.valueDescriptorNameMap[t].name)}`;return this.receiver[e]}}class Vs{constructor(t,e){this.context=t,this.delegate=e,this.targetsByName=new Is}start(){this.tokenListObserver||(this.tokenListObserver=new js(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:t,content:e}){this.scope.containsElement(t)&&this.connectTarget(t,e)}tokenUnmatched({element:t,content:e}){this.disconnectTarget(t,e)}connectTarget(t,e){var n;this.targetsByName.has(e,t)||(this.targetsByName.add(e,t),null===(n=this.tokenListObserver)||void 0===n||n.pause((()=>this.delegate.targetConnected(t,e))))}disconnectTarget(t,e){var n;this.targetsByName.has(e,t)&&(this.targetsByName.delete(e,t),null===(n=this.tokenListObserver)||void 0===n||n.pause((()=>this.delegate.targetDisconnected(t,e))))}disconnectAllTargets(){for(const t of this.targetsByName.keys)for(const e of this.targetsByName.getValuesForKey(t))this.disconnectTarget(e,t)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}}function zs(t,e){const n=qs(t);return Array.from(n.reduce(((t,n)=>(function(t,e){const n=t[e];return Array.isArray(n)?n:[]}(n,e).forEach((e=>t.add(e))),t)),new Set))}function Hs(t,e){return qs(t).reduce(((t,n)=>(t.push(...function(t,e){const n=t[e];return n?Object.keys(n).map((t=>[t,n[t]])):[]}(n,e)),t)),[])}function qs(t){const e=[];for(;t;)e.push(t),t=Object.getPrototypeOf(t);return e.reverse()}class Ks{constructor(t,e){this.started=!1,this.context=t,this.delegate=e,this.outletsByName=new Is,this.outletElementsByName=new Is,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach((t=>{this.setupSelectorObserverForOutlet(t),this.setupAttributeObserverForOutlet(t)})),this.started=!0,this.dependentContexts.forEach((t=>t.refresh())))}refresh(){this.selectorObserverMap.forEach((t=>t.refresh())),this.attributeObserverMap.forEach((t=>t.refresh()))}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach((t=>t.stop())),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach((t=>t.stop())),this.attributeObserverMap.clear())}selectorMatched(t,e,{outletName:n}){const i=this.getOutlet(t,n);i&&this.connectOutlet(i,t,n)}selectorUnmatched(t,e,{outletName:n}){const i=this.getOutletFromMap(t,n);i&&this.disconnectOutlet(i,t,n)}selectorMatchElement(t,{outletName:e}){const n=this.selector(e),i=this.hasOutlet(t,e),r=t.matches(`[${this.schema.controllerAttribute}~=${e}]`);return!!n&&(i&&r&&t.matches(n))}elementMatchedAttribute(t,e){const n=this.getOutletNameFromOutletAttributeName(e);n&&this.updateSelectorObserverForOutlet(n)}elementAttributeValueChanged(t,e){const n=this.getOutletNameFromOutletAttributeName(e);n&&this.updateSelectorObserverForOutlet(n)}elementUnmatchedAttribute(t,e){const n=this.getOutletNameFromOutletAttributeName(e);n&&this.updateSelectorObserverForOutlet(n)}connectOutlet(t,e,n){var i;this.outletElementsByName.has(n,e)||(this.outletsByName.add(n,t),this.outletElementsByName.add(n,e),null===(i=this.selectorObserverMap.get(n))||void 0===i||i.pause((()=>this.delegate.outletConnected(t,e,n))))}disconnectOutlet(t,e,n){var i;this.outletElementsByName.has(n,e)&&(this.outletsByName.delete(n,t),this.outletElementsByName.delete(n,e),null===(i=this.selectorObserverMap.get(n))||void 0===i||i.pause((()=>this.delegate.outletDisconnected(t,e,n))))}disconnectAllOutlets(){for(const t of this.outletElementsByName.keys)for(const e of this.outletElementsByName.getValuesForKey(t))for(const n of this.outletsByName.getValuesForKey(t))this.disconnectOutlet(n,e,t)}updateSelectorObserverForOutlet(t){const e=this.selectorObserverMap.get(t);e&&(e.selector=this.selector(t))}setupSelectorObserverForOutlet(t){const e=this.selector(t),n=new Ps(document.body,e,this,{outletName:t});this.selectorObserverMap.set(t,n),n.start()}setupAttributeObserverForOutlet(t){const e=this.attributeNameForOutletName(t),n=new As(this.scope.element,e,this);this.attributeObserverMap.set(t,n),n.start()}selector(t){return this.scope.outlets.getSelectorForOutletName(t)}attributeNameForOutletName(t){return this.scope.schema.outletAttributeForScope(this.identifier,t)}getOutletNameFromOutletAttributeName(t){return this.outletDefinitions.find((e=>this.attributeNameForOutletName(e)===t))}get outletDependencies(){const t=new Is;return this.router.modules.forEach((e=>{zs(e.definition.controllerConstructor,"outlets").forEach((n=>t.add(n,e.identifier)))})),t}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){const t=this.dependentControllerIdentifiers;return this.router.contexts.filter((e=>t.includes(e.identifier)))}hasOutlet(t,e){return!!this.getOutlet(t,e)||!!this.getOutletFromMap(t,e)}getOutlet(t,e){return this.application.getControllerForElementAndIdentifier(t,e)}getOutletFromMap(t,e){return this.outletsByName.getValuesForKey(e).find((e=>e.element===t))}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}}class Ws{constructor(t,e){this.logDebugActivity=(t,e={})=>{const{identifier:n,controller:i,element:r}=this;e=Object.assign({identifier:n,controller:i,element:r},e),this.application.logDebugActivity(this.identifier,t,e)},this.module=t,this.scope=e,this.controller=new t.controllerConstructor(this),this.bindingObserver=new Rs(this,this.dispatcher),this.valueObserver=new $s(this,this.controller),this.targetObserver=new Vs(this,this),this.outletObserver=new Ks(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(t){this.handleError(t,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(t){this.handleError(t,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(t){this.handleError(t,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(t,e,n={}){const{identifier:i,controller:r,element:s}=this;n=Object.assign({identifier:i,controller:r,element:s},n),this.application.handleError(t,`Error ${e}`,n)}targetConnected(t,e){this.invokeControllerMethod(`${e}TargetConnected`,t)}targetDisconnected(t,e){this.invokeControllerMethod(`${e}TargetDisconnected`,t)}outletConnected(t,e,n){this.invokeControllerMethod(`${ys(n)}OutletConnected`,t,e)}outletDisconnected(t,e,n){this.invokeControllerMethod(`${ys(n)}OutletDisconnected`,t,e)}invokeControllerMethod(t,...e){const n=this.controller;"function"==typeof n[t]&&n[t](...e)}}function Us(t){return function(t,e){const n=Js(t),i=function(t,e){return Gs(e).reduce(((n,i)=>{const r=function(t,e,n){const i=Object.getOwnPropertyDescriptor(t,n);if(!i||!("value"in i)){const t=Object.getOwnPropertyDescriptor(e,n).value;return i&&(t.get=i.get||t.get,t.set=i.set||t.set),t}}(t,e,i);return r&&Object.assign(n,{[i]:r}),n}),{})}(t.prototype,e);return Object.defineProperties(n.prototype,i),n}(t,function(t){const e=zs(t,"blessings");return e.reduce(((e,n)=>{const i=n(t);for(const t in i){const n=e[t]||{};e[t]=Object.assign(n,i[t])}return e}),{})}(t))}const Gs="function"==typeof Object.getOwnPropertySymbols?t=>[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)]:Object.getOwnPropertyNames,Js=(()=>{function t(t){function e(){return Reflect.construct(t,arguments,new.target)}return e.prototype=Object.create(t.prototype,{constructor:{value:e}}),Reflect.setPrototypeOf(e,t),e}try{return function(){const e=t((function(){this.a.call(this)}));e.prototype.a=function(){},new e}(),t}catch(t){return t=>class extends t{}}})();class Ys{constructor(t,e){this.application=t,this.definition=function(t){return{identifier:t.identifier,controllerConstructor:Us(t.controllerConstructor)}}(e),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(t){const e=this.fetchContextForScope(t);this.connectedContexts.add(e),e.connect()}disconnectContextForScope(t){const e=this.contextsByScope.get(t);e&&(this.connectedContexts.delete(e),e.disconnect())}fetchContextForScope(t){let e=this.contextsByScope.get(t);return e||(e=new Ws(this,t),this.contextsByScope.set(t,e)),e}}class Qs{constructor(t){this.scope=t}has(t){return this.data.has(this.getDataKey(t))}get(t){return this.getAll(t)[0]}getAll(t){const e=this.data.get(this.getDataKey(t))||"";return e.match(/[^\s]+/g)||[]}getAttributeName(t){return this.data.getAttributeNameForKey(this.getDataKey(t))}getDataKey(t){return`${t}-class`}get data(){return this.scope.data}}class Xs{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(t){const e=this.getAttributeNameForKey(t);return this.element.getAttribute(e)}set(t,e){const n=this.getAttributeNameForKey(t);return this.element.setAttribute(n,e),this.get(t)}has(t){const e=this.getAttributeNameForKey(t);return this.element.hasAttribute(e)}delete(t){if(this.has(t)){const e=this.getAttributeNameForKey(t);return this.element.removeAttribute(e),!0}return!1}getAttributeNameForKey(t){return`data-${this.identifier}-${ws(t)}`}}class Zs{constructor(t){this.warnedKeysByObject=new WeakMap,this.logger=t}warn(t,e,n){let i=this.warnedKeysByObject.get(t);i||(i=new Set,this.warnedKeysByObject.set(t,i)),i.has(e)||(i.add(e),this.logger.warn(n,t))}}function to(t,e){return`[${t}~="${e}"]`}class eo{constructor(t){this.scope=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return null!=this.find(t)}find(...t){return t.reduce(((t,e)=>t||this.findTarget(e)||this.findLegacyTarget(e)),void 0)}findAll(...t){return t.reduce(((t,e)=>[...t,...this.findAllTargets(e),...this.findAllLegacyTargets(e)]),[])}findTarget(t){const e=this.getSelectorForTargetName(t);return this.scope.findElement(e)}findAllTargets(t){const e=this.getSelectorForTargetName(t);return this.scope.findAllElements(e)}getSelectorForTargetName(t){return to(this.schema.targetAttributeForScope(this.identifier),t)}findLegacyTarget(t){const e=this.getLegacySelectorForTargetName(t);return this.deprecate(this.scope.findElement(e),t)}findAllLegacyTargets(t){const e=this.getLegacySelectorForTargetName(t);return this.scope.findAllElements(e).map((e=>this.deprecate(e,t)))}getLegacySelectorForTargetName(t){const e=`${this.identifier}.${t}`;return to(this.schema.targetAttribute,e)}deprecate(t,e){if(t){const{identifier:n}=this,i=this.schema.targetAttribute,r=this.schema.targetAttributeForScope(n);this.guide.warn(t,`target:${e}`,`Please replace ${i}="${n}.${e}" with ${r}="${e}". The ${i} attribute is deprecated and will be removed in a future version of Stimulus.`)}return t}get guide(){return this.scope.guide}}class no{constructor(t,e){this.scope=t,this.controllerElement=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(t){return null!=this.find(t)}find(...t){return t.reduce(((t,e)=>t||this.findOutlet(e)),void 0)}findAll(...t){return t.reduce(((t,e)=>[...t,...this.findAllOutlets(e)]),[])}getSelectorForOutletName(t){const e=this.schema.outletAttributeForScope(this.identifier,t);return this.controllerElement.getAttribute(e)}findOutlet(t){const e=this.getSelectorForOutletName(t);if(e)return this.findElement(e,t)}findAllOutlets(t){const e=this.getSelectorForOutletName(t);return e?this.findAllElements(e,t):[]}findElement(t,e){return this.scope.queryElements(t).filter((n=>this.matchesElement(n,t,e)))[0]}findAllElements(t,e){return this.scope.queryElements(t).filter((n=>this.matchesElement(n,t,e)))}matchesElement(t,e,n){const i=t.getAttribute(this.scope.schema.controllerAttribute)||"";return t.matches(e)&&i.split(" ").includes(n)}}class io{constructor(t,e,n,i){this.targets=new eo(this),this.classes=new Qs(this),this.data=new Xs(this),this.containsElement=t=>t.closest(this.controllerSelector)===this.element,this.schema=t,this.element=e,this.identifier=n,this.guide=new Zs(i),this.outlets=new no(this.documentScope,e)}findElement(t){return this.element.matches(t)?this.element:this.queryElements(t).find(this.containsElement)}findAllElements(t){return[...this.element.matches(t)?[this.element]:[],...this.queryElements(t).filter(this.containsElement)]}queryElements(t){return Array.from(this.element.querySelectorAll(t))}get controllerSelector(){return to(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new io(this.schema,document.documentElement,this.identifier,this.guide.logger)}}class ro{constructor(t,e,n){this.element=t,this.schema=e,this.delegate=n,this.valueListObserver=new Fs(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(t){const{element:e,content:n}=t;return this.parseValueForElementAndIdentifier(e,n)}parseValueForElementAndIdentifier(t,e){const n=this.fetchScopesByIdentifierForElement(t);let i=n.get(e);return i||(i=this.delegate.createScopeForElementAndIdentifier(t,e),n.set(e,i)),i}elementMatchedValue(t,e){const n=(this.scopeReferenceCounts.get(e)||0)+1;this.scopeReferenceCounts.set(e,n),1==n&&this.delegate.scopeConnected(e)}elementUnmatchedValue(t,e){const n=this.scopeReferenceCounts.get(e);n&&(this.scopeReferenceCounts.set(e,n-1),1==n&&this.delegate.scopeDisconnected(e))}fetchScopesByIdentifierForElement(t){let e=this.scopesByIdentifierByElement.get(t);return e||(e=new Map,this.scopesByIdentifierByElement.set(t,e)),e}}class so{constructor(t){this.application=t,this.scopeObserver=new ro(this.element,this.schema,this),this.scopesByIdentifier=new Is,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce(((t,e)=>t.concat(e.contexts)),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(t){this.unloadIdentifier(t.identifier);const e=new Ys(this.application,t);this.connectModule(e);const n=t.controllerConstructor.afterLoad;n&&n.call(t.controllerConstructor,t.identifier,this.application)}unloadIdentifier(t){const e=this.modulesByIdentifier.get(t);e&&this.disconnectModule(e)}getContextForElementAndIdentifier(t,e){const n=this.modulesByIdentifier.get(e);if(n)return n.contexts.find((e=>e.element==t))}proposeToConnectScopeForElementAndIdentifier(t,e){const n=this.scopeObserver.parseValueForElementAndIdentifier(t,e);n?this.scopeObserver.elementMatchedValue(n.element,n):console.error(`Couldn't find or create scope for identifier: "${e}" and element:`,t)}handleError(t,e,n){this.application.handleError(t,e,n)}createScopeForElementAndIdentifier(t,e){return new io(this.schema,t,e,this.logger)}scopeConnected(t){this.scopesByIdentifier.add(t.identifier,t);const e=this.modulesByIdentifier.get(t.identifier);e&&e.connectContextForScope(t)}scopeDisconnected(t){this.scopesByIdentifier.delete(t.identifier,t);const e=this.modulesByIdentifier.get(t.identifier);e&&e.disconnectContextForScope(t)}connectModule(t){this.modulesByIdentifier.set(t.identifier,t);this.scopesByIdentifier.getValuesForKey(t.identifier).forEach((e=>t.connectContextForScope(e)))}disconnectModule(t){this.modulesByIdentifier.delete(t.identifier);this.scopesByIdentifier.getValuesForKey(t.identifier).forEach((e=>t.disconnectContextForScope(e)))}}const oo={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:t=>`data-${t}-target`,outletAttributeForScope:(t,e)=>`data-${t}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},ao("abcdefghijklmnopqrstuvwxyz".split("").map((t=>[t,t])))),ao("0123456789".split("").map((t=>[t,t]))))};function ao(t){return t.reduce(((t,[e,n])=>Object.assign(Object.assign({},t),{[e]:n})),{})}function lo(t,e,n){return t.application.getControllerForElementAndIdentifier(e,n)}function co(t,e,n){let i=lo(t,e,n);return i||(t.application.router.proposeToConnectScopeForElementAndIdentifier(e,n),i=lo(t,e,n),i||void 0)}function uo([t,e],n){return function(t){const{token:e,typeDefinition:n}=t,i=`${ws(e)}-value`,r=function(t){const{controller:e,token:n,typeDefinition:i}=t,r={controller:e,token:n,typeObject:i},s=function(t){const{controller:e,token:n,typeObject:i}=t,r=ks(i.type),s=ks(i.default),o=r&&s,a=r&&!s,l=!r&&s,c=ho(i.type),u=po(t.typeObject.default);if(a)return c;if(l)return u;if(c!==u){throw new Error(`The specified default value for the Stimulus Value "${e?`${e}.${n}`:n}" must match the defined type "${c}". The provided default value of "${i.default}" is of type "${u}".`)}if(o)return c}(r),o=po(i),a=ho(i),l=s||o||a;if(l)return l;const c=e?`${e}.${i}`:n;throw new Error(`Unknown value type "${c}" for "${n}" value`)}(t);return{type:r,key:i,name:vs(i),get defaultValue(){return function(t){const e=ho(t);if(e)return fo[e];const n=xs(t,"default"),i=xs(t,"type"),r=t;if(n)return r.default;if(i){const{type:t}=r,e=ho(t);if(e)return fo[e]}return t}(n)},get hasCustomDefaultValue(){return void 0!==po(n)},reader:mo[r],writer:go[r]||go.default}}({controller:n,token:t,typeDefinition:e})}function ho(t){switch(t){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function po(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}return Array.isArray(t)?"array":"[object Object]"===Object.prototype.toString.call(t)?"object":void 0}const fo={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},mo={array(t){const e=JSON.parse(t);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${t}" of type "${po(e)}"`);return e},boolean(t){return!("0"==t||"false"==String(t).toLowerCase())},number(t){return Number(t.replace(/_/g,""))},object(t){const e=JSON.parse(t);if(null===e||"object"!=typeof e||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${t}" of type "${po(e)}"`);return e},string(t){return t}},go={default:function(t){return`${t}`},array:vo,object:vo};function vo(t){return JSON.stringify(t)}class yo{constructor(t){this.context=t}static get shouldLoad(){return!0}static afterLoad(t,e){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(t,{target:e=this.element,detail:n={},prefix:i=this.identifier,bubbles:r=!0,cancelable:s=!0}={}){const o=new CustomEvent(i?`${i}:${t}`:t,{detail:n,bubbles:r,cancelable:s});return e.dispatchEvent(o),o}}yo.blessings=[function(t){return zs(t,"classes").reduce(((t,e)=>{return Object.assign(t,{[`${n=e}Class`]:{get(){const{classes:t}=this;if(t.has(n))return t.get(n);{const e=t.getAttributeName(n);throw new Error(`Missing attribute "${e}"`)}}},[`${n}Classes`]:{get(){return this.classes.getAll(n)}},[`has${bs(n)}Class`]:{get(){return this.classes.has(n)}}});var n}),{})},function(t){return zs(t,"targets").reduce(((t,e)=>{return Object.assign(t,{[`${n=e}Target`]:{get(){const t=this.targets.find(n);if(t)return t;throw new Error(`Missing target element "${n}" for "${this.identifier}" controller`)}},[`${n}Targets`]:{get(){return this.targets.findAll(n)}},[`has${bs(n)}Target`]:{get(){return this.targets.has(n)}}});var n}),{})},function(t){const e=Hs(t,"values"),n={valueDescriptorMap:{get(){return e.reduce(((t,e)=>{const n=uo(e,this.identifier),i=this.data.getAttributeNameForKey(n.key);return Object.assign(t,{[i]:n})}),{})}}};return e.reduce(((t,e)=>Object.assign(t,function(t,e){const n=uo(t,e),{key:i,name:r,reader:s,writer:o}=n;return{[r]:{get(){const t=this.data.get(i);return null!==t?s(t):n.defaultValue},set(t){void 0===t?this.data.delete(i):this.data.set(i,o(t))}},[`has${bs(r)}`]:{get(){return this.data.has(i)||n.hasCustomDefaultValue}}}}(e))),n)},function(t){return zs(t,"outlets").reduce(((t,e)=>Object.assign(t,function(t){const e=ys(t);return{[`${e}Outlet`]:{get(){const e=this.outlets.find(t),n=this.outlets.getSelectorForOutletName(t);if(e){const n=co(this,e,t);if(n)return n;throw new Error(`The provided outlet element is missing an outlet controller "${t}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${t}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${n}".`)}},[`${e}Outlets`]:{get(){const e=this.outlets.findAll(t);return e.length>0?e.map((e=>{const n=co(this,e,t);if(n)return n;console.warn(`The provided outlet element is missing an outlet controller "${t}" instance for host controller "${this.identifier}"`,e)})).filter((t=>t)):[]}},[`${e}OutletElement`]:{get(){const e=this.outlets.find(t),n=this.outlets.getSelectorForOutletName(t);if(e)return e;throw new Error(`Missing outlet element "${t}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${n}".`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(t)}},[`has${bs(e)}Outlet`]:{get(){return this.outlets.has(t)}}}}(e))),{})}],yo.targets=[],yo.outlets=[],yo.values={};class bo extends yo{connect(){this.hidden="password"===this.inputTarget.type,this.class=this.hasHiddenClass?this.hiddenClass:"d-none"}toggle(t){t.preventDefault(),this.inputTarget.type=this.hidden?"text":"password",this.hidden=!this.hidden,this.iconTargets.forEach((t=>t.classList.toggle(this.class)))}}bo.targets=["input","icon"],bo.classes=["hidden"];var wo=bo;
/*!
 * Glide.js v3.6.0
 * (c) 2013-2023 Jędrzej Chałubek (https://github.com/jedrzejchalubek/)
 * Released under the MIT License.
 */
function ko(t){return ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ko(t)}function xo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function So(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Co(t,e,n){return e&&So(t.prototype,e),n&&So(t,n),t}function _o(t){return _o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_o(t)}function To(t,e){return To=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},To(t,e)}function Mo(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Oo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_o(t);if(e){var r=_o(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Mo(this,n)}}function Eo(){return Eo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_o(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Eo.apply(this,arguments)}var Ao={type:"slider",startAt:0,perView:1,focusAt:0,gap:10,autoplay:!1,hoverpause:!0,keyboard:!0,bound:!1,swipeThreshold:80,dragThreshold:120,perSwipe:"",touchRatio:.5,touchAngle:45,animationDuration:400,rewind:!0,rewindDuration:800,animationTimingFunc:"cubic-bezier(.165, .840, .440, 1)",waitForTransition:!0,throttle:10,direction:"ltr",peek:0,cloningRatio:1,breakpoints:{},lazy:!1,lazyScrollThreshold:1.2,lazyInitialSlidesLoaded:2,classes:{swipeable:"glide--swipeable",dragging:"glide--dragging",direction:{ltr:"glide--ltr",rtl:"glide--rtl"},type:{slider:"glide--slider",carousel:"glide--carousel"},slide:{clone:"glide__slide--clone",active:"glide__slide--active"},arrow:{disabled:"glide__arrow--disabled"},nav:{active:"glide__bullet--active"}}};function No(t){console.error("[Glide warn]: ".concat(t))}function Do(t){return parseInt(t)}function Lo(t){return"string"==typeof t}function Io(t){var e=ko(t);return"function"===e||"object"===e&&!!t}function Po(t){return"function"==typeof t}function Bo(t){return void 0===t}function jo(t){return t.constructor===Array}function Fo(t,e,n){Object.defineProperty(t,e,n)}function Ro(t,e){var n=Object.assign({},t,e);return e.hasOwnProperty("classes")&&(n.classes=Object.assign({},t.classes,e.classes),e.classes.hasOwnProperty("direction")&&(n.classes.direction=Object.assign({},t.classes.direction,e.classes.direction)),e.classes.hasOwnProperty("type")&&(n.classes.type=Object.assign({},t.classes.type,e.classes.type)),e.classes.hasOwnProperty("slide")&&(n.classes.slide=Object.assign({},t.classes.slide,e.classes.slide)),e.classes.hasOwnProperty("arrow")&&(n.classes.arrow=Object.assign({},t.classes.arrow,e.classes.arrow)),e.classes.hasOwnProperty("nav")&&(n.classes.nav=Object.assign({},t.classes.nav,e.classes.nav))),e.hasOwnProperty("breakpoints")&&(n.breakpoints=Object.assign({},t.breakpoints,e.breakpoints)),n}var $o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xo(this,t),this.events=e,this.hop=e.hasOwnProperty}return Co(t,[{key:"on",value:function(t,e){if(!jo(t)){this.hop.call(this.events,t)||(this.events[t]=[]);var n=this.events[t].push(e)-1;return{remove:function(){delete this.events[t][n]}}}for(var i=0;i<t.length;i++)this.on(t[i],e)}},{key:"emit",value:function(t,e){if(jo(t))for(var n=0;n<t.length;n++)this.emit(t[n],e);else this.hop.call(this.events,t)&&this.events[t].forEach((function(t){t(e||{})}))}}]),t}(),Vo=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};xo(this,t),this._c={},this._t=[],this._e=new $o,this.disabled=!1,this.selector=e,this.settings=Ro(Ao,n),this.index=this.settings.startAt}return Co(t,[{key:"mount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._e.emit("mount.before"),Io(t)?this._c=function(t,e,n){var i={};for(var r in e)Po(e[r])?i[r]=e[r](t,i,n):No("Extension must be a function");for(var s in i)Po(i[s].mount)&&i[s].mount();return i}(this,t,this._e):No("You need to provide a object on `mount()`"),this._e.emit("mount.after"),this}},{key:"mutate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return jo(t)?this._t=t:No("You need to provide a array on `mutate()`"),this}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.settings=Ro(this.settings,t),t.hasOwnProperty("startAt")&&(this.index=t.startAt),this._e.emit("update"),this}},{key:"go",value:function(t){return this._c.Run.make(t),this}},{key:"move",value:function(t){return this._c.Transition.disable(),this._c.Move.make(t),this}},{key:"destroy",value:function(){return this._e.emit("destroy"),this}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t&&(this.settings.autoplay=t),this._e.emit("play"),this}},{key:"pause",value:function(){return this._e.emit("pause"),this}},{key:"disable",value:function(){return this.disabled=!0,this}},{key:"enable",value:function(){return this.disabled=!1,this}},{key:"on",value:function(t,e){return this._e.on(t,e),this}},{key:"isType",value:function(t){return this.settings.type===t}},{key:"settings",get:function(){return this._o},set:function(t){Io(t)?this._o=t:No("Options must be an `object` instance.")}},{key:"index",get:function(){return this._i},set:function(t){this._i=Do(t)}},{key:"type",get:function(){return this.settings.type}},{key:"disabled",get:function(){return this._d},set:function(t){this._d=!!t}}]),t}();function zo(){return(new Date).getTime()}function Ho(t,e,n){var i,r,s,o,a=0;n||(n={});var l=function(){a=!1===n.leading?0:zo(),i=null,o=t.apply(r,s),i||(r=s=null)},c=function(){var c=zo();a||!1!==n.leading||(a=c);var u=e-(c-a);return r=this,s=arguments,u<=0||u>e?(i&&(clearTimeout(i),i=null),a=c,o=t.apply(r,s),i||(r=s=null)):i||!1===n.trailing||(i=setTimeout(l,u)),o};return c.cancel=function(){clearTimeout(i),a=0,i=r=s=null},c}var qo={ltr:["marginLeft","marginRight"],rtl:["marginRight","marginLeft"]};function Ko(t){if(t&&t.parentNode){for(var e=t.parentNode.firstChild,n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}return[]}function Wo(t){return!!(t&&t instanceof window.HTMLElement)}function Uo(t){return Array.prototype.slice.call(t)}var Go='[data-glide-el="track"]';var Jo=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xo(this,t),this.listeners=e}return Co(t,[{key:"on",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Lo(t)&&(t=[t]);for(var r=0;r<t.length;r++)this.listeners[t[r]]=n,e.addEventListener(t[r],this.listeners[t[r]],i)}},{key:"off",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Lo(t)&&(t=[t]);for(var i=0;i<t.length;i++)e.removeEventListener(t[i],this.listeners[t[i]],n)}},{key:"destroy",value:function(){delete this.listeners}}]),t}();var Yo=["ltr","rtl"],Qo={">":"<","<":">","=":"="};function Xo(t,e){return{modify:function(t){return e.Direction.is("rtl")?-t:t}}}function Zo(t,e){return{modify:function(t){var n=Math.floor(t/e.Sizes.slideWidth);return t+e.Gaps.value*n}}}function ta(t,e){return{modify:function(t){return t+e.Clones.grow/2}}}function ea(t,e){return{modify:function(n){if(t.settings.focusAt>=0){var i=e.Peek.value;return Io(i)?n-i.before:n-i}return n}}}function na(t,e){return{modify:function(n){var i=e.Gaps.value,r=e.Sizes.width,s=t.settings.focusAt,o=e.Sizes.slideWidth;return"center"===s?n-(r/2-o/2):n-o*s-i*s}}}var ia=!1;try{var ra=Object.defineProperty({},"passive",{get:function(){ia=!0}});window.addEventListener("testPassive",null,ra),window.removeEventListener("testPassive",null,ra)}catch(t){}var sa=ia,oa=["touchstart","mousedown"],aa=["touchmove","mousemove"],la=["touchend","touchcancel","mouseup","mouseleave"],ca=["mousedown","mousemove","mouseup","mouseleave"];function ua(t,e,n){var i=new Jo,r=0,s=0,o=0,a=!1,l=!!sa&&{passive:!0},c={mount:function(){this.bindSwipeStart()},start:function(e){if(!a&&!t.disabled){this.disable();var i=this.touches(e);r=null,s=Do(i.pageX),o=Do(i.pageY),this.bindSwipeMove(),this.bindSwipeEnd(),n.emit("swipe.start")}},move:function(i){if(!t.disabled){var a=t.settings,l=a.touchAngle,c=a.touchRatio,u=a.classes,d=this.touches(i),h=Do(d.pageX)-s,p=Do(d.pageY)-o,f=Math.abs(h<<2),m=Math.abs(p<<2),g=Math.sqrt(f+m),v=Math.sqrt(m);if(!(180*(r=Math.asin(v/g))/Math.PI<l))return!1;i.stopPropagation(),e.Move.make(h*parseFloat(c)),e.Html.root.classList.add(u.dragging),n.emit("swipe.move")}},end:function(i){if(!t.disabled){var o=t.settings,a=o.perSwipe,l=o.touchAngle,c=o.classes,u=this.touches(i),d=this.threshold(i),h=u.pageX-s,p=180*r/Math.PI;this.enable(),h>d&&p<l?e.Run.make(e.Direction.resolve("".concat(a,"<"))):h<-d&&p<l?e.Run.make(e.Direction.resolve("".concat(a,">"))):e.Move.make(),e.Html.root.classList.remove(c.dragging),this.unbindSwipeMove(),this.unbindSwipeEnd(),n.emit("swipe.end")}},bindSwipeStart:function(){var n=this,r=t.settings,s=r.swipeThreshold,o=r.dragThreshold;s&&i.on(oa[0],e.Html.wrapper,(function(t){n.start(t)}),l),o&&i.on(oa[1],e.Html.wrapper,(function(t){n.start(t)}),l)},unbindSwipeStart:function(){i.off(oa[0],e.Html.wrapper,l),i.off(oa[1],e.Html.wrapper,l)},bindSwipeMove:function(){var n=this;i.on(aa,e.Html.wrapper,Ho((function(t){n.move(t)}),t.settings.throttle),l)},unbindSwipeMove:function(){i.off(aa,e.Html.wrapper,l)},bindSwipeEnd:function(){var t=this;i.on(la,e.Html.wrapper,(function(e){t.end(e)}))},unbindSwipeEnd:function(){i.off(la,e.Html.wrapper)},touches:function(t){return ca.indexOf(t.type)>-1?t:t.touches[0]||t.changedTouches[0]},threshold:function(e){var n=t.settings;return ca.indexOf(e.type)>-1?n.dragThreshold:n.swipeThreshold},enable:function(){return a=!1,e.Transition.enable(),this},disable:function(){return a=!0,e.Transition.disable(),this}};return n.on("build.after",(function(){e.Html.root.classList.add(t.settings.classes.swipeable)})),n.on("destroy",(function(){c.unbindSwipeStart(),c.unbindSwipeMove(),c.unbindSwipeEnd(),i.destroy()})),c}function da(t,e,n){var i=new Jo,r={mount:function(){this.bind()},bind:function(){i.on("dragstart",e.Html.wrapper,this.dragstart)},unbind:function(){i.off("dragstart",e.Html.wrapper)},dragstart:function(t){t.preventDefault()}};return n.on("destroy",(function(){r.unbind(),i.destroy()})),r}var ha='[data-glide-el^="controls"]',pa="".concat(ha,' [data-glide-dir*="<"]'),fa="".concat(ha,' [data-glide-dir*=">"]');function ma(t,e,n){var i=new Jo,r=!!sa&&{passive:!0},s={mount:function(){this._n=e.Html.root.querySelectorAll('[data-glide-el="controls[nav]"]'),this._c=e.Html.root.querySelectorAll(ha),this._arrowControls={previous:e.Html.root.querySelectorAll(pa),next:e.Html.root.querySelectorAll(fa)},this.addBindings()},setActive:function(){for(var t=0;t<this._n.length;t++)this.addClass(this._n[t].children)},removeActive:function(){for(var t=0;t<this._n.length;t++)this.removeClass(this._n[t].children)},addClass:function(e){var n=t.settings,i=e[t.index];i&&i&&(i.classList.add(n.classes.nav.active),Ko(i).forEach((function(t){t.classList.remove(n.classes.nav.active)})))},removeClass:function(e){var n=e[t.index];n&&n.classList.remove(t.settings.classes.nav.active)},setArrowState:function(){if(!t.settings.rewind){var n=s._arrowControls.next,i=s._arrowControls.previous;this.resetArrowState(n,i),0===t.index&&this.disableArrow(i),t.index===e.Run.length&&this.disableArrow(n)}},resetArrowState:function(){for(var e=t.settings,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];i.forEach((function(t){Uo(t).forEach((function(t){t.classList.remove(e.classes.arrow.disabled)}))}))},disableArrow:function(){for(var e=t.settings,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];i.forEach((function(t){Uo(t).forEach((function(t){t.classList.add(e.classes.arrow.disabled)}))}))},addBindings:function(){for(var t=0;t<this._c.length;t++)this.bind(this._c[t].children)},removeBindings:function(){for(var t=0;t<this._c.length;t++)this.unbind(this._c[t].children)},bind:function(t){for(var e=0;e<t.length;e++)i.on("click",t[e],this.click),i.on("touchstart",t[e],this.click,r)},unbind:function(t){for(var e=0;e<t.length;e++)i.off(["click","touchstart"],t[e])},click:function(t){sa||"touchstart"!==t.type||t.preventDefault();var n=t.currentTarget.getAttribute("data-glide-dir");e.Run.make(e.Direction.resolve(n))}};return Fo(s,"items",{get:function(){return s._c}}),n.on(["mount.after","move.after"],(function(){s.setActive()})),n.on(["mount.after","run"],(function(){s.setArrowState()})),n.on("destroy",(function(){s.removeBindings(),s.removeActive(),i.destroy()})),s}function ga(t,e,n){var i=new Jo,r={mount:function(){this.enable(),this.start(),t.settings.hoverpause&&this.bind()},enable:function(){this._e=!0},disable:function(){this._e=!1},start:function(){var i=this;this._e&&(this.enable(),t.settings.autoplay&&Bo(this._i)&&(this._i=setInterval((function(){i.stop(),e.Run.make(">"),i.start(),n.emit("autoplay")}),this.time)))},stop:function(){this._i=clearInterval(this._i)},bind:function(){var t=this;i.on("mouseover",e.Html.root,(function(){t._e&&t.stop()})),i.on("mouseout",e.Html.root,(function(){t._e&&t.start()}))},unbind:function(){i.off(["mouseover","mouseout"],e.Html.root)}};return Fo(r,"time",{get:function(){var n=e.Html.slides[t.index].getAttribute("data-glide-autoplay");return Do(n||t.settings.autoplay)}}),n.on(["destroy","update"],(function(){r.unbind()})),n.on(["run.before","swipe.start","update"],(function(){r.stop()})),n.on(["pause","destroy"],(function(){r.disable(),r.stop()})),n.on(["run.after","swipe.end"],(function(){r.start()})),n.on(["play"],(function(){r.enable(),r.start()})),n.on("update",(function(){r.mount()})),n.on("destroy",(function(){i.destroy()})),r}function va(t){return Io(t)?(e=t,Object.keys(e).sort().reduce((function(t,n){return t[n]=e[n],t[n],t}),{})):(No("Breakpoints option must be an object"),{});var e}function ya(t,e,n){var i=new Jo,r=t.settings,s=va(r.breakpoints),o=Object.assign({},r),a={match:function(t){if(void 0!==window.matchMedia)for(var e in t)if(t.hasOwnProperty(e)&&window.matchMedia("(max-width: ".concat(e,"px)")).matches)return t[e];return o}};return Object.assign(r,a.match(s)),i.on("resize",window,Ho((function(){t.settings=Ro(r,a.match(s))}),t.settings.throttle)),n.on("update",(function(){s=va(s),o=Object.assign({},r)})),n.on("destroy",(function(){i.off("resize",window)})),a}var ba={Html:function(t,e,n){var i={mount:function(){this.root=t.selector,this.track=this.root.querySelector(Go),this.collectSlides()},collectSlides:function(){this.slides=Uo(this.wrapper.children).filter((function(e){return!e.classList.contains(t.settings.classes.slide.clone)}))}};return Fo(i,"root",{get:function(){return i._r},set:function(t){Lo(t)&&(t=document.querySelector(t)),Wo(t)?i._r=t:No("Root element must be a existing Html node")}}),Fo(i,"track",{get:function(){return i._t},set:function(t){Wo(t)?i._t=t:No("Could not find track element. Please use ".concat(Go," attribute."))}}),Fo(i,"wrapper",{get:function(){return i.track.children[0]}}),n.on("update",(function(){i.collectSlides()})),i},Translate:function(t,e,n){var i={set:function(n){var i=function(t,e,n){var i=[Zo,ta,ea,na].concat(t._t,[Xo]);return{mutate:function(r){for(var s=0;s<i.length;s++){var o=i[s];Po(o)&&Po(o().modify)?r=o(t,e,n).modify(r):No("Transformer should be a function that returns an object with `modify()` method")}return r}}}(t,e).mutate(n),r="translate3d(".concat(-1*i,"px, 0px, 0px)");e.Html.wrapper.style.mozTransform=r,e.Html.wrapper.style.webkitTransform=r,e.Html.wrapper.style.transform=r},remove:function(){e.Html.wrapper.style.transform=""},getStartIndex:function(){var n=e.Sizes.length,i=t.index,r=t.settings.perView;return e.Run.isOffset(">")||e.Run.isOffset("|>")?n+(i-r):(i+r)%n},getTravelDistance:function(){var n=e.Sizes.slideWidth*t.settings.perView;return e.Run.isOffset(">")||e.Run.isOffset("|>")?-1*n:n}};return n.on("move",(function(r){if(!t.isType("carousel")||!e.Run.isOffset())return i.set(r.movement);e.Transition.after((function(){n.emit("translate.jump"),i.set(e.Sizes.slideWidth*t.index)}));var s=e.Sizes.slideWidth*e.Translate.getStartIndex();return i.set(s-e.Translate.getTravelDistance())})),n.on("destroy",(function(){i.remove()})),i},Transition:function(t,e,n){var i=!1,r={compose:function(e){var n=t.settings;return i?"".concat(e," 0ms ").concat(n.animationTimingFunc):"".concat(e," ").concat(this.duration,"ms ").concat(n.animationTimingFunc)},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";e.Html.wrapper.style.transition=this.compose(t)},remove:function(){e.Html.wrapper.style.transition=""},after:function(t){setTimeout((function(){t()}),this.duration)},enable:function(){i=!1,this.set()},disable:function(){i=!0,this.set()}};return Fo(r,"duration",{get:function(){var n=t.settings;return t.isType("slider")&&e.Run.offset?n.rewindDuration:n.animationDuration}}),n.on("move",(function(){r.set()})),n.on(["build.before","resize","translate.jump"],(function(){r.disable()})),n.on("run",(function(){r.enable()})),n.on("destroy",(function(){r.remove()})),r},Direction:function(t,e,n){var i={mount:function(){this.value=t.settings.direction},resolve:function(t){var e=t.slice(0,1);return this.is("rtl")?t.split(e).join(Qo[e]):t},is:function(t){return this.value===t},addClass:function(){e.Html.root.classList.add(t.settings.classes.direction[this.value])},removeClass:function(){e.Html.root.classList.remove(t.settings.classes.direction[this.value])}};return Fo(i,"value",{get:function(){return i._v},set:function(t){Yo.indexOf(t)>-1?i._v=t:No("Direction value must be `ltr` or `rtl`")}}),n.on(["destroy","update"],(function(){i.removeClass()})),n.on("update",(function(){i.mount()})),n.on(["build.before","update"],(function(){i.addClass()})),i},Peek:function(t,e,n){var i={mount:function(){this.value=t.settings.peek}};return Fo(i,"value",{get:function(){return i._v},set:function(t){Io(t)?(t.before=Do(t.before),t.after=Do(t.after)):t=Do(t),i._v=t}}),Fo(i,"reductor",{get:function(){var e=i.value,n=t.settings.perView;return Io(e)?e.before/n+e.after/n:2*e/n}}),n.on(["resize","update"],(function(){i.mount()})),i},Sizes:function(t,e,n){var i={setupSlides:function(){for(var t="".concat(this.slideWidth,"px"),n=e.Html.slides,i=0;i<n.length;i++)n[i].style.width=t},setupWrapper:function(){e.Html.wrapper.style.width="".concat(this.wrapperSize,"px")},remove:function(){for(var t=e.Html.slides,n=0;n<t.length;n++)t[n].style.width="";e.Html.wrapper.style.width=""}};return Fo(i,"length",{get:function(){return e.Html.slides.length}}),Fo(i,"width",{get:function(){return e.Html.track.offsetWidth}}),Fo(i,"wrapperSize",{get:function(){return i.slideWidth*i.length+e.Gaps.grow+e.Clones.grow}}),Fo(i,"slideWidth",{get:function(){return i.width/t.settings.perView-e.Peek.reductor-e.Gaps.reductor}}),n.on(["build.before","resize","update"],(function(){i.setupSlides(),i.setupWrapper()})),n.on("destroy",(function(){i.remove()})),i},Gaps:function(t,e,n){var i={apply:function(t){for(var n=0,i=t.length;n<i;n++){var r=t[n].style,s=e.Direction.value;r[qo[s][0]]=0!==n?"".concat(this.value/2,"px"):"",n!==t.length-1?r[qo[s][1]]="".concat(this.value/2,"px"):r[qo[s][1]]=""}},remove:function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e].style;i.marginLeft="",i.marginRight=""}}};return Fo(i,"value",{get:function(){return Do(t.settings.gap)}}),Fo(i,"grow",{get:function(){return i.value*e.Sizes.length}}),Fo(i,"reductor",{get:function(){var e=t.settings.perView;return i.value*(e-1)/e}}),n.on(["build.after","update"],Ho((function(){i.apply(e.Html.wrapper.children)}),30)),n.on("destroy",(function(){i.remove(e.Html.wrapper.children)})),i},Move:function(t,e,n){var i={mount:function(){this._o=0},make:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.offset=i,n.emit("move",{movement:this.value}),e.Transition.after((function(){n.emit("move.after",{movement:t.value})}))}};return Fo(i,"offset",{get:function(){return i._o},set:function(t){i._o=Bo(t)?0:Do(t)}}),Fo(i,"translate",{get:function(){return e.Sizes.slideWidth*t.index}}),Fo(i,"value",{get:function(){var t=this.offset,n=this.translate;return e.Direction.is("rtl")?n+t:n-t}}),n.on(["build.before","run"],(function(){i.make()})),i},Clones:function(t,e,n){var i={mount:function(){this.items=[],t.isType("carousel")&&(this.items=this.collect())},collect:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=e.Html.slides,r=t.settings,s=r.perView,o=r.classes,a=r.cloningRatio;if(0!==i.length)for(var l=s+ +!!t.settings.peek+Math.round(s/2),c=i.slice(0,l).reverse(),u=i.slice(-1*l),d=0;d<Math.max(a,Math.floor(s/i.length));d++){for(var h=0;h<c.length;h++){var p=c[h].cloneNode(!0);p.classList.add(o.slide.clone),n.push(p)}for(var f=0;f<u.length;f++){var m=u[f].cloneNode(!0);m.classList.add(o.slide.clone),n.unshift(m)}}return n},append:function(){for(var t=this.items,n=e.Html,i=n.wrapper,r=n.slides,s=Math.floor(t.length/2),o=t.slice(0,s).reverse(),a=t.slice(-1*s).reverse(),l="".concat(e.Sizes.slideWidth,"px"),c=0;c<a.length;c++)i.appendChild(a[c]);for(var u=0;u<o.length;u++)i.insertBefore(o[u],r[0]);for(var d=0;d<t.length;d++)t[d].style.width=l},remove:function(){for(var t=this.items,n=0;n<t.length;n++)e.Html.wrapper.removeChild(t[n])}};return Fo(i,"grow",{get:function(){return(e.Sizes.slideWidth+e.Gaps.value)*i.items.length}}),n.on("update",(function(){i.remove(),i.mount(),i.append()})),n.on("build.before",(function(){t.isType("carousel")&&i.append()})),n.on("destroy",(function(){i.remove()})),i},Resize:function(t,e,n){var i=new Jo,r={mount:function(){this.bind()},bind:function(){i.on("resize",window,Ho((function(){n.emit("resize")}),t.settings.throttle))},unbind:function(){i.off("resize",window)}};return n.on("destroy",(function(){r.unbind(),i.destroy()})),r},Build:function(t,e,n){var i={mount:function(){n.emit("build.before"),this.typeClass(),this.activeClass(),n.emit("build.after")},typeClass:function(){e.Html.root.classList.add(t.settings.classes.type[t.settings.type])},activeClass:function(){var n=t.settings.classes,i=e.Html.slides[t.index];i&&(i.classList.add(n.slide.active),Ko(i).forEach((function(t){t.classList.remove(n.slide.active)})))},removeClasses:function(){var n=t.settings.classes,i=n.type,r=n.slide;e.Html.root.classList.remove(i[t.settings.type]),e.Html.slides.forEach((function(t){t.classList.remove(r.active)}))}};return n.on(["destroy","update"],(function(){i.removeClasses()})),n.on(["resize","update"],(function(){i.mount()})),n.on("move.after",(function(){i.activeClass()})),i},Run:function(t,e,n){var i={mount:function(){this._o=!1},make:function(i){var r=this;t.disabled||(!t.settings.waitForTransition||t.disable(),this.move=i,n.emit("run.before",this.move),this.calculate(),n.emit("run",this.move),e.Transition.after((function(){r.isStart()&&n.emit("run.start",r.move),r.isEnd()&&n.emit("run.end",r.move),r.isOffset()&&(r._o=!1,n.emit("run.offset",r.move)),n.emit("run.after",r.move),t.enable()})))},calculate:function(){var e=this.move,n=this.length,r=e.steps,s=e.direction,o=1;if("="===s)return t.settings.bound&&Do(r)>n?void(t.index=n):void(t.index=r);if(">"!==s||">"!==r)if("<"!==s||"<"!==r){if("|"===s&&(o=t.settings.perView||1),">"===s||"|"===s&&">"===r){var a=function(e){var n=t.index;if(t.isType("carousel"))return n+e;return n+(e-n%e)}(o);return a>n&&(this._o=!0),void(t.index=function(e,n){var r=i.length;if(e<=r)return e;if(t.isType("carousel"))return e-(r+1);if(t.settings.rewind)return i.isBound()&&!i.isEnd()?r:0;if(i.isBound())return r;return Math.floor(r/n)*n}(a,o))}if("<"===s||"|"===s&&"<"===r){var l=function(e){var n=t.index;if(t.isType("carousel"))return n-e;var i=Math.ceil(n/e);return(i-1)*e}(o);return l<0&&(this._o=!0),void(t.index=function(e,n){var r=i.length;if(e>=0)return e;if(t.isType("carousel"))return e+(r+1);if(t.settings.rewind)return i.isBound()&&i.isStart()?r:Math.floor(r/n)*n;return 0}(l,o))}No("Invalid direction pattern [".concat(s).concat(r,"] has been used"))}else t.index=0;else t.index=n},isStart:function(){return t.index<=0},isEnd:function(){return t.index>=this.length},isOffset:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return t?!!this._o&&("|>"===t?"|"===this.move.direction&&">"===this.move.steps:"|<"===t?"|"===this.move.direction&&"<"===this.move.steps:this.move.direction===t):this._o},isBound:function(){return t.isType("slider")&&"center"!==t.settings.focusAt&&t.settings.bound}};return Fo(i,"move",{get:function(){return this._m},set:function(t){var e=t.substr(1);this._m={direction:t.substr(0,1),steps:e?Do(e)?Do(e):e:0}}}),Fo(i,"length",{get:function(){var n=t.settings,i=e.Html.slides.length;return this.isBound()?i-1-(Do(n.perView)-1)+Do(n.focusAt):i-1}}),Fo(i,"offset",{get:function(){return this._o}}),i}},wa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&To(t,e)}(n,t);var e=Oo(n);function n(){return xo(this,n),e.apply(this,arguments)}return Co(n,[{key:"mount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Eo(_o(n.prototype),"mount",this).call(this,Object.assign({},ba,t))}}]),n}(Vo);function ka(t){this.content=t}ka.prototype={constructor:ka,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var i=n&&n!=t?this.remove(n):this,r=i.find(t),s=i.content.slice();return-1==r?s.push(n||t,e):(s[r+1]=e,n&&(s[r]=n)),new ka(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new ka(n)},addToStart:function(t,e){return new ka([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new ka(n)},addBefore:function(t,e,n){var i=this.remove(e),r=i.content.slice(),s=i.find(t);return r.splice(-1==s?r.length:s,0,e,n),new ka(r)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=ka.from(t)).size?new ka(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=ka.from(t)).size?new ka(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=ka.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach((function(e,n){t[e]=n})),t},get size(){return this.content.length>>1}},ka.from=function(t){if(t instanceof ka)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new ka(e)};var xa=ka;function Sa(t,e,n){for(let i=0;;i++){if(i==t.childCount||i==e.childCount)return t.childCount==e.childCount?null:n;let r=t.child(i),s=e.child(i);if(r!=s){if(!r.sameMarkup(s))return n;if(r.isText&&r.text!=s.text){for(let t=0;r.text[t]==s.text[t];t++)n++;return n}if(r.content.size||s.content.size){let t=Sa(r.content,s.content,n+1);if(null!=t)return t}n+=r.nodeSize}else n+=r.nodeSize}}function Ca(t,e,n,i){for(let r=t.childCount,s=e.childCount;;){if(0==r||0==s)return r==s?null:{a:n,b:i};let o=t.child(--r),a=e.child(--s),l=o.nodeSize;if(o!=a){if(!o.sameMarkup(a))return{a:n,b:i};if(o.isText&&o.text!=a.text){let t=0,e=Math.min(o.text.length,a.text.length);for(;t<e&&o.text[o.text.length-t-1]==a.text[a.text.length-t-1];)t++,n--,i--;return{a:n,b:i}}if(o.content.size||a.content.size){let t=Ca(o.content,a.content,n-1,i-1);if(t)return t}n-=l,i-=l}else n-=l,i-=l}}class _a{constructor(t,e){if(this.content=t,this.size=e||0,null==e)for(let e=0;e<t.length;e++)this.size+=t[e].nodeSize}nodesBetween(t,e,n,i=0,r){for(let s=0,o=0;o<e;s++){let a=this.content[s],l=o+a.nodeSize;if(l>t&&!1!==n(a,i+o,r||null,s)&&a.content.size){let r=o+1;a.nodesBetween(Math.max(0,t-r),Math.min(a.content.size,e-r),n,i+r)}o=l}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,n,i){let r="",s=!0;return this.nodesBetween(t,e,((o,a)=>{let l=o.isText?o.text.slice(Math.max(t,a)-a,e-a):o.isLeaf?i?"function"==typeof i?i(o):i:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&l||o.isTextblock)&&n&&(s?s=!1:r+=n),r+=l}),0),r}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,n=t.firstChild,i=this.content.slice(),r=0;for(e.isText&&e.sameMarkup(n)&&(i[i.length-1]=e.withText(e.text+n.text),r=1);r<t.content.length;r++)i.push(t.content[r]);return new _a(i,this.size+t.size)}cut(t,e=this.size){if(0==t&&e==this.size)return this;let n=[],i=0;if(e>t)for(let r=0,s=0;s<e;r++){let o=this.content[r],a=s+o.nodeSize;a>t&&((s<t||a>e)&&(o=o.isText?o.cut(Math.max(0,t-s),Math.min(o.text.length,e-s)):o.cut(Math.max(0,t-s-1),Math.min(o.content.size,e-s-1))),n.push(o),i+=o.nodeSize),s=a}return new _a(n,i)}cutByIndex(t,e){return t==e?_a.empty:0==t&&e==this.content.length?this:new _a(this.content.slice(t,e))}replaceChild(t,e){let n=this.content[t];if(n==e)return this;let i=this.content.slice(),r=this.size+e.nodeSize-n.nodeSize;return i[t]=e,new _a(i,r)}addToStart(t){return new _a([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new _a(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,n=0;e<this.content.length;e++){let i=this.content[e];t(i,n,e),n+=i.nodeSize}}findDiffStart(t,e=0){return Sa(this,t,e)}findDiffEnd(t,e=this.size,n=t.size){return Ca(this,t,e,n)}findIndex(t,e=-1){if(0==t)return Ma(0,t);if(t==this.size)return Ma(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,i=0;;n++){let r=i+this.child(n).nodeSize;if(r>=t)return r==t||e>0?Ma(n+1,r):Ma(n,i);i=r}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((t=>t.toJSON())):null}static fromJSON(t,e){if(!e)return _a.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new _a(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return _a.empty;let e,n=0;for(let i=0;i<t.length;i++){let r=t[i];n+=r.nodeSize,i&&r.isText&&t[i-1].sameMarkup(r)?(e||(e=t.slice(0,i)),e[e.length-1]=r.withText(e[e.length-1].text+r.text)):e&&e.push(r)}return new _a(e||t,n)}static from(t){if(!t)return _a.empty;if(t instanceof _a)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new _a([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}_a.empty=new _a([],0);const Ta={index:0,offset:0};function Ma(t,e){return Ta.index=t,Ta.offset=e,Ta}function Oa(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!Oa(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!Oa(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}class Ea{constructor(t,e){this.type=t,this.attrs=e}addToSet(t){let e,n=!1;for(let i=0;i<t.length;i++){let r=t[i];if(this.eq(r))return t;if(this.type.excludes(r.type))e||(e=t.slice(0,i));else{if(r.type.excludes(this.type))return t;!n&&r.type.rank>this.type.rank&&(e||(e=t.slice(0,i)),e.push(this),n=!0),e&&e.push(r)}}return e||(e=t.slice()),n||e.push(this),e}removeFromSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}isInSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Oa(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let n=t.marks[e.type];if(!n)throw new RangeError(`There is no mark type ${e.type} in this schema`);return n.create(e.attrs)}static sameSet(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return Ea.none;if(t instanceof Ea)return[t];let e=t.slice();return e.sort(((t,e)=>t.type.rank-e.type.rank)),e}}Ea.none=[];class Aa extends Error{}class Na{constructor(t,e,n){this.content=t,this.openStart=e,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let n=La(this.content,t+this.openStart,e);return n&&new Na(n,this.openStart,this.openEnd)}removeBetween(t,e){return new Na(Da(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return Na.empty;let n=e.openStart||0,i=e.openEnd||0;if("number"!=typeof n||"number"!=typeof i)throw new RangeError("Invalid input for Slice.fromJSON");return new Na(_a.fromJSON(t,e.content),n,i)}static maxOpen(t,e=!0){let n=0,i=0;for(let i=t.firstChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.firstChild)n++;for(let n=t.lastChild;n&&!n.isLeaf&&(e||!n.type.spec.isolating);n=n.lastChild)i++;return new Na(t,n,i)}}function Da(t,e,n){let{index:i,offset:r}=t.findIndex(e),s=t.maybeChild(i),{index:o,offset:a}=t.findIndex(n);if(r==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(Da(s.content,e-r-1,n-r-1)))}function La(t,e,n,i){let{index:r,offset:s}=t.findIndex(e),o=t.maybeChild(r);if(s==e||o.isText)return i&&!i.canReplace(r,r,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=La(o.content,e-s-1,n);return a&&t.replaceChild(r,o.copy(a))}function Ia(t,e,n){if(n.openStart>t.depth)throw new Aa("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Aa("Inconsistent open depths");return Pa(t,e,n,0)}function Pa(t,e,n,i){let r=t.index(i),s=t.node(i);if(r==e.index(i)&&i<t.depth-n.openStart){let o=Pa(t,e,n,i+1);return s.copy(s.content.replaceChild(r,o))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=i||e.depth!=i){let{start:r,end:o}=function(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let t=n-1;t>=0;t--)i=e.node(t).copy(_a.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}(n,t);return $a(s,Va(t,r,o,e,i))}{let i=t.parent,r=i.content;return $a(i,r.cut(0,t.parentOffset).append(n.content).append(r.cut(e.parentOffset)))}}return $a(s,za(t,e,i))}function Ba(t,e){if(!e.type.compatibleContent(t.type))throw new Aa("Cannot join "+e.type.name+" onto "+t.type.name)}function ja(t,e,n){let i=t.node(n);return Ba(i,e.node(n)),i}function Fa(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Ra(t,e,n,i){let r=(e||t).node(n),s=0,o=e?e.index(n):r.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Fa(t.nodeAfter,i),s++));for(let t=s;t<o;t++)Fa(r.child(t),i);e&&e.depth==n&&e.textOffset&&Fa(e.nodeBefore,i)}function $a(t,e){return t.type.checkContent(e),t.copy(e)}function Va(t,e,n,i,r){let s=t.depth>r&&ja(t,e,r+1),o=i.depth>r&&ja(n,i,r+1),a=[];return Ra(null,t,r,a),s&&o&&e.index(r)==n.index(r)?(Ba(s,o),Fa($a(s,Va(t,e,n,i,r+1)),a)):(s&&Fa($a(s,za(t,e,r+1)),a),Ra(e,n,r,a),o&&Fa($a(o,za(n,i,r+1)),a)),Ra(i,null,r,a),new _a(a)}function za(t,e,n){let i=[];if(Ra(null,t,n,i),t.depth>n){Fa($a(ja(t,e,n+1),za(t,e,n+1)),i)}return Ra(e,null,n,i),new _a(i)}Na.empty=new Na(_a.empty,0,0);class Ha{constructor(t,e,n){this.pos=t,this.path=e,this.parentOffset=n,this.depth=e.length/3-1}resolveDepth(t){return null==t?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[3*this.resolveDepth(t)]}index(t){return this.path[3*this.resolveDepth(t)+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}start(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}after(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=t.child(e);return n?t.child(e).cut(n):i}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let n=this.path[3*e],i=0==e?0:this.path[3*e-1]+1;for(let e=0;e<t;e++)i+=n.child(e).nodeSize;return i}marks(){let t=this.parent,e=this.index();if(0==t.content.size)return Ea.none;if(this.textOffset)return t.child(e).marks;let n=t.maybeChild(e-1),i=t.maybeChild(e);if(!n){let t=n;n=i,i=t}let r=n.marks;for(var s=0;s<r.length;s++)!1!==r[s].type.spec.inclusive||i&&r[s].isInSet(i.marks)||(r=r[s--].removeFromSet(r));return r}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let n=e.marks,i=t.parent.maybeChild(t.index());for(var r=0;r<n.length;r++)!1!==n[r].type.spec.inclusive||i&&n[r].isInSet(i.marks)||(n=n[r--].removeFromSet(n));return n}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new Ua(this,t,n);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let n=[],i=0,r=e;for(let e=t;;){let{index:t,offset:s}=e.content.findIndex(r),o=r-s;if(n.push(e,t,i+s),!o)break;if(e=e.child(t),e.isText)break;r=o-1,i+=s+1}return new Ha(e,n,r)}static resolveCached(t,e){let n=Wa.get(t);if(n)for(let t=0;t<n.elts.length;t++){let i=n.elts[t];if(i.pos==e)return i}else Wa.set(t,n=new qa);let i=n.elts[n.i]=Ha.resolve(t,e);return n.i=(n.i+1)%Ka,i}}class qa{constructor(){this.elts=[],this.i=0}}const Ka=12,Wa=new WeakMap;class Ua{constructor(t,e,n){this.$from=t,this.$to=e,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Ga=Object.create(null);class Ja{constructor(t,e,n,i=Ea.none){this.type=t,this.attrs=e,this.marks=i,this.content=n||_a.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,n,i=0){this.content.nodesBetween(t,e,n,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,n,i){return this.content.textBetween(t,e,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,n){return this.type==t&&Oa(this.attrs,e||t.defaultAttrs||Ga)&&Ea.sameSet(this.marks,n||Ea.none)}copy(t=null){return t==this.content?this:new Ja(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new Ja(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,n=!1){if(t==e)return Na.empty;let i=this.resolve(t),r=this.resolve(e),s=n?0:i.sharedDepth(e),o=i.start(s),a=i.node(s).content.cut(i.pos-o,r.pos-o);return new Na(a,i.depth-s,r.depth-s)}replace(t,e,n){return Ia(this.resolve(t),this.resolve(e),n)}nodeAt(t){for(let e=this;;){let{index:n,offset:i}=e.content.findIndex(t);if(e=e.maybeChild(n),!e)return null;if(i==t||e.isText)return e;t-=i+1}}childAfter(t){let{index:e,offset:n}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:n}}childBefore(t){if(0==t)return{node:null,index:0,offset:0};let{index:e,offset:n}=this.content.findIndex(t);if(n<t)return{node:this.content.child(e),index:e,offset:n};let i=this.content.child(e-1);return{node:i,index:e-1,offset:n-i.nodeSize}}resolve(t){return Ha.resolveCached(this,t)}resolveNoCache(t){return Ha.resolve(this,t)}rangeHasMark(t,e,n){let i=!1;return e>t&&this.nodesBetween(t,e,(t=>(n.isInSet(t.marks)&&(i=!0),!i))),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Qa(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,n=_a.empty,i=0,r=n.childCount){let s=this.contentMatchAt(t).matchFragment(n,i,r),o=s&&s.matchFragment(this.content,e);if(!o||!o.validEnd)return!1;for(let t=i;t<r;t++)if(!this.type.allowsMarks(n.child(t).marks))return!1;return!0}canReplaceWith(t,e,n,i){if(i&&!this.type.allowsMarks(i))return!1;let r=this.contentMatchAt(t).matchType(n),s=r&&r.matchFragment(this.content,e);return!!s&&s.validEnd}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content);let t=Ea.none;for(let e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!Ea.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((t=>t.type.name))}`);this.content.forEach((t=>t.check()))}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((t=>t.toJSON()))),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let n;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}let i=_a.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,i,n)}}Ja.prototype.text=void 0;class Ya extends Ja{constructor(t,e,n,i){if(super(t,e,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Qa(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Ya(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Ya(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function Qa(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Xa{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let n=new Za(t,e);if(null==n.next)return Xa.empty;let i=tl(n);n.next&&n.err("Unexpected trailing text");let r=function(t){let e=Object.create(null);return n(ol(t,0));function n(i){let r=[];i.forEach((e=>{t[e].forEach((({term:e,to:n})=>{if(!e)return;let i;for(let t=0;t<r.length;t++)r[t][0]==e&&(i=r[t][1]);ol(t,n).forEach((t=>{i||r.push([e,i=[]]),-1==i.indexOf(t)&&i.push(t)}))}))}));let s=e[i.join(",")]=new Xa(i.indexOf(t.length-1)>-1);for(let t=0;t<r.length;t++){let i=r[t][1].sort(sl);s.next.push({type:r[t][0],next:e[i.join(",")]||n(i)})}return s}}(function(t){let e=[[]];return r(s(t,0),n()),e;function n(){return e.push([])-1}function i(t,n,i){let r={term:i,to:n};return e[t].push(r),r}function r(t,e){t.forEach((t=>t.to=e))}function s(t,e){if("choice"==t.type)return t.exprs.reduce(((t,n)=>t.concat(s(n,e))),[]);if("seq"!=t.type){if("star"==t.type){let o=n();return i(e,o),r(s(t.expr,o),o),[i(o)]}if("plus"==t.type){let o=n();return r(s(t.expr,e),o),r(s(t.expr,o),o),[i(o)]}if("opt"==t.type)return[i(e)].concat(s(t.expr,e));if("range"==t.type){let o=e;for(let e=0;e<t.min;e++){let e=n();r(s(t.expr,o),e),o=e}if(-1==t.max)r(s(t.expr,o),o);else for(let e=t.min;e<t.max;e++){let e=n();i(o,e),r(s(t.expr,o),e),o=e}return[i(o)]}if("name"==t.type)return[i(e,void 0,t.value)];throw new Error("Unknown expr type")}for(let i=0;;i++){let o=s(t.exprs[i],e);if(i==t.exprs.length-1)return o;r(o,e=n())}}}(i));return function(t,e){for(let n=0,i=[t];n<i.length;n++){let t=i[n],r=!t.validEnd,s=[];for(let e=0;e<t.next.length;e++){let{type:n,next:o}=t.next[e];s.push(n.name),!r||n.isText||n.hasRequiredAttrs()||(r=!1),-1==i.indexOf(o)&&i.push(o)}r&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(r,n),r}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,n=t.childCount){let i=this;for(let r=e;i&&r<n;r++)i=i.matchType(t.child(r).type);return i}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let n=0;n<t.next.length;n++)if(this.next[e].type==t.next[n].type)return!0;return!1}fillBefore(t,e=!1,n=0){let i=[this];return function r(s,o){let a=s.matchFragment(t,n);if(a&&(!e||a.validEnd))return _a.from(o.map((t=>t.createAndFill())));for(let t=0;t<s.next.length;t++){let{type:e,next:n}=s.next[t];if(!e.isText&&!e.hasRequiredAttrs()&&-1==i.indexOf(n)){i.push(n);let t=r(n,o.concat(e));if(t)return t}}return null}(this,[])}findWrapping(t){for(let e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),r=i.match;if(r.matchType(t)){let t=[];for(let e=i;e.type;e=e.via)t.push(e.type);return t.reverse()}for(let t=0;t<r.next.length;t++){let{type:s,next:o}=r.next[t];s.isLeaf||s.hasRequiredAttrs()||s.name in e||i.type&&!o.validEnd||(n.push({match:s.contentMatch,type:s,via:i}),e[s.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];return function e(n){t.push(n);for(let i=0;i<n.next.length;i++)-1==t.indexOf(n.next[i].next)&&e(n.next[i].next)}(this),t.map(((e,n)=>{let i=n+(e.validEnd?"*":" ")+" ";for(let n=0;n<e.next.length;n++)i+=(n?", ":"")+e.next[n].type.name+"->"+t.indexOf(e.next[n].next);return i})).join("\n")}}Xa.empty=new Xa(!0);class Za{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function tl(t){let e=[];do{e.push(el(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function el(t){let e=[];do{e.push(nl(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function nl(t){let e=function(t){if(t.eat("(")){let e=tl(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){let e=function(t,e){let n=t.nodeTypes,i=n[e];if(i)return[i];let r=[];for(let t in n){let i=n[t];i.groups.indexOf(e)>-1&&r.push(i)}0==r.length&&t.err("No node type or group '"+e+"' found");return r}(t,t.next).map((e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e})));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}t.err("Unexpected token '"+t.next+"'")}(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=rl(t,e)}return e}function il(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function rl(t,e){let n=il(t),i=n;return t.eat(",")&&(i="}"!=t.next?il(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:i,expr:e}}function sl(t,e){return e-t}function ol(t,e){let n=[];return function e(i){let r=t[i];if(1==r.length&&!r[0].term)return e(r[0].to);n.push(i);for(let t=0;t<r.length;t++){let{term:i,to:s}=r[t];i||-1!=n.indexOf(s)||e(s)}}(e),n.sort(sl)}function al(t){let e=Object.create(null);for(let n in t){let i=t[n];if(!i.hasDefault)return null;e[n]=i.default}return e}function ll(t,e){let n=Object.create(null);for(let i in t){let r=e&&e[i];if(void 0===r){let e=t[i];if(!e.hasDefault)throw new RangeError("No value supplied for attribute "+i);r=e.default}n[i]=r}return n}function cl(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new dl(t[n]);return e}class ul{constructor(t,e,n){this.name=t,this.schema=e,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=cl(n.attrs),this.defaultAttrs=al(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Xa.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:ll(this.attrs,t)}create(t=null,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ja(this,this.computeAttrs(t),_a.from(e),Ea.setFrom(n))}createChecked(t=null,e,n){return e=_a.from(e),this.checkContent(e),new Ja(this,this.computeAttrs(t),e,Ea.setFrom(n))}createAndFill(t=null,e,n){if(t=this.computeAttrs(t),(e=_a.from(e)).size){let t=this.contentMatch.fillBefore(e);if(!t)return null;e=t.append(e)}let i=this.contentMatch.matchFragment(e),r=i&&i.fillBefore(_a.empty,!0);return r?new Ja(this,t,e.append(r),Ea.setFrom(n)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let e=0;e<t.childCount;e++)if(!this.allowsMarks(t.child(e).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}allowsMarkType(t){return null==this.markSet||this.markSet.indexOf(t)>-1}allowsMarks(t){if(null==this.markSet)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(null==this.markSet)return t;let e;for(let n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:Ea.none:t}static compile(t,e){let n=Object.create(null);t.forEach(((t,i)=>n[t]=new ul(t,e,i)));let i=e.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let t in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class dl{constructor(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default}get isRequired(){return!this.hasDefault}}class hl{constructor(t,e,n,i){this.name=t,this.rank=e,this.schema=n,this.spec=i,this.attrs=cl(i.attrs),this.excluded=null;let r=al(this.attrs);this.instance=r?new Ea(this,r):null}create(t=null){return!t&&this.instance?this.instance:new Ea(this,ll(this.attrs,t))}static compile(t,e){let n=Object.create(null),i=0;return t.forEach(((t,r)=>n[t]=new hl(t,i++,e,r))),n}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}excludes(t){return this.excluded.indexOf(t)>-1}}class pl{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let e=this.spec={};for(let n in t)e[n]=t[n];e.nodes=xa.from(t.nodes),e.marks=xa.from(t.marks||{}),this.nodes=ul.compile(this.spec.nodes,this),this.marks=hl.compile(this.spec.marks,this);let n=Object.create(null);for(let t in this.nodes){if(t in this.marks)throw new RangeError(t+" can not be both a node and a mark");let e=this.nodes[t],i=e.spec.content||"",r=e.spec.marks;if(e.contentMatch=n[i]||(n[i]=Xa.parse(i,this.nodes)),e.inlineContent=e.contentMatch.inlineContent,e.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!e.isInline||!e.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=e}e.markSet="_"==r?null:r?fl(this,r.split(" ")):""!=r&&e.inlineContent?null:[]}for(let t in this.marks){let e=this.marks[t],n=e.spec.excludes;e.excluded=null==n?[e]:""==n?[]:fl(this,n.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,n,i){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof ul))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,i)}text(t,e){let n=this.nodes.text;return new Ya(n,n.defaultAttrs,t,Ea.setFrom(e))}mark(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return Ja.fromJSON(this,t)}markFromJSON(t){return Ea.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}function fl(t,e){let n=[];for(let i=0;i<e.length;i++){let r=e[i],s=t.marks[r],o=s;if(s)n.push(s);else for(let e in t.marks){let i=t.marks[e];("_"==r||i.spec.group&&i.spec.group.split(" ").indexOf(r)>-1)&&n.push(o=i)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return n}class ml{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[];let n=this.matchedStyles=[];e.forEach((t=>{if(function(t){return null!=t.tag}(t))this.tags.push(t);else if(function(t){return null!=t.style}(t)){let e=/[^=]*/.exec(t.style)[0];n.indexOf(e)<0&&n.push(e),this.styles.push(t)}})),this.normalizeLists=!this.tags.some((e=>{if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;let n=t.nodes[e.node];return n.contentMatch.matchType(n)}))}parse(t,e={}){let n=new kl(this,e,!1);return n.addAll(t,e.from,e.to),n.finish()}parseSlice(t,e={}){let n=new kl(this,e,!0);return n.addAll(t,e.from,e.to),Na.maxOpen(n.finish())}matchTag(t,e,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let n=this.tags[i];if(xl(t,n.tag)&&(void 0===n.namespace||t.namespaceURI==n.namespace)&&(!n.context||e.matchesContext(n.context))){if(n.getAttrs){let e=n.getAttrs(t);if(!1===e)continue;n.attrs=e||void 0}return n}}}matchStyle(t,e,n,i){for(let r=i?this.styles.indexOf(i)+1:0;r<this.styles.length;r++){let i=this.styles[r],s=i.style;if(!(0!=s.indexOf(t)||i.context&&!n.matchesContext(i.context)||s.length>t.length&&(61!=s.charCodeAt(t.length)||s.slice(t.length+1)!=e))){if(i.getAttrs){let t=i.getAttrs(e);if(!1===t)continue;i.attrs=t||void 0}return i}}}static schemaRules(t){let e=[];function n(t){let n=null==t.priority?50:t.priority,i=0;for(;i<e.length;i++){let t=e[i];if((null==t.priority?50:t.priority)<n)break}e.splice(i,0,t)}for(let e in t.marks){let i=t.marks[e].spec.parseDOM;i&&i.forEach((t=>{n(t=Sl(t)),t.mark||t.ignore||t.clearMark||(t.mark=e)}))}for(let e in t.nodes){let i=t.nodes[e].spec.parseDOM;i&&i.forEach((t=>{n(t=Sl(t)),t.node||t.ignore||t.mark||(t.node=e)}))}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new ml(t,ml.schemaRules(t)))}}const gl={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},vl={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},yl={ol:!0,ul:!0};function bl(t,e,n){return null!=e?(e?1:0)|("full"===e?2:0):t&&"pre"==t.whitespace?3:-5&n}class wl{constructor(t,e,n,i,r,s,o){this.type=t,this.attrs=e,this.marks=n,this.pendingMarks=i,this.solid=r,this.options=o,this.content=[],this.activeMarks=Ea.none,this.stashMarks=[],this.match=s||(4&o?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(_a.from(t));if(!e){let e,n=this.type.contentMatch;return(e=n.findWrapping(t.type))?(this.match=n,e):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)}finish(t){if(!(1&this.options)){let t,e=this.content[this.content.length-1];if(e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))){let n=e;e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length))}}let e=_a.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(_a.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}popFromStashMark(t){for(let e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]}applyPending(t){for(let e=0,n=this.pendingMarks;e<n.length;e++){let i=n[e];(this.type?this.type.allowsMarkType(i.type):Cl(i.type,t))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!gl.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class kl{constructor(t,e,n){this.parser=t,this.options=e,this.isOpen=n,this.open=0;let i,r=e.topNode,s=bl(null,e.preserveWhitespace,0)|(n?4:0);i=r?new wl(r.type,r.attrs,Ea.none,Ea.none,!0,e.topMatch||r.type.contentMatch,s):new wl(n?null:t.schema.topNodeType,null,Ea.none,Ea.none,!0,null,s),this.nodes=[i],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t){3==t.nodeType?this.addTextNode(t):1==t.nodeType&&this.addElement(t)}withStyleRules(t,e){let n=t.style;if(!n||!n.length)return e();let i=this.readStyles(t.style);if(!i)return;let[r,s]=i,o=this.top;for(let t=0;t<s.length;t++)this.removePendingMark(s[t],o);for(let t=0;t<r.length;t++)this.addPendingMark(r[t]);e();for(let t=0;t<r.length;t++)this.removePendingMark(r[t],o);for(let t=0;t<s.length;t++)this.addPendingMark(s[t])}addTextNode(t){let e=t.nodeValue,n=this.top;if(2&n.options||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)e=2&n.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){let i=n.content[n.content.length-1],r=t.previousSibling;(!i||r&&"BR"==r.nodeName||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)}addElement(t,e){let n,i=t.nodeName.toLowerCase();yl.hasOwnProperty(i)&&this.parser.normalizeLists&&function(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let t=1==e.nodeType?e.nodeName.toLowerCase():null;t&&yl.hasOwnProperty(t)&&n?(n.appendChild(e),e=n):"li"==t?n=e:t&&(n=null)}}(t);let r=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(r?r.ignore:vl.hasOwnProperty(i))this.findInside(t),this.ignoreFallback(t);else if(!r||r.skip||r.closeParent){r&&r.closeParent?this.open=Math.max(0,this.open-1):r&&r.skip.nodeType&&(t=r.skip);let e,n=this.top,s=this.needsBlock;if(gl.hasOwnProperty(i))n.content.length&&n.content[0].isInline&&this.open&&(this.open--,n=this.top),e=!0,n.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);r&&r.skip?this.addAll(t):this.withStyleRules(t,(()=>this.addAll(t))),e&&this.sync(n),this.needsBlock=s}else this.withStyleRules(t,(()=>{this.addElementByRule(t,r,!1===r.consuming?n:void 0)}))}leafFallback(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))}ignoreFallback(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(t){let e=Ea.none,n=Ea.none;if(t.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let r=this.parser.matchedStyles[i],s=t.getPropertyValue(r);if(s)for(let t;;){let i=this.parser.matchStyle(r,s,this,t);if(!i)break;if(i.ignore)return null;if(i.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach((t=>{i.clearMark(t)&&(n=t.addToSet(n))})):e=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(e),!1!==i.consuming)break;t=i}}return[e,n]}addElementByRule(t,e,n){let i,r,s;if(e.node)r=this.parser.schema.nodes[e.node],r.isLeaf?this.insertNode(r.create(e.attrs))||this.leafFallback(t):i=this.enter(r,e.attrs||null,e.preserveWhitespace);else{s=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(s)}let o=this.top;if(r&&r.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((t=>this.insertNode(t)));else{let n=t;"string"==typeof e.contentElement?n=t.querySelector(e.contentElement):"function"==typeof e.contentElement?n=e.contentElement(t):e.contentElement&&(n=e.contentElement),this.findAround(t,n,!0),this.addAll(n)}i&&this.sync(o)&&this.open--,s&&this.removePendingMark(s,o)}addAll(t,e,n){let i=e||0;for(let r=e?t.childNodes[e]:t.firstChild,s=null==n?null:t.childNodes[n];r!=s;r=r.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(r);this.findAtPoint(t,i)}findPlace(t){let e,n;for(let i=this.open;i>=0;i--){let r=this.nodes[i],s=r.findWrapping(t);if(s&&(!e||e.length>s.length)&&(e=s,n=r,!s.length))break;if(r.solid)break}if(!e)return!1;this.sync(n);for(let t=0;t<e.length;t++)this.enterInner(e[t],null,!1);return!0}insertNode(t){if(t.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(t)){this.closeExtra();let e=this.top;e.applyPending(t.type),e.match&&(e.match=e.match.matchType(t.type));let n=e.activeMarks;for(let i=0;i<t.marks.length;i++)e.type&&!e.type.allowsMarkType(t.marks[i].type)||(n=t.marks[i].addToSet(n));return e.content.push(t.mark(n)),!0}return!1}enter(t,e,n){let i=this.findPlace(t.create(e));return i&&this.enterInner(t,e,!0,n),i}enterInner(t,e=null,n=!1,i){this.closeExtra();let r=this.top;r.applyPending(t),r.match=r.match&&r.match.matchType(t);let s=bl(t,i,r.options);4&r.options&&0==r.content.length&&(s|=4),this.nodes.push(new wl(t,e,r.activeMarks,r.pendingMarks,n,null,s)),this.open++}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let n=this.nodes[e].content;for(let e=n.length-1;e>=0;e--)t+=n[e].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,n){if(t!=e&&this.find)for(let i=0;i<this.find.length;i++)if(null==this.find[i].pos&&1==t.nodeType&&t.contains(this.find[i].node)){e.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),n=this.options.context,i=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),r=-(n?n.depth+1:0)+(i?0:1),s=(t,o)=>{for(;t>=0;t--){let a=e[t];if(""==a){if(t==e.length-1||0==t)continue;for(;o>=r;o--)if(s(t-1,o))return!0;return!1}{let t=o>0||0==o&&i?this.nodes[o].type:n&&o>=r?n.node(o-r).type:null;if(!t||t.name!=a&&-1==t.groups.indexOf(a))return!1;o--}}return!0};return s(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}addPendingMark(t){let e=function(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}removePendingMark(t,e){for(let n=this.open;n>=0;n--){let i=this.nodes[n];if(i.pendingMarks.lastIndexOf(t)>-1)i.pendingMarks=t.removeFromSet(i.pendingMarks);else{i.activeMarks=t.removeFromSet(i.activeMarks);let e=i.popFromStashMark(t);e&&i.type&&i.type.allowsMarkType(e.type)&&(i.activeMarks=e.addToSet(i.activeMarks))}if(i==e)break}}}function xl(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Sl(t){let e={};for(let n in t)e[n]=t[n];return e}function Cl(t,e){let n=e.schema.nodes;for(let i in n){let r=n[i];if(!r.allowsMarkType(t))continue;let s=[],o=t=>{s.push(t);for(let n=0;n<t.edgeCount;n++){let{type:i,next:r}=t.edge(n);if(i==e)return!0;if(s.indexOf(r)<0&&o(r))return!0}};if(o(r.contentMatch))return!0}}class _l{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},n){n||(n=Ml(e).createDocumentFragment());let i=n,r=[];return t.forEach((t=>{if(r.length||t.marks.length){let n=0,s=0;for(;n<r.length&&s<t.marks.length;){let e=t.marks[s];if(this.marks[e.type.name]){if(!e.eq(r[n][0])||!1===e.type.spec.spanning)break;n++,s++}else s++}for(;n<r.length;)i=r.pop()[1];for(;s<t.marks.length;){let n=t.marks[s++],o=this.serializeMark(n,t.isInline,e);o&&(r.push([n,i]),i.appendChild(o.dom),i=o.contentDOM||o.dom)}}i.appendChild(this.serializeNodeInner(t,e))})),n}serializeNodeInner(t,e){let{dom:n,contentDOM:i}=_l.renderSpec(Ml(e),this.nodes[t.type.name](t));if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,i)}return n}serializeNode(t,e={}){let n=this.serializeNodeInner(t,e);for(let i=t.marks.length-1;i>=0;i--){let r=this.serializeMark(t.marks[i],t.isInline,e);r&&((r.contentDOM||r.dom).appendChild(n),n=r.dom)}return n}serializeMark(t,e,n={}){let i=this.marks[t.type.name];return i&&_l.renderSpec(Ml(n),i(t,e))}static renderSpec(t,e,n=null){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;let i,r=e[0],s=r.indexOf(" ");s>0&&(n=r.slice(0,s),r=r.slice(s+1));let o=n?t.createElementNS(n,r):t.createElement(r),a=e[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a)){l=2;for(let t in a)if(null!=a[t]){let e=t.indexOf(" ");e>0?o.setAttributeNS(t.slice(0,e),t.slice(e+1),a[t]):o.setAttribute(t,a[t])}}for(let r=l;r<e.length;r++){let s=e[r];if(0===s){if(r<e.length-1||r>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:o,contentDOM:o}}{let{dom:e,contentDOM:r}=_l.renderSpec(t,s,n);if(o.appendChild(e),r){if(i)throw new RangeError("Multiple content holes");i=r}}}return{dom:o,contentDOM:i}}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new _l(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=Tl(t.nodes);return e.text||(e.text=t=>t.text),e}static marksFromSchema(t){return Tl(t.marks)}}function Tl(t){let e={};for(let n in t){let i=t[n].spec.toDOM;i&&(e[n]=i)}return e}function Ml(t){return t.document||window.document}const Ol=Math.pow(2,16);function El(t,e){return t+e*Ol}function Al(t){return 65535&t}class Nl{constructor(t,e,n){this.pos=t,this.delInfo=e,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class Dl{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&Dl.empty)return Dl.empty}recover(t){let e=0,n=Al(t);if(!this.inverted)for(let t=0;t<n;t++)e+=this.ranges[3*t+2]-this.ranges[3*t+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/Ol}(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,n){let i=0,r=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let a=this.ranges[o]-(this.inverted?i:0);if(a>t)break;let l=this.ranges[o+r],c=this.ranges[o+s],u=a+l;if(t<=u){let r=a+i+((l?t==a?-1:t==u?1:e:e)<0?0:c);if(n)return r;let s=t==(e<0?a:u)?null:El(o/3,t-a),d=t==a?2:t==u?1:4;return(e<0?t!=a:t!=u)&&(d|=8),new Nl(r,d,s)}i+=c-l}return n?t+i:new Nl(t+i,0,null)}touches(t,e){let n=0,i=Al(e),r=this.inverted?2:1,s=this.inverted?1:2;for(let e=0;e<this.ranges.length;e+=3){let o=this.ranges[e]-(this.inverted?n:0);if(o>t)break;let a=this.ranges[e+r];if(t<=o+a&&e==3*i)return!0;n+=this.ranges[e+s]-a}return!1}forEach(t){let e=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,r=0;i<this.ranges.length;i+=3){let s=this.ranges[i],o=s-(this.inverted?r:0),a=s+(this.inverted?0:r),l=this.ranges[i+e],c=this.ranges[i+n];t(o,o+l,a,a+c),r+=c-l}}invert(){return new Dl(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?Dl.empty:new Dl(t<0?[0,-t,0]:[0,0,t])}}Dl.empty=new Dl([]);class Ll{constructor(t=[],e,n=0,i=t.length){this.maps=t,this.mirror=e,this.from=n,this.to=i}slice(t=0,e=this.maps.length){return new Ll(this.maps,this.mirror,t,e)}copy(){return new Ll(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,n=this.maps.length;e<t.maps.length;e++){let i=t.getMirror(e);this.appendMap(t.maps[e],null!=i&&i<e?n+i:void 0)}}getMirror(t){if(this.mirror)for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){let i=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=i&&i>e?n-i-1:void 0)}}invert(){let t=new Ll;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,n){let i=0;for(let n=this.from;n<this.to;n++){let r=this.maps[n].mapResult(t,e);if(null!=r.recover){let e=this.getMirror(n);if(null!=e&&e>n&&e<this.to){n=e,t=this.maps[e].recover(r.recover);continue}}i|=r.delInfo,t=r.pos}return n?t:new Nl(t,i,null)}}const Il=Object.create(null);class Pl{getMap(){return Dl.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Il[e.stepType];if(!n)throw new RangeError(`No step type ${e.stepType} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in Il)throw new RangeError("Duplicate use of step JSON ID "+t);return Il[t]=e,e.prototype.jsonID=t,e}}class Bl{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new Bl(t,null)}static fail(t){return new Bl(null,t)}static fromReplace(t,e,n,i){try{return Bl.ok(t.replace(e,n,i))}catch(t){if(t instanceof Aa)return Bl.fail(t.message);throw t}}}function jl(t,e,n){let i=[];for(let r=0;r<t.childCount;r++){let s=t.child(r);s.content.size&&(s=s.copy(jl(s.content,e,s))),s.isInline&&(s=e(s,n,r)),i.push(s)}return _a.fromArray(i)}class Fl extends Pl{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=t.resolve(this.from),i=n.node(n.sharedDepth(this.to)),r=new Na(jl(e.content,((t,e)=>t.isAtom&&e.type.allowsMarkType(this.mark.type)?t.mark(this.mark.addToSet(t.marks)):t),i),e.openStart,e.openEnd);return Bl.fromReplace(t,this.from,this.to,r)}invert(){return new Rl(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new Fl(e.pos,n.pos,this.mark)}merge(t){return t instanceof Fl&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Fl(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Fl(e.from,e.to,t.markFromJSON(e.mark))}}Pl.jsonID("addMark",Fl);class Rl extends Pl{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=new Na(jl(e.content,(t=>t.mark(this.mark.removeFromSet(t.marks))),t),e.openStart,e.openEnd);return Bl.fromReplace(t,this.from,this.to,n)}invert(){return new Fl(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new Rl(e.pos,n.pos,this.mark)}merge(t){return t instanceof Rl&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Rl(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Rl(e.from,e.to,t.markFromJSON(e.mark))}}Pl.jsonID("removeMark",Rl);class $l extends Pl{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return Bl.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return Bl.fromReplace(t,this.pos,this.pos+1,new Na(_a.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let t=this.mark.addToSet(e.marks);if(t.length==e.marks.length){for(let n=0;n<e.marks.length;n++)if(!e.marks[n].isInSet(t))return new $l(this.pos,e.marks[n]);return new $l(this.pos,this.mark)}}return new Vl(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new $l(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new $l(e.pos,t.markFromJSON(e.mark))}}Pl.jsonID("addNodeMark",$l);class Vl extends Pl{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return Bl.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return Bl.fromReplace(t,this.pos,this.pos+1,new Na(_a.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new $l(this.pos,this.mark):this}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new Vl(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Vl(e.pos,t.markFromJSON(e.mark))}}Pl.jsonID("removeNodeMark",Vl);class zl extends Pl{constructor(t,e,n,i=!1){super(),this.from=t,this.to=e,this.slice=n,this.structure=i}apply(t){return this.structure&&ql(t,this.from,this.to)?Bl.fail("Structure replace would overwrite content"):Bl.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new Dl([this.from,this.to-this.from,this.slice.size])}invert(t){return new zl(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deletedAcross&&n.deletedAcross?null:new zl(e.pos,Math.max(e.pos,n.pos),this.slice)}merge(t){if(!(t instanceof zl)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?Na.empty:new Na(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new zl(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?Na.empty:new Na(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new zl(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new zl(e.from,e.to,Na.fromJSON(t,e.slice),!!e.structure)}}Pl.jsonID("replace",zl);class Hl extends Pl{constructor(t,e,n,i,r,s,o=!1){super(),this.from=t,this.to=e,this.gapFrom=n,this.gapTo=i,this.slice=r,this.insert=s,this.structure=o}apply(t){if(this.structure&&(ql(t,this.from,this.gapFrom)||ql(t,this.gapTo,this.to)))return Bl.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return Bl.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,e.content);return n?Bl.fromReplace(t,this.from,this.to,n):Bl.fail("Content does not fit in gap")}getMap(){return new Dl([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new Hl(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),i=this.from==this.gapFrom?e.pos:t.map(this.gapFrom,-1),r=this.to==this.gapTo?n.pos:t.map(this.gapTo,1);return e.deletedAcross&&n.deletedAcross||i<e.pos||r>n.pos?null:new Hl(e.pos,n.pos,i,r,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Hl(e.from,e.to,e.gapFrom,e.gapTo,Na.fromJSON(t,e.slice),e.insert,!!e.structure)}}function ql(t,e,n){let i=t.resolve(e),r=n-e,s=i.depth;for(;r>0&&s>0&&i.indexAfter(s)==i.node(s).childCount;)s--,r--;if(r>0){let t=i.node(s).maybeChild(i.indexAfter(s));for(;r>0;){if(!t||t.isLeaf)return!0;t=t.firstChild,r--}}return!1}function Kl(t,e,n,i=n.contentMatch,r=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let e=0;e<s.childCount;e++){let l=s.child(e),c=a+l.nodeSize,u=i.matchType(l.type);if(u){i=u;for(let e=0;e<l.marks.length;e++)n.allowsMarkType(l.marks[e].type)||t.step(new Rl(a,c,l.marks[e]));if(r&&l.isText&&"pre"!=n.whitespace){let t,e,i=/\r?\n|\r/g;for(;t=i.exec(l.text);)e||(e=new Na(_a.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),o.push(new zl(a+t.index,a+t.index+t[0].length,e))}}else o.push(new zl(a,c,Na.empty));a=c}if(!i.validEnd){let e=i.fillBefore(_a.empty,!0);t.replace(a,a,new Na(e,0,0))}for(let e=o.length-1;e>=0;e--)t.step(o[e])}function Wl(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ul(t){let e=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth;;--n){let i=t.$from.node(n),r=t.$from.index(n),s=t.$to.indexAfter(n);if(n<t.depth&&i.canReplace(r,s,e))return n;if(0==n||i.type.spec.isolating||!Wl(i,r,s))break}return null}function Gl(t,e,n=null,i=t){let r=function(t,e){let{parent:n,startIndex:i,endIndex:r}=t,s=n.contentMatchAt(i).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(i,r,o)?s:null}(t,e),s=r&&function(t,e){let{parent:n,startIndex:i,endIndex:r}=t,s=n.child(i),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let a=(o.length?o[o.length-1]:e).contentMatch;for(let t=i;a&&t<r;t++)a=a.matchType(n.child(t).type);return a&&a.validEnd?o:null}(i,e);return s?r.map(Jl).concat({type:e,attrs:n}).concat(s.map(Jl)):null}function Jl(t){return{type:t,attrs:null}}function Yl(t,e,n=1,i){let r=t.resolve(e),s=r.depth-n,o=i&&i[i.length-1]||r.parent;if(s<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!o.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let t=r.depth-1,e=n-2;t>s;t--,e--){let n=r.node(t),s=r.index(t);if(n.type.spec.isolating)return!1;let o=n.content.cutByIndex(s,n.childCount),a=i&&i[e+1];a&&(o=o.replaceChild(0,a.type.create(a.attrs)));let l=i&&i[e]||n;if(!n.canReplace(s+1,n.childCount)||!l.type.validContent(o))return!1}let a=r.indexAfter(s),l=i&&i[0];return r.node(s).canReplaceWith(a,a,l?l.type:r.node(s+1).type)}function Ql(t,e){let n=t.resolve(e),i=n.index();return Xl(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(i,i+1)}function Xl(t,e){return!(!t||!e||t.isLeaf||!t.canAppend(e))}function Zl(t,e,n=-1){let i=t.resolve(e);for(let t=i.depth;;t--){let r,s,o=i.index(t);if(t==i.depth?(r=i.nodeBefore,s=i.nodeAfter):n>0?(r=i.node(t+1),o++,s=i.node(t).maybeChild(o)):(r=i.node(t).maybeChild(o-1),s=i.node(t+1)),r&&!r.isTextblock&&Xl(r,s)&&i.node(t).canReplace(o,o+1))return e;if(0==t)break;e=n<0?i.before(t):i.after(t)}}function tc(t,e,n){let i=t.resolve(e);if(!n.content.size)return e;let r=n.content;for(let t=0;t<n.openStart;t++)r=r.firstChild.content;for(let t=1;t<=(0==n.openStart&&n.size?2:1);t++)for(let e=i.depth;e>=0;e--){let n=e==i.depth?0:i.pos<=(i.start(e+1)+i.end(e+1))/2?-1:1,s=i.index(e)+(n>0?1:0),o=i.node(e),a=!1;if(1==t)a=o.canReplace(s,s,r);else{let t=o.contentMatchAt(s).findWrapping(r.firstChild.type);a=t&&o.canReplaceWith(s,s,t[0])}if(a)return 0==n?i.pos:n<0?i.before(e+1):i.after(e+1)}return null}function ec(t,e,n=e,i=Na.empty){if(e==n&&!i.size)return null;let r=t.resolve(e),s=t.resolve(n);return nc(r,s,i)?new zl(e,n,i):new ic(r,s,i).fit()}function nc(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}Pl.jsonID("replaceAround",Hl);class ic{constructor(t,e,n){this.$from=t,this.$to=e,this.unplaced=n,this.frontier=[],this.placed=_a.empty;for(let e=0;e<=t.depth;e++){let n=t.node(e);this.frontier.push({type:n.type,match:n.contentMatchAt(t.indexAfter(e))})}for(let e=t.depth;e>0;e--)this.placed=_a.from(t.node(e).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(t<0?this.$to:n.doc.resolve(t));if(!i)return null;let r=this.placed,s=n.depth,o=i.depth;for(;s&&o&&1==r.childCount;)r=r.firstChild.content,s--,o--;let a=new Na(r,s,o);return t>-1?new Hl(n.pos,t,this.$to.pos,this.$to.end(),a,e):a.size||n.pos!=this.$to.pos?new zl(n.pos,i.pos,a):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<t;n++){let r=e.firstChild;if(e.childCount>1&&(i=0),r.type.spec.isolating&&i<=n){t=n;break}e=r.content}for(let e=1;e<=2;e++)for(let n=1==e?t:this.unplaced.openStart;n>=0;n--){let t,i=null;n?(i=oc(this.unplaced.content,n-1).firstChild,t=i.content):t=this.unplaced.content;let r=t.firstChild;for(let t=this.depth;t>=0;t--){let s,{type:o,match:a}=this.frontier[t],l=null;if(1==e&&(r?a.matchType(r.type)||(l=a.fillBefore(_a.from(r),!1)):i&&o.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:t,parent:i,inject:l};if(2==e&&r&&(s=a.findWrapping(r.type)))return{sliceDepth:n,frontierDepth:t,parent:i,wrap:s};if(i&&a.matchType(i.type))break}}}openMore(){let{content:t,openStart:e,openEnd:n}=this.unplaced,i=oc(t,e);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new Na(t,e+1,Math.max(n,i.size+e>=t.size-n?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:n}=this.unplaced,i=oc(t,e);if(i.childCount<=1&&e>0){let r=t.size-e<=e+i.size;this.unplaced=new Na(rc(t,e-1,1),e-1,r?e-1:n)}else this.unplaced=new Na(rc(t,e,1),e,n)}placeNodes({sliceDepth:t,frontierDepth:e,parent:n,inject:i,wrap:r}){for(;this.depth>e;)this.closeFrontierNode();if(r)for(let t=0;t<r.length;t++)this.openFrontierNode(r[t]);let s=this.unplaced,o=n?n.content:s.content,a=s.openStart-t,l=0,c=[],{match:u,type:d}=this.frontier[e];if(i){for(let t=0;t<i.childCount;t++)c.push(i.child(t));u=u.matchFragment(i)}let h=o.size+t-(s.content.size-s.openEnd);for(;l<o.childCount;){let t=o.child(l),e=u.matchType(t.type);if(!e)break;l++,(l>1||0==a||t.content.size)&&(u=e,c.push(ac(t.mark(d.allowedMarks(t.marks)),1==l?a:0,l==o.childCount?h:-1)))}let p=l==o.childCount;p||(h=-1),this.placed=sc(this.placed,e,_a.from(c)),this.frontier[e].match=u,p&&h<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let t=0,e=o;t<h;t++){let t=e.lastChild;this.frontier.push({type:t.type,match:t.contentMatchAt(t.childCount)}),e=t.content}this.unplaced=p?0==t?Na.empty:new Na(rc(s.content,t-1,1),t-1,h<0?s.openEnd:t-1):new Na(rc(s.content,t,l),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t,e=this.frontier[this.depth];if(!e.type.isTextblock||!lc(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:n,type:i}=this.frontier[e],r=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=lc(t,e,i,n,r);if(s){for(let n=e-1;n>=0;n--){let{match:e,type:i}=this.frontier[n],r=lc(t,n,i,e,!0);if(!r||r.childCount)continue t}return{depth:e,fit:s,move:r?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=sc(this.placed,e.depth,e.fit)),t=e.move;for(let n=e.depth+1;n<=t.depth;n++){let e=t.node(n),i=e.type.contentMatch.fillBefore(e.content,!0,t.index(n));this.openFrontierNode(e.type,e.attrs,i)}return t}openFrontierNode(t,e=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=sc(this.placed,this.depth,_a.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(_a.empty,!0);t.childCount&&(this.placed=sc(this.placed,this.frontier.length,t))}}function rc(t,e,n){return 0==e?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(rc(t.firstChild.content,e-1,n)))}function sc(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(sc(t.lastChild.content,e-1,n)))}function oc(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function ac(t,e,n){if(e<=0)return t;let i=t.content;return e>1&&(i=i.replaceChild(0,ac(i.firstChild,e-1,1==i.childCount?n-1:0))),e>0&&(i=t.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(_a.empty,!0)))),t.copy(i)}function lc(t,e,n,i,r){let s=t.node(e),o=r?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=i.fillBefore(s.content,!0,o);return a&&!function(t,e,n){for(let i=n;i<e.childCount;i++)if(!t.allowsMarks(e.child(i).marks))return!0;return!1}(n,s.content,o)?a:null}function cc(t,e,n,i,r){if(e<n){let r=t.firstChild;t=t.replaceChild(0,r.copy(cc(r.content,e+1,n,i,r)))}if(e>i){let e=r.contentMatchAt(0),n=e.fillBefore(t).append(t);t=n.append(e.matchFragment(n).fillBefore(_a.empty,!0))}return t}function uc(t,e){let n=[];for(let i=Math.min(t.depth,e.depth);i>=0;i--){let r=t.start(i);if(r<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(r==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==r-1)&&n.push(i)}return n}class dc extends Pl{constructor(t,e,n){super(),this.pos=t,this.attr=e,this.value=n}apply(t){let e=t.nodeAt(this.pos);if(!e)return Bl.fail("No node at attribute step's position");let n=Object.create(null);for(let t in e.attrs)n[t]=e.attrs[t];n[this.attr]=this.value;let i=e.type.create(n,null,e.marks);return Bl.fromReplace(t,this.pos,this.pos+1,new Na(_a.from(i),0,e.isLeaf?0:1))}getMap(){return Dl.empty}invert(t){return new dc(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new dc(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new dc(e.pos,e.attr,e.value)}}Pl.jsonID("attr",dc);class hc extends Pl{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let n in t.attrs)e[n]=t.attrs[n];e[this.attr]=this.value;let n=t.type.create(e,t.content,t.marks);return Bl.ok(n)}getMap(){return Dl.empty}invert(t){return new hc(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if("string"!=typeof e.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new hc(e.attr,e.value)}}Pl.jsonID("docAttr",hc);let pc=class extends Error{};pc=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n},(pc.prototype=Object.create(Error.prototype)).constructor=pc,pc.prototype.name="TransformError";class fc{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Ll}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new pc(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,n=Na.empty){let i=ec(this.doc,t,e,n);return i&&this.step(i),this}replaceWith(t,e,n){return this.replace(t,e,new Na(_a.from(n),0,0))}delete(t,e){return this.replace(t,e,Na.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,n){return function(t,e,n,i){if(!i.size)return t.deleteRange(e,n);let r=t.doc.resolve(e),s=t.doc.resolve(n);if(nc(r,s,i))return t.step(new zl(e,n,i));let o=uc(r,t.doc.resolve(n));0==o[o.length-1]&&o.pop();let a=-(r.depth+1);o.unshift(a);for(let t=r.depth,e=r.pos-1;t>0;t--,e--){let n=r.node(t).type.spec;if(n.defining||n.definingAsContext||n.isolating)break;o.indexOf(t)>-1?a=t:r.before(t)==e&&o.splice(1,0,-t)}let l=o.indexOf(a),c=[],u=i.openStart;for(let t=i.content,e=0;;e++){let n=t.firstChild;if(c.push(n),e==i.openStart)break;t=n.content}for(let t=u-1;t>=0;t--){let e=c[t],n=(d=e.type).spec.defining||d.spec.definingForContent;if(n&&!e.sameMarkup(r.node(Math.abs(a)-1)))u=t;else if(n||!e.type.isTextblock)break}var d;for(let e=i.openStart;e>=0;e--){let a=(e+u+1)%(i.openStart+1),d=c[a];if(d)for(let e=0;e<o.length;e++){let c=o[(e+l)%o.length],u=!0;c<0&&(u=!1,c=-c);let h=r.node(c-1),p=r.index(c-1);if(h.canReplaceWith(p,p,d.type,d.marks))return t.replace(r.before(c),u?s.after(c):n,new Na(cc(i.content,0,i.openStart,a),a,i.openEnd))}}let h=t.steps.length;for(let a=o.length-1;a>=0&&(t.replace(e,n,i),!(t.steps.length>h));a--){let t=o[a];t<0||(e=r.before(t),n=s.after(t))}}(this,t,e,n),this}replaceRangeWith(t,e,n){return function(t,e,n,i){if(!i.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let r=function(t,e,n){let i=t.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),n))return e;if(0==i.parentOffset)for(let t=i.depth-1;t>=0;t--){let e=i.index(t);if(i.node(t).canReplaceWith(e,e,n))return i.before(t+1);if(e>0)return null}if(i.parentOffset==i.parent.content.size)for(let t=i.depth-1;t>=0;t--){let e=i.indexAfter(t);if(i.node(t).canReplaceWith(e,e,n))return i.after(t+1);if(e<i.node(t).childCount)return null}return null}(t.doc,e,i.type);null!=r&&(e=n=r)}t.replaceRange(e,n,new Na(_a.from(i),0,0))}(this,t,e,n),this}deleteRange(t,e){return function(t,e,n){let i=t.doc.resolve(e),r=t.doc.resolve(n),s=uc(i,r);for(let e=0;e<s.length;e++){let n=s[e],o=e==s.length-1;if(o&&0==n||i.node(n).type.contentMatch.validEnd)return t.delete(i.start(n),r.end(n));if(n>0&&(o||i.node(n-1).canReplace(i.index(n-1),r.indexAfter(n-1))))return t.delete(i.before(n),r.after(n))}for(let s=1;s<=i.depth&&s<=r.depth;s++)if(e-i.start(s)==i.depth-s&&n>i.end(s)&&r.end(s)-n!=r.depth-s)return t.delete(i.before(s),n);t.delete(e,n)}(this,t,e),this}lift(t,e){return function(t,e,n){let{$from:i,$to:r,depth:s}=e,o=i.before(s+1),a=r.after(s+1),l=o,c=a,u=_a.empty,d=0;for(let t=s,e=!1;t>n;t--)e||i.index(t)>0?(e=!0,u=_a.from(i.node(t).copy(u)),d++):l--;let h=_a.empty,p=0;for(let t=s,e=!1;t>n;t--)e||r.after(t+1)<r.end(t)?(e=!0,h=_a.from(r.node(t).copy(h)),p++):c++;t.step(new Hl(l,c,o,a,new Na(u.append(h),d,p),u.size-d,!0))}(this,t,e),this}join(t,e=1){return function(t,e,n){let i=new zl(e-n,e+n,Na.empty,!0);t.step(i)}(this,t,e),this}wrap(t,e){return function(t,e,n){let i=_a.empty;for(let t=n.length-1;t>=0;t--){if(i.size){let e=n[t].type.contentMatch.matchFragment(i);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=_a.from(n[t].type.create(n[t].attrs,i))}let r=e.start,s=e.end;t.step(new Hl(r,s,r,s,new Na(i,0,0),n.length,!0))}(this,t,e),this}setBlockType(t,e=t,n,i=null){return function(t,e,n,i,r){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,((e,n)=>{if(e.isTextblock&&!e.hasMarkup(i,r)&&function(t,e,n){let i=t.resolve(e),r=i.index();return i.parent.canReplaceWith(r,r+1,n)}(t.doc,t.mapping.slice(s).map(n),i)){let o=null;if(i.schema.linebreakReplacement){let t="pre"==i.whitespace,e=!!i.contentMatch.matchType(i.schema.linebreakReplacement);t&&!e?o=!1:!t&&e&&(o=!0)}!1===o&&function(t,e,n,i){e.forEach(((r,s)=>{if(r.type==r.type.schema.linebreakReplacement){let r=t.mapping.slice(i).map(n+1+s);t.replaceWith(r,r+1,e.type.schema.text("\n"))}}))}(t,e,n,s),Kl(t,t.mapping.slice(s).map(n,1),i,void 0,null===o);let a=t.mapping.slice(s),l=a.map(n,1),c=a.map(n+e.nodeSize,1);return t.step(new Hl(l,c,l+1,c-1,new Na(_a.from(i.create(r,null,e.marks)),0,0),1,!0)),!0===o&&function(t,e,n,i){e.forEach(((r,s)=>{if(r.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(r.text);){let r=t.mapping.slice(i).map(n+1+s+o.index);t.replaceWith(r,r+1,e.type.schema.linebreakReplacement.create())}}}))}(t,e,n,s),!1}}))}(this,t,e,n,i),this}setNodeMarkup(t,e,n=null,i){return function(t,e,n,i,r){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(i,null,r||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Hl(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Na(_a.from(o),0,0),1,!0))}(this,t,e,n,i),this}setNodeAttribute(t,e,n){return this.step(new dc(t,e,n)),this}setDocAttribute(t,e){return this.step(new hc(t,e)),this}addNodeMark(t,e){return this.step(new $l(t,e)),this}removeNodeMark(t,e){if(!(e instanceof Ea)){let n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(!(e=e.isInSet(n.marks)))return this}return this.step(new Vl(t,e)),this}split(t,e=1,n){return function(t,e,n=1,i){let r=t.doc.resolve(e),s=_a.empty,o=_a.empty;for(let t=r.depth,e=r.depth-n,a=n-1;t>e;t--,a--){s=_a.from(r.node(t).copy(s));let e=i&&i[a];o=_a.from(e?e.type.create(e.attrs,o):r.node(t).copy(o))}t.step(new zl(e,e,new Na(s.append(o),n,n),!0))}(this,t,e,n),this}addMark(t,e,n){return function(t,e,n,i){let r,s,o=[],a=[];t.doc.nodesBetween(e,n,((t,l,c)=>{if(!t.isInline)return;let u=t.marks;if(!i.isInSet(u)&&c.type.allowsMarkType(i.type)){let c=Math.max(l,e),d=Math.min(l+t.nodeSize,n),h=i.addToSet(u);for(let t=0;t<u.length;t++)u[t].isInSet(h)||(r&&r.to==c&&r.mark.eq(u[t])?r.to=d:o.push(r=new Rl(c,d,u[t])));s&&s.to==c?s.to=d:a.push(s=new Fl(c,d,i))}})),o.forEach((e=>t.step(e))),a.forEach((e=>t.step(e)))}(this,t,e,n),this}removeMark(t,e,n){return function(t,e,n,i){let r=[],s=0;t.doc.nodesBetween(e,n,((t,o)=>{if(!t.isInline)return;s++;let a=null;if(i instanceof hl){let e,n=t.marks;for(;e=i.isInSet(n);)(a||(a=[])).push(e),n=e.removeFromSet(n)}else i?i.isInSet(t.marks)&&(a=[i]):a=t.marks;if(a&&a.length){let i=Math.min(o+t.nodeSize,n);for(let t=0;t<a.length;t++){let n,l=a[t];for(let t=0;t<r.length;t++){let e=r[t];e.step==s-1&&l.eq(r[t].style)&&(n=e)}n?(n.to=i,n.step=s):r.push({style:l,from:Math.max(o,e),to:i,step:s})}}})),r.forEach((e=>t.step(new Rl(e.from,e.to,e.style))))}(this,t,e,n),this}clearIncompatible(t,e,n){return Kl(this,t,e,n),this}}const mc=Object.create(null);class gc{constructor(t,e,n){this.$anchor=t,this.$head=e,this.ranges=n||[new vc(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=Na.empty){let n=e.content.lastChild,i=null;for(let t=0;t<e.openEnd;t++)i=n,n=n.lastChild;let r=t.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:a,$to:l}=s[o],c=t.mapping.slice(r);t.replaceRange(c.map(a.pos),c.map(l.pos),o?Na.empty:e),0==o&&Mc(t,r,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,e){let n=t.steps.length,i=this.ranges;for(let r=0;r<i.length;r++){let{$from:s,$to:o}=i[r],a=t.mapping.slice(n),l=a.map(s.pos),c=a.map(o.pos);r?t.deleteRange(l,c):(t.replaceRangeWith(l,c,e),Mc(t,n,e.isInline?-1:1))}}static findFrom(t,e,n=!1){let i=t.parent.inlineContent?new wc(t):Tc(t.node(0),t.parent,t.pos,t.index(),e,n);if(i)return i;for(let i=t.depth-1;i>=0;i--){let r=e<0?Tc(t.node(0),t.node(i),t.before(i+1),t.index(i),e,n):Tc(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,e,n);if(r)return r}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new Cc(t.node(0))}static atStart(t){return Tc(t,t,0,0,1)||new Cc(t)}static atEnd(t){return Tc(t,t,t.content.size,t.childCount,-1)||new Cc(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=mc[e.type];if(!n)throw new RangeError(`No selection type ${e.type} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in mc)throw new RangeError("Duplicate use of selection JSON ID "+t);return mc[t]=e,e.prototype.jsonID=t,e}getBookmark(){return wc.between(this.$anchor,this.$head).getBookmark()}}gc.prototype.visible=!0;class vc{constructor(t,e){this.$from=t,this.$to=e}}let yc=!1;function bc(t){yc||t.parent.inlineContent||(yc=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class wc extends gc{constructor(t,e=t){bc(t),bc(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let n=t.resolve(e.map(this.head));if(!n.parent.inlineContent)return gc.near(n);let i=t.resolve(e.map(this.anchor));return new wc(i.parent.inlineContent?i:n,n)}replace(t,e=Na.empty){if(super.replace(t,e),e==Na.empty){let e=this.$from.marksAcross(this.$to);e&&t.ensureMarks(e)}}eq(t){return t instanceof wc&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new kc(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new wc(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,n=e){let i=t.resolve(e);return new this(i,n==e?i:t.resolve(n))}static between(t,e,n){let i=t.pos-e.pos;if(n&&!i||(n=i>=0?1:-1),!e.parent.inlineContent){let t=gc.findFrom(e,n,!0)||gc.findFrom(e,-n,!0);if(!t)return gc.near(e,n);e=t.$head}return t.parent.inlineContent||(0==i||(t=(gc.findFrom(t,-n,!0)||gc.findFrom(t,n,!0)).$anchor).pos<e.pos!=i<0)&&(t=e),new wc(t,e)}}gc.jsonID("text",wc);class kc{constructor(t,e){this.anchor=t,this.head=e}map(t){return new kc(t.map(this.anchor),t.map(this.head))}resolve(t){return wc.between(t.resolve(this.anchor),t.resolve(this.head))}}class xc extends gc{constructor(t){let e=t.nodeAfter,n=t.node(0).resolve(t.pos+e.nodeSize);super(t,n),this.node=e}map(t,e){let{deleted:n,pos:i}=e.mapResult(this.anchor),r=t.resolve(i);return n?gc.near(r):new xc(r)}content(){return new Na(_a.from(this.node),0,0)}eq(t){return t instanceof xc&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Sc(this.anchor)}static fromJSON(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new xc(t.resolve(e.anchor))}static create(t,e){return new xc(t.resolve(e))}static isSelectable(t){return!t.isText&&!1!==t.type.spec.selectable}}xc.prototype.visible=!1,gc.jsonID("node",xc);class Sc{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:n}=t.mapResult(this.anchor);return e?new kc(n,n):new Sc(n)}resolve(t){let e=t.resolve(this.anchor),n=e.nodeAfter;return n&&xc.isSelectable(n)?new xc(e):gc.near(e)}}class Cc extends gc{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=Na.empty){if(e==Na.empty){t.delete(0,t.doc.content.size);let e=gc.atStart(t.doc);e.eq(t.selection)||t.setSelection(e)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new Cc(t)}map(t){return new Cc(t)}eq(t){return t instanceof Cc}getBookmark(){return _c}}gc.jsonID("all",Cc);const _c={map(){return this},resolve(t){return new Cc(t)}};function Tc(t,e,n,i,r,s=!1){if(e.inlineContent)return wc.create(t,n);for(let o=i-(r>0?0:1);r>0?o<e.childCount:o>=0;o+=r){let i=e.child(o);if(i.isAtom){if(!s&&xc.isSelectable(i))return xc.create(t,n-(r<0?i.nodeSize:0))}else{let e=Tc(t,i,n+r,r<0?i.childCount:0,r,s);if(e)return e}n+=i.nodeSize*r}return null}function Mc(t,e,n){let i=t.steps.length-1;if(i<e)return;let r,s=t.steps[i];(s instanceof zl||s instanceof Hl)&&(t.mapping.maps[i].forEach(((t,e,n,i)=>{null==r&&(r=i)})),t.setSelection(gc.near(t.doc.resolve(r),n)))}class Oc extends fc{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=2,this}ensureMarks(t){return Ea.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(t,e){super.addStep(t,e),this.updated=-3&this.updated,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let n=this.selection;return e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Ea.none))),n.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,n){let i=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(null==n&&(n=e),n=null==n?e:n,!t)return this.deleteRange(e,n);let r=this.storedMarks;if(!r){let t=this.doc.resolve(e);r=n==e?t.marks():t.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,i.text(t,r)),this.selection.empty||this.setSelection(gc.near(this.selection.$to)),this}}setMeta(t,e){return this.meta["string"==typeof t?t:t.key]=e,this}getMeta(t){return this.meta["string"==typeof t?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function Ec(t,e){return e&&t?t.bind(e):t}class Ac{constructor(t,e,n){this.name=t,this.init=Ec(e.init,n),this.apply=Ec(e.apply,n)}}const Nc=[new Ac("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Ac("selection",{init(t,e){return t.selection||gc.atStart(e.doc)},apply(t){return t.selection}}),new Ac("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,i){return i.selection.$cursor?t.storedMarks:null}}),new Ac("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Dc{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Nc.slice(),e&&e.forEach((t=>{if(this.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");this.plugins.push(t),this.pluginsByKey[t.key]=t,t.spec.state&&this.fields.push(new Ac(t.key,t.spec.state,t))}))}}class Lc{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=e){let e=this.config.plugins[n];if(e.spec.filterTransaction&&!e.spec.filterTransaction.call(e,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],n=this.applyInner(t),i=null;for(;;){let r=!1;for(let s=0;s<this.config.plugins.length;s++){let o=this.config.plugins[s];if(o.spec.appendTransaction){let a=i?i[s].n:0,l=i?i[s].state:this,c=a<e.length&&o.spec.appendTransaction.call(o,a?e.slice(a):e,l,n);if(c&&n.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",t),!i){i=[];for(let t=0;t<this.config.plugins.length;t++)i.push(t<s?{state:n,n:e.length}:{state:this,n:0})}e.push(c),n=n.applyInner(c),r=!0}i&&(i[s]={state:n,n:e.length})}}if(!r)return{state:n,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new Lc(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let r=n[i];e[r.name]=r.apply(t,this[r.name],this,e)}return e}get tr(){return new Oc(this)}static create(t){let e=new Dc(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new Lc(e);for(let i=0;i<e.fields.length;i++)n[e.fields[i].name]=e.fields[i].init(t,n);return n}reconfigure(t){let e=new Dc(this.schema,t.plugins),n=e.fields,i=new Lc(e);for(let e=0;e<n.length;e++){let r=n[e].name;i[r]=this.hasOwnProperty(r)?this[r]:n[e].init(t,i)}return i}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((t=>t.toJSON()))),t&&"object"==typeof t)for(let n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[n],r=i.spec.state;r&&r.toJSON&&(e[n]=r.toJSON.call(i,this[i.key]))}return e}static fromJSON(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new Dc(t.schema,t.plugins),r=new Lc(i);return i.fields.forEach((i=>{if("doc"==i.name)r.doc=Ja.fromJSON(t.schema,e.doc);else if("selection"==i.name)r.selection=gc.fromJSON(r.doc,e.selection);else if("storedMarks"==i.name)e.storedMarks&&(r.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(let s in n){let o=n[s],a=o.spec.state;if(o.key==i.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,s))return void(r[i.name]=a.fromJSON.call(o,t,e[s],r))}r[i.name]=i.init(t,r)}})),r}}function Ic(t,e,n){for(let i in t){let r=t[i];r instanceof Function?r=r.bind(e):"handleDOMEvents"==i&&(r=Ic(r,e,{})),n[i]=r}return n}class Pc{constructor(t){this.spec=t,this.props={},t.props&&Ic(t.props,this,this.props),this.key=t.key?t.key.key:jc("plugin")}getState(t){return t[this.key]}}const Bc=Object.create(null);function jc(t){return t in Bc?t+"$"+ ++Bc[t]:(Bc[t]=0,t+"$")}class Fc{constructor(t="key"){this.key=jc(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const Rc=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},$c=function(t){let e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e};let Vc=null;const zc=function(t,e,n){let i=Vc||(Vc=document.createRange());return i.setEnd(t,null==n?t.nodeValue.length:n),i.setStart(t,e||0),i},Hc=function(t,e,n,i){return n&&(Kc(t,e,n,i,-1)||Kc(t,e,n,i,1))},qc=/^(img|br|input|textarea|hr)$/i;function Kc(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:Wc(t))){let n=t.parentNode;if(!n||1!=n.nodeType||Uc(t)||qc.test(t.nodeName)||"false"==t.contentEditable)return!1;e=Rc(t)+(r<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(r<0?-1:0)]).contentEditable)return!1;e=r<0?Wc(t):0}}}function Wc(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Uc(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Gc=function(t){return t.focusNode&&Hc(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Jc(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}const Yc="undefined"!=typeof navigator?navigator:null,Qc="undefined"!=typeof document?document:null,Xc=Yc&&Yc.userAgent||"",Zc=/Edge\/(\d+)/.exec(Xc),tu=/MSIE \d/.exec(Xc),eu=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Xc),nu=!!(tu||eu||Zc),iu=tu?document.documentMode:eu?+eu[1]:Zc?+Zc[1]:0,ru=!nu&&/gecko\/(\d+)/i.test(Xc);ru&&(/Firefox\/(\d+)/.exec(Xc)||[0,0])[1];const su=!nu&&/Chrome\/(\d+)/.exec(Xc),ou=!!su,au=su?+su[1]:0,lu=!nu&&!!Yc&&/Apple Computer/.test(Yc.vendor),cu=lu&&(/Mobile\/\w+/.test(Xc)||!!Yc&&Yc.maxTouchPoints>2),uu=cu||!!Yc&&/Mac/.test(Yc.platform),du=!!Yc&&/Win/.test(Yc.platform),hu=/Android \d/.test(Xc),pu=!!Qc&&"webkitFontSmoothing"in Qc.documentElement.style,fu=pu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function mu(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function gu(t,e){return"number"==typeof t?t:t[e]}function vu(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,i=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*i}}function yu(t,e,n){let i=t.someProp("scrollThreshold")||0,r=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;o=$c(o)){if(1!=o.nodeType)continue;let t=o,n=t==s.body,a=n?mu(s):vu(t),l=0,c=0;if(e.top<a.top+gu(i,"top")?c=-(a.top-e.top+gu(r,"top")):e.bottom>a.bottom-gu(i,"bottom")&&(c=e.bottom-e.top>a.bottom-a.top?e.top+gu(r,"top")-a.top:e.bottom-a.bottom+gu(r,"bottom")),e.left<a.left+gu(i,"left")?l=-(a.left-e.left+gu(r,"left")):e.right>a.right-gu(i,"right")&&(l=e.right-a.right+gu(r,"right")),l||c)if(n)s.defaultView.scrollBy(l,c);else{let n=t.scrollLeft,i=t.scrollTop;c&&(t.scrollTop+=c),l&&(t.scrollLeft+=l);let r=t.scrollLeft-n,s=t.scrollTop-i;e={left:e.left-r,top:e.top-s,right:e.right-r,bottom:e.bottom-s}}if(n||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function bu(t){let e=[],n=t.ownerDocument;for(let i=t;i&&(e.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),t!=n);i=$c(i));return e}function wu(t,e){for(let n=0;n<t.length;n++){let{dom:i,top:r,left:s}=t[n];i.scrollTop!=r+e&&(i.scrollTop=r+e),i.scrollLeft!=s&&(i.scrollLeft=s)}}let ku=null;function xu(t,e){let n,i,r,s,o=2e8,a=0,l=e.top,c=e.top;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let t;if(1==u.nodeType)t=u.getClientRects();else{if(3!=u.nodeType)continue;t=zc(u).getClientRects()}for(let h=0;h<t.length;h++){let p=t[h];if(p.top<=l&&p.bottom>=c){l=Math.max(p.bottom,l),c=Math.min(p.top,c);let t=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(t<o){n=u,o=t,i=t&&3==n.nodeType?{left:p.right<e.left?p.right:p.left,top:e.top}:e,1==u.nodeType&&t&&(a=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!r&&p.left<=e.left&&p.right>=e.left&&(r=u,s={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(a=d+1)}}return!n&&r&&(n=r,i=s,o=0),n&&3==n.nodeType?function(t,e){let n=t.nodeValue.length,i=document.createRange();for(let r=0;r<n;r++){i.setEnd(t,r+1),i.setStart(t,r);let n=Mu(i,1);if(n.top!=n.bottom&&Su(e,n))return{node:t,offset:r+(e.left>=(n.left+n.right)/2?1:0)}}return{node:t,offset:0}}(n,i):!n||o&&1==n.nodeType?{node:t,offset:a}:xu(n,i)}function Su(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Cu(t,e,n){let i=t.childNodes.length;if(i&&n.top<n.bottom)for(let r=Math.max(0,Math.min(i-1,Math.floor(i*(e.top-n.top)/(n.bottom-n.top))-2)),s=r;;){let n=t.childNodes[s];if(1==n.nodeType){let t=n.getClientRects();for(let i=0;i<t.length;i++){let r=t[i];if(Su(e,r))return Cu(n,e,r)}}if((s=(s+1)%i)==r)break}return t}function _u(t,e){let n,i=t.dom.ownerDocument,r=0,s=function(t,e,n){if(t.caretPositionFromPoint)try{let i=t.caretPositionFromPoint(e,n);if(i)return{node:i.offsetNode,offset:i.offset}}catch(t){}if(t.caretRangeFromPoint){let i=t.caretRangeFromPoint(e,n);if(i)return{node:i.startContainer,offset:i.startOffset}}}(i,e.left,e.top);s&&({node:n,offset:r}=s);let o,a=(t.root.elementFromPoint?t.root:i).elementFromPoint(e.left,e.top);if(!a||!t.dom.contains(1!=a.nodeType?a.parentNode:a)){let n=t.dom.getBoundingClientRect();if(!Su(e,n))return null;if(a=Cu(t.dom,e,n),!a)return null}if(lu)for(let t=a;n&&t;t=$c(t))t.draggable&&(n=void 0);if(a=function(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}(a,e),n){if(ru&&1==n.nodeType&&(r=Math.min(r,n.childNodes.length),r<n.childNodes.length)){let t,i=n.childNodes[r];"IMG"==i.nodeName&&(t=i.getBoundingClientRect()).right<=e.left&&t.bottom>e.top&&r++}let i;pu&&r&&1==n.nodeType&&1==(i=n.childNodes[r-1]).nodeType&&"false"==i.contentEditable&&i.getBoundingClientRect().top>=e.top&&r--,n==t.dom&&r==n.childNodes.length-1&&1==n.lastChild.nodeType&&e.top>n.lastChild.getBoundingClientRect().bottom?o=t.state.doc.content.size:0!=r&&1==n.nodeType&&"BR"==n.childNodes[r-1].nodeName||(o=function(t,e,n,i){let r=-1;for(let n=e,s=!1;n!=t.dom;){let e=t.docView.nearestDesc(n,!0);if(!e)return null;if(1==e.dom.nodeType&&(e.node.isBlock&&e.parent||!e.contentDOM)){let t=e.dom.getBoundingClientRect();if(e.node.isBlock&&e.parent&&(!s&&t.left>i.left||t.top>i.top?r=e.posBefore:(!s&&t.right<i.left||t.bottom<i.top)&&(r=e.posAfter),s=!0),!e.contentDOM&&r<0&&!e.node.isText)return(e.node.isBlock?i.top<(t.top+t.bottom)/2:i.left<(t.left+t.right)/2)?e.posBefore:e.posAfter}n=e.dom.parentNode}return r>-1?r:t.docView.posFromDOM(e,n,-1)}(t,n,r,e))}null==o&&(o=function(t,e,n){let{node:i,offset:r}=xu(e,n),s=-1;if(1==i.nodeType&&!i.firstChild){let t=i.getBoundingClientRect();s=t.left!=t.right&&n.left>(t.left+t.right)/2?1:-1}return t.docView.posFromDOM(i,r,s)}(t,a,e));let l=t.docView.nearestDesc(a,!0);return{pos:o,inside:l?l.posAtStart-l.border:-1}}function Tu(t){return t.top<t.bottom||t.left<t.right}function Mu(t,e){let n=t.getClientRects();if(n.length){let t=n[e<0?0:n.length-1];if(Tu(t))return t}return Array.prototype.find.call(n,Tu)||t.getBoundingClientRect()}const Ou=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Eu(t,e,n){let{node:i,offset:r,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=pu||ru;if(3==i.nodeType){if(!o||!Ou.test(i.nodeValue)&&(n<0?r:r!=i.nodeValue.length)){let t=r,e=r,s=n<0?1:-1;return n<0&&!r?(e++,s=-1):n>=0&&r==i.nodeValue.length?(t--,s=1):n<0?t--:e++,Au(Mu(zc(i,t,e),s),s<0)}{let t=Mu(zc(i,r,r),n);if(ru&&r&&/\s/.test(i.nodeValue[r-1])&&r<i.nodeValue.length){let e=Mu(zc(i,r-1,r-1),-1);if(e.top==t.top){let n=Mu(zc(i,r,r+1),-1);if(n.top!=t.top)return Au(n,n.left<e.left)}}return t}}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(null==s&&r&&(n<0||r==Wc(i))){let t=i.childNodes[r-1];if(1==t.nodeType)return Nu(t.getBoundingClientRect(),!1)}if(null==s&&r<Wc(i)){let t=i.childNodes[r];if(1==t.nodeType)return Nu(t.getBoundingClientRect(),!0)}return Nu(i.getBoundingClientRect(),n>=0)}if(null==s&&r&&(n<0||r==Wc(i))){let t=i.childNodes[r-1],e=3==t.nodeType?zc(t,Wc(t)-(o?0:1)):1!=t.nodeType||"BR"==t.nodeName&&t.nextSibling?null:t;if(e)return Au(Mu(e,1),!1)}if(null==s&&r<Wc(i)){let t=i.childNodes[r];for(;t.pmViewDesc&&t.pmViewDesc.ignoreForCoords;)t=t.nextSibling;let e=t?3==t.nodeType?zc(t,0,o?0:1):1==t.nodeType?t:null:null;if(e)return Au(Mu(e,-1),!0)}return Au(Mu(3==i.nodeType?zc(i):i,-n),n>=0)}function Au(t,e){if(0==t.width)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Nu(t,e){if(0==t.height)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Du(t,e,n){let i=t.state,r=t.root.activeElement;i!=e&&t.updateState(e),r!=t.dom&&t.focus();try{return n()}finally{i!=e&&t.updateState(i),r!=t.dom&&r&&r.focus()}}const Lu=/[\u0590-\u08ac]/;let Iu=null,Pu=null,Bu=!1;function ju(t,e,n){return Iu==e&&Pu==n?Bu:(Iu=e,Pu=n,Bu="up"==n||"down"==n?function(t,e,n){let i=e.selection,r="up"==n?i.$from:i.$to;return Du(t,e,(()=>{let{node:e}=t.docView.domFromPos(r.pos,"up"==n?-1:1);for(;;){let n=t.docView.nearestDesc(e,!0);if(!n)break;if(n.node.isBlock){e=n.contentDOM||n.dom;break}e=n.dom.parentNode}let i=Eu(t,r.pos,1);for(let t=e.firstChild;t;t=t.nextSibling){let e;if(1==t.nodeType)e=t.getClientRects();else{if(3!=t.nodeType)continue;e=zc(t,0,t.nodeValue.length).getClientRects()}for(let t=0;t<e.length;t++){let r=e[t];if(r.bottom>r.top+1&&("up"==n?i.top-r.top>2*(r.bottom-i.top):r.bottom-i.bottom>2*(i.bottom-r.top)))return!1}}return!0}))}(t,e,n):function(t,e,n){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let r=i.parentOffset,s=!r,o=r==i.parent.content.size,a=t.domSelection();return Lu.test(i.parent.textContent)&&a.modify?Du(t,e,(()=>{let{focusNode:e,focusOffset:r,anchorNode:s,anchorOffset:o}=t.domSelectionRange(),l=a.caretBidiLevel;a.modify("move",n,"character");let c=i.depth?t.docView.domAfterPos(i.before()):t.dom,{focusNode:u,focusOffset:d}=t.domSelectionRange(),h=u&&!c.contains(1==u.nodeType?u:u.parentNode)||e==u&&r==d;try{a.collapse(s,o),e&&(e!=s||r!=o)&&a.extend&&a.extend(e,r)}catch(t){}return null!=l&&(a.caretBidiLevel=l),h})):"left"==n||"backward"==n?s:o}(t,e,n))}class Fu{constructor(t,e,n,i){this.parent=t,this.children=e,this.dom=n,this.contentDOM=i,this.dirty=0,n.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,e,n){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let e=0;e<this.children.length;e++)t+=this.children[e].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let e=0,n=this.posAtStart;;e++){let i=this.children[e];if(i==t)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){let n,i;if(t==this.contentDOM)n=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;n=t.previousSibling}for(;n&&(!(i=n.pmViewDesc)||i.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(i)+i.size:this.posAtStart}{let n,i;if(t==this.contentDOM)n=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;n=t.nextSibling}for(;n&&(!(i=n.pmViewDesc)||i.parent!=this);)n=n.nextSibling;return n?this.posBeforeChild(i):this.posAtEnd}}let i;if(t==this.dom&&this.contentDOM)i=e>Rc(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(let e=t;;e=e.parentNode){if(e==this.dom){i=!1;break}if(e.previousSibling)break}if(null==i&&e==t.childNodes.length)for(let e=t;;e=e.parentNode){if(e==this.dom){i=!0;break}if(e.nextSibling)break}}return(null==i?n>0:i)?this.posAtEnd:this.posAtStart}nearestDesc(t,e=!1){for(let n=!0,i=t;i;i=i.parentNode){let r,s=this.getDesc(i);if(s&&(!e||s.node)){if(!n||!(r=s.nodeDOM)||(1==r.nodeType?r.contains(1==t.nodeType?t:t.parentNode):r==t))return s;n=!1}}}getDesc(t){let e=t.pmViewDesc;for(let t=e;t;t=t.parent)if(t==this)return e}posFromDOM(t,e,n){for(let i=t;i;i=i.parentNode){let r=this.getDesc(i);if(r)return r.localPosFromDOM(t,e,n)}return-1}descAt(t){for(let e=0,n=0;e<this.children.length;e++){let i=this.children[e],r=n+i.size;if(n==t&&r!=n){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(t<r)return i.descAt(t-n-i.border);n=r}}domFromPos(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let n=0,i=0;for(let e=0;n<this.children.length;n++){let r=this.children[n],s=e+r.size;if(s>t||r instanceof Ku){i=t-e;break}e=s}if(i)return this.children[n].domFromPos(i-this.children[n].border,e);for(let t;n&&!(t=this.children[n-1]).size&&t instanceof Ru&&t.side>=0;n--);if(e<=0){let t,i=!0;for(;t=n?this.children[n-1]:null,t&&t.dom.parentNode!=this.contentDOM;n--,i=!1);return t&&e&&i&&!t.border&&!t.domAtom?t.domFromPos(t.size,e):{node:this.contentDOM,offset:t?Rc(t.dom)+1:0}}{let t,i=!0;for(;t=n<this.children.length?this.children[n]:null,t&&t.dom.parentNode!=this.contentDOM;n++,i=!1);return t&&i&&!t.border&&!t.domAtom?t.domFromPos(0,e):{node:this.contentDOM,offset:t?Rc(t.dom):this.contentDOM.childNodes.length}}}parseRange(t,e,n=0){if(0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,r=-1;for(let s=n,o=0;;o++){let n=this.children[o],a=s+n.size;if(-1==i&&t<=a){let r=s+n.border;if(t>=r&&e<=a-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(t,e,r);t=s;for(let e=o;e>0;e--){let n=this.children[e-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){i=Rc(n.dom)+1;break}t-=n.size}-1==i&&(i=0)}if(i>-1&&(a>e||o==this.children.length-1)){e=a;for(let t=o+1;t<this.children.length;t++){let n=this.children[t];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){r=Rc(n.dom);break}e+=n.size}-1==r&&(r=this.contentDOM.childNodes.length);break}s=a}return{node:this.contentDOM,from:t,to:e,fromOffset:i,toOffset:r}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)}domAfterPos(t){let{node:e,offset:n}=this.domFromPos(t,0);if(1!=e.nodeType||n==e.childNodes.length)throw new RangeError("No node after pos "+t);return e.childNodes[n]}setSelection(t,e,n,i=!1){let r=Math.min(t,e),s=Math.max(t,e);for(let o=0,a=0;o<this.children.length;o++){let l=this.children[o],c=a+l.size;if(r>a&&s<c)return l.setSelection(t-a-l.border,e-a-l.border,n,i);a=c}let o=this.domFromPos(t,t?-1:1),a=e==t?o:this.domFromPos(e,e?-1:1),l=n.getSelection(),c=!1;if((ru||lu)&&t==e){let{node:t,offset:e}=o;if(3==t.nodeType){if(c=!(!e||"\n"!=t.nodeValue[e-1]),c&&e==t.nodeValue.length)for(let e,n=t;n;n=n.parentNode){if(e=n.nextSibling){"BR"==e.nodeName&&(o=a={node:e.parentNode,offset:Rc(e)+1});break}let t=n.pmViewDesc;if(t&&t.node&&t.node.isBlock)break}}else{let n=t.childNodes[e-1];c=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(ru&&l.focusNode&&l.focusNode!=a.node&&1==l.focusNode.nodeType){let t=l.focusNode.childNodes[l.focusOffset];t&&"false"==t.contentEditable&&(i=!0)}if(!(i||c&&lu)&&Hc(o.node,o.offset,l.anchorNode,l.anchorOffset)&&Hc(a.node,a.offset,l.focusNode,l.focusOffset))return;let u=!1;if((l.extend||t==e)&&!c){l.collapse(o.node,o.offset);try{t!=e&&l.extend(a.node,a.offset),u=!0}catch(t){}}if(!u){if(t>e){let t=o;o=a,a=t}let n=document.createRange();n.setEnd(a.node,a.offset),n.setStart(o.node,o.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(t){return!this.contentDOM&&"selection"!=t.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,e){for(let n=0,i=0;i<this.children.length;i++){let r=this.children[i],s=n+r.size;if(n==s?t<=s&&e>=n:t<s&&e>n){let i=n+r.border,o=s-r.border;if(t>=i&&e<=o)return this.dirty=t==n||e==s?2:1,void(t!=i||e!=o||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(t-i,e-i):r.dirty=3);r.dirty=r.dom!=r.contentDOM||r.dom.parentNode!=this.contentDOM||r.children.length?3:2}n=s}this.dirty=2}markParentsDirty(){let t=1;for(let e=this.parent;e;e=e.parent,t++){let n=1==t?2:1;e.dirty<n&&(e.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(t){return!1}}class Ru extends Fu{constructor(t,e,n,i){let r,s=e.type.toDOM;if("function"==typeof s&&(s=s(n,(()=>r?r.parent?r.parent.posBeforeChild(r):void 0:i))),!e.type.spec.raw){if(1!=s.nodeType){let t=document.createElement("span");t.appendChild(s),s=t}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(t,[],s,null),this.widget=e,this.widget=e,r=this}matchesWidget(t){return 0==this.dirty&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let e=this.widget.spec.stopEvent;return!!e&&e(t)}ignoreMutation(t){return"selection"!=t.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class $u extends Fu{constructor(t,e,n,i){super(t,[],e,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue}}class Vu extends Fu{constructor(t,e,n,i){super(t,[],n,i),this.mark=e}static create(t,e,n,i){let r=i.nodeViews[e.type.name],s=r&&r(e,i,n);return s&&s.dom||(s=_l.renderSpec(document,e.type.spec.toDOM(e,n))),new Vu(t,e,s.dom,s.contentDOM||s.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return 3!=this.dirty&&this.mark.eq(t)}markDirty(t,e){if(super.markDirty(t,e),0!=this.dirty){let t=this.parent;for(;!t.node;)t=t.parent;t.dirty<this.dirty&&(t.dirty=this.dirty),this.dirty=0}}slice(t,e,n){let i=Vu.create(this.parent,this.mark,!0,n),r=this.children,s=this.size;e<s&&(r=rd(r,e,s,n)),t>0&&(r=rd(r,0,t,n));for(let t=0;t<r.length;t++)r[t].parent=i;return i.children=r,i}}class zu extends Fu{constructor(t,e,n,i,r,s,o,a,l){super(t,[],r,s),this.node=e,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=o}static create(t,e,n,i,r,s){let o,a=r.nodeViews[e.type.name],l=a&&a(e,r,(()=>o?o.parent?o.parent.posBeforeChild(o):void 0:s),n,i),c=l&&l.dom,u=l&&l.contentDOM;if(e.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(e.text);else c||({dom:c,contentDOM:u}=_l.renderSpec(document,e.type.spec.toDOM(e)));u||e.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),e.type.spec.draggable&&(c.draggable=!0));let d=c;return c=Zu(c,n,e),l?o=new Wu(t,e,n,i,c,u||null,d,l,r,s+1):e.isText?new qu(t,e,n,i,c,d,r):new zu(t,e,n,i,c,u||null,d,r,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let e=this.children.length-1;e>=0;e--){let n=this.children[e];if(this.dom.contains(n.dom.parentNode)){t.contentElement=n.dom.parentNode;break}}t.contentElement||(t.getContent=()=>_a.empty)}else t.contentElement=this.contentDOM;else t.getContent=()=>this.node.content;return t}matchesNode(t,e,n){return 0==this.dirty&&t.eq(this.node)&&td(e,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,e){let n=this.node.inlineContent,i=e,r=t.composing?this.localCompositionInfo(t,e):null,s=r&&r.pos>-1?r:null,o=r&&r.pos<0,a=new nd(this,s&&s.node,t);!function(t,e,n,i){let r=e.locals(t),s=0;if(0==r.length){for(let n=0;n<t.childCount;n++){let o=t.child(n);i(o,r,e.forChild(s,o),n),s+=o.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d,h,p;for(;o<r.length&&r[o].to==s;){let t=r[o++];t.widget&&(u?(d||(d=[u])).push(t):u=t)}if(u)if(d){d.sort(id);for(let t=0;t<d.length;t++)n(d[t],c,!!l)}else n(u,c,!!l);if(l)p=-1,h=l,l=null;else{if(!(c<t.childCount))break;p=c,h=t.child(c++)}for(let t=0;t<a.length;t++)a[t].to<=s&&a.splice(t--,1);for(;o<r.length&&r[o].from<=s&&r[o].to>s;)a.push(r[o++]);let f=s+h.nodeSize;if(h.isText){let t=f;o<r.length&&r[o].from<t&&(t=r[o].from);for(let e=0;e<a.length;e++)a[e].to<t&&(t=a[e].to);t<f&&(l=h.cut(t-s),h=h.cut(0,t-s),f=t,p=-1)}else for(;o<r.length&&r[o].to<f;)o++;i(h,h.isInline&&!h.isLeaf?a.filter((t=>!t.inline)):a.slice(),e.forChild(s,h),p),s=f}}(this.node,this.innerDeco,((e,r,s)=>{e.spec.marks?a.syncToMarks(e.spec.marks,n,t):e.type.side>=0&&!s&&a.syncToMarks(r==this.node.childCount?Ea.none:this.node.child(r).marks,n,t),a.placeWidget(e,t,i)}),((e,s,l,c)=>{let u;a.syncToMarks(e.marks,n,t),a.findNodeMatch(e,s,l,c)||o&&t.state.selection.from>i&&t.state.selection.to<i+e.nodeSize&&(u=a.findIndexWithChild(r.node))>-1&&a.updateNodeAt(e,s,l,u,t)||a.updateNextNode(e,s,l,t,c,i)||a.addNode(e,s,l,t,i),i+=e.nodeSize})),a.syncToMarks([],n,t),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(s&&this.protectLocalComposition(t,s),Uu(this.contentDOM,this.children,t),cu&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom))}localCompositionInfo(t,e){let{from:n,to:i}=t.state.selection;if(!(t.state.selection instanceof wc)||n<e||i>e+this.node.content.size)return null;let r=t.input.compositionNode;if(!r||!this.dom.contains(r.parentNode))return null;if(this.node.inlineContent){let t=r.nodeValue,s=function(t,e,n,i){for(let r=0,s=0;r<t.childCount&&s<=i;){let o=t.child(r++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;r<t.childCount;){let e=t.child(r++);if(s+=e.nodeSize,!e.isText)break;l+=e.text}if(s>=n){if(s>=i&&l.slice(i-e.length-a,i-a)==e)return i-e.length;let t=a<i?l.lastIndexOf(e,i-a-1):-1;if(t>=0&&t+e.length+a>=n)return a+t;if(n==i&&l.length>=i+e.length-a&&l.slice(i-a,i-a+e.length)==e)return i}}return-1}(this.node.content,t,n-e,i-e);return s<0?null:{node:r,pos:s,text:t}}return{node:r,pos:-1,text:""}}protectLocalComposition(t,{node:e,pos:n,text:i}){if(this.getDesc(e))return;let r=e;for(;r.parentNode!=this.contentDOM;r=r.parentNode){for(;r.previousSibling;)r.parentNode.removeChild(r.previousSibling);for(;r.nextSibling;)r.parentNode.removeChild(r.nextSibling);r.pmViewDesc&&(r.pmViewDesc=void 0)}let s=new $u(this,r,e,i);t.input.compositionNodes.push(s),this.children=rd(this.children,n,n+i.length,t,s)}update(t,e,n,i){return!(3==this.dirty||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,i),!0)}updateInner(t,e,n,i){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=0}updateOuterDeco(t){if(td(t,this.outerDeco))return;let e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Qu(this.dom,this.nodeDOM,Yu(this.outerDeco,this.node,e),Yu(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Hu(t,e,n,i,r){Zu(i,e,t);let s=new zu(void 0,t,e,n,i,i,i,r,0);return s.contentDOM&&s.updateChildren(r,0),s}class qu extends zu{constructor(t,e,n,i,r,s,o){super(t,e,n,i,r,null,s,o,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,e,n,i){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=0,!0)}inParent(){let t=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,e,n){return t==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(t,e,n)}ignoreMutation(t){return"characterData"!=t.type&&"selection"!=t.type}slice(t,e,n){let i=this.node.cut(t,e),r=document.createTextNode(i.text);return new qu(this.parent,i,this.outerDeco,this.innerDeco,r,r,n)}markDirty(t,e){super.markDirty(t,e),this.dom==this.nodeDOM||0!=t&&e!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}isText(t){return this.node.text==t}}class Ku extends Fu{parseRule(){return{ignore:!0}}matchesHack(t){return 0==this.dirty&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class Wu extends zu{constructor(t,e,n,i,r,s,o,a,l,c){super(t,e,n,i,r,s,o,l,c),this.spec=a}update(t,e,n,i){if(3==this.dirty)return!1;if(this.spec.update){let r=this.spec.update(t,e,n);return r&&this.updateInner(t,e,n,i),r}return!(!this.contentDOM&&!t.isLeaf)&&super.update(t,e,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,e,n,i){this.spec.setSelection?this.spec.setSelection(t,e,n):super.setSelection(t,e,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function Uu(t,e,n){let i=t.firstChild,r=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=i;)i=ed(i),r=!0;i=i.nextSibling}else r=!0,t.insertBefore(a,i);if(o instanceof Vu){let e=i?i.previousSibling:t.lastChild;Uu(o.contentDOM,o.children,n),i=e?e.nextSibling:t.firstChild}}for(;i;)i=ed(i),r=!0;r&&n.trackWrites==t&&(n.trackWrites=null)}const Gu=function(t){t&&(this.nodeName=t)};Gu.prototype=Object.create(null);const Ju=[new Gu];function Yu(t,e,n){if(0==t.length)return Ju;let i=n?Ju[0]:new Gu,r=[i];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&r.push(i=new Gu(o.nodeName));for(let t in o){let s=o[t];null!=s&&(n&&1==r.length&&r.push(i=new Gu(e.isInline?"span":"div")),"class"==t?i.class=(i.class?i.class+" ":"")+s:"style"==t?i.style=(i.style?i.style+";":"")+s:"nodeName"!=t&&(i[t]=s))}}}return r}function Qu(t,e,n,i){if(n==Ju&&i==Ju)return e;let r=e;for(let e=0;e<i.length;e++){let s=i[e],o=n[e];if(e){let e;o&&o.nodeName==s.nodeName&&r!=t&&(e=r.parentNode)&&e.nodeName.toLowerCase()==s.nodeName||(e=document.createElement(s.nodeName),e.pmIsDeco=!0,e.appendChild(r),o=Ju[0]),r=e}Xu(r,o||Ju[0],s)}return r}function Xu(t,e,n){for(let i in e)"class"==i||"style"==i||"nodeName"==i||i in n||t.removeAttribute(i);for(let i in n)"class"!=i&&"style"!=i&&"nodeName"!=i&&n[i]!=e[i]&&t.setAttribute(i,n[i]);if(e.class!=n.class){let i=e.class?e.class.split(" ").filter(Boolean):[],r=n.class?n.class.split(" ").filter(Boolean):[];for(let e=0;e<i.length;e++)-1==r.indexOf(i[e])&&t.classList.remove(i[e]);for(let e=0;e<r.length;e++)-1==i.indexOf(r[e])&&t.classList.add(r[e]);0==t.classList.length&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let n,i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;n=i.exec(e.style);)t.style.removeProperty(n[1])}n.style&&(t.style.cssText+=n.style)}}function Zu(t,e,n){return Qu(t,t,Ju,Yu(e,n,1!=t.nodeType))}function td(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function ed(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class nd{constructor(t,e,n){this.lock=e,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=function(t,e){let n=e,i=n.children.length,r=t.childCount,s=new Map,o=[];t:for(;r>0;){let a;for(;;)if(i){let t=n.children[i-1];if(!(t instanceof Vu)){a=t,i--;break}n=t,i=t.children.length}else{if(n==e)break t;i=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(r-1))break;--r,s.set(a,r),o.push(a)}}return{index:r,matched:s,matches:o.reverse()}}(t.node.content,t)}destroyBetween(t,e){if(t!=e){for(let n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,e,n){let i=0,r=this.stack.length>>1,s=Math.min(r,t.length);for(;i<s&&(i==r-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&!1!==t[i].type.spec.spanning;)i++;for(;i<r;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<t.length;){this.stack.push(this.top,this.index+1);let i=-1;for(let e=this.index;e<Math.min(this.index+3,this.top.children.length);e++){let n=this.top.children[e];if(n.matchesMark(t[r])&&!this.isLocked(n.dom)){i=e;break}}if(i>-1)i>this.index&&(this.changed=!0,this.destroyBetween(this.index,i)),this.top=this.top.children[this.index];else{let i=Vu.create(this.top,t[r],e,n);this.top.children.splice(this.index,0,i),this.top=i,this.changed=!0}this.index=0,r++}}findNodeMatch(t,e,n,i){let r,s=-1;if(i>=this.preMatch.index&&(r=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&r.matchesNode(t,e,n))s=this.top.children.indexOf(r,this.index);else for(let i=this.index,r=Math.min(this.top.children.length,i+5);i<r;i++){let r=this.top.children[i];if(r.matchesNode(t,e,n)&&!this.preMatch.matched.has(r)){s=i;break}}return!(s<0)&&(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,e,n,i,r){let s=this.top.children[i];return 3==s.dirty&&s.dom==s.contentDOM&&(s.dirty=2),!!s.update(t,e,n,r)&&(this.destroyBetween(this.index,i),this.index++,!0)}findIndexWithChild(t){for(;;){let e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let e=t.pmViewDesc;if(e)for(let t=this.index;t<this.top.children.length;t++)if(this.top.children[t]==e)return t;return-1}t=e}}updateNextNode(t,e,n,i,r,s){for(let o=this.index;o<this.top.children.length;o++){let a=this.top.children[o];if(a instanceof zu){let l=this.preMatch.matched.get(a);if(null!=l&&l!=r)return!1;let c,u=a.dom,d=this.isLocked(u)&&!(t.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==t.text&&3!=a.dirty&&td(e,a.outerDeco));if(!d&&a.update(t,e,n,i))return this.destroyBetween(this.index,o),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(c=this.recreateWrapper(a,t,e,n,i,s)))return this.top.children[this.index]=c,c.contentDOM&&(c.dirty=2,c.updateChildren(i,s+1),c.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,e,n,i,r,s){if(t.dirty||e.isAtom||!t.children.length||!t.node.content.eq(e.content))return null;let o=zu.create(this.top,e,n,i,r,s);if(o.contentDOM){o.children=t.children,t.children=[];for(let t of o.children)t.parent=o}return t.destroy(),o}addNode(t,e,n,i,r){let s=zu.create(this.top,t,e,n,i,r);s.contentDOM&&s.updateChildren(i,r+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(t,e,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(!i||!i.matchesWidget(t)||t!=i.widget&&i.widget.type.toDOM.parentNode){let i=new Ru(this.top,t,e,n);this.top.children.splice(this.index++,0,i),this.changed=!0}else this.index++}addTextblockHacks(){let t=this.top.children[this.index-1],e=this.top;for(;t instanceof Vu;)e=t,t=e.children[e.children.length-1];(!t||!(t instanceof qu)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((lu||ou)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{let n=document.createElement(t);"IMG"==t&&(n.className="ProseMirror-separator",n.alt=""),"BR"==t&&(n.className="ProseMirror-trailingBreak");let i=new Ku(this.top,[],n,null);e!=this.top?e.children.push(i):e.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||1==t.nodeType&&t.contains(this.lock.parentNode))}}function id(t,e){return t.type.side-e.type.side}function rd(t,e,n,i,r){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,i)),r&&(s.push(r),r=void 0),u>n&&s.push(l.slice(n-c,l.size,i)))}return s}function sd(t,e=null){let n=t.domSelectionRange(),i=t.state.doc;if(!n.focusNode)return null;let r=t.docView.nearestDesc(n.focusNode),s=r&&0==r.size,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a,l,c=i.resolve(o);if(Gc(n)){for(a=c;r&&!r.node;)r=r.parent;let t=r.node;if(r&&t.isAtom&&xc.isSelectable(t)&&r.parent&&(!t.isInline||!function(t,e,n){for(let i=0==e,r=e==Wc(t);i||r;){if(t==n)return!0;let e=Rc(t);if(!(t=t.parentNode))return!1;i=i&&0==e,r=r&&e==Wc(t)}}(n.focusNode,n.focusOffset,r.dom))){let t=r.posBefore;l=new xc(o==t?c:i.resolve(t))}}else{let e=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(e<0)return null;a=i.resolve(e)}if(!l){l=fd(t,a,c,"pointer"==e||t.state.selection.head<c.pos&&!s?1:-1)}return l}function od(t){return t.editable?t.hasFocus():gd(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function ad(t,e=!1){let n=t.state.selection;if(hd(t,n),od(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&ou){let e=t.domSelectionRange(),n=t.domObserver.currentSelection;if(e.anchorNode&&n.anchorNode&&Hc(e.anchorNode,e.anchorOffset,n.anchorNode,n.anchorOffset))return t.input.mouseDown.delayedSelectionSync=!0,void t.domObserver.setCurSelection()}if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function(t){let e=t.domSelection(),n=document.createRange(),i=t.cursorWrapper.dom,r="IMG"==i.nodeName;r?n.setEnd(i.parentNode,Rc(i)+1):n.setEnd(i,0);n.collapse(!1),e.removeAllRanges(),e.addRange(n),!r&&!t.state.selection.visible&&nu&&iu<=11&&(i.disabled=!0,i.disabled=!1)}(t);else{let i,r,{anchor:s,head:o}=n;!ld||n instanceof wc||(n.$from.parent.inlineContent||(i=cd(t,n.from)),n.empty||n.$from.parent.inlineContent||(r=cd(t,n.to))),t.docView.setSelection(s,o,t.root,e),ld&&(i&&dd(i),r&&dd(r)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),i=n.anchorNode,r=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{n.anchorNode==i&&n.anchorOffset==r||(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout((()=>{od(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const ld=lu||ou&&au<63;function cd(t,e){let{node:n,offset:i}=t.docView.domFromPos(e,0),r=i<n.childNodes.length?n.childNodes[i]:null,s=i?n.childNodes[i-1]:null;if(lu&&r&&"false"==r.contentEditable)return ud(r);if(!(r&&"false"!=r.contentEditable||s&&"false"!=s.contentEditable)){if(r)return ud(r);if(s)return ud(s)}}function ud(t){return t.contentEditable="true",lu&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function dd(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function hd(t,e){if(e instanceof xc){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(pd(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else pd(t)}function pd(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function fd(t,e,n,i){return t.someProp("createSelectionBetween",(i=>i(t,e,n)))||wc.between(e,n,i)}function md(t){return!(t.editable&&!t.hasFocus())&&gd(t)}function gd(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(t){return!1}}function vd(t,e){let{$anchor:n,$head:i}=t.selection,r=e>0?n.max(i):n.min(i),s=r.parent.inlineContent?r.depth?t.doc.resolve(e>0?r.after():r.before()):null:r;return s&&gc.findFrom(s,e)}function yd(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function bd(t,e,n){let i=t.state.selection;if(!(i instanceof wc)){if(i instanceof xc&&i.node.isInline)return yd(t,new wc(e>0?i.$to:i.$from));{let n=vd(t.state,e);return!!n&&yd(t,n)}}if(n.indexOf("s")>-1){let{$head:n}=i,r=n.textOffset?null:e<0?n.nodeBefore:n.nodeAfter;if(!r||r.isText||!r.isLeaf)return!1;let s=t.state.doc.resolve(n.pos+r.nodeSize*(e<0?-1:1));return yd(t,new wc(i.$anchor,s))}if(!i.empty)return!1;if(t.endOfTextblock(e>0?"forward":"backward")){let n=vd(t.state,e);return!!(n&&n instanceof xc)&&yd(t,n)}if(!(uu&&n.indexOf("m")>-1)){let n,r=i.$head,s=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter;if(!s||s.isText)return!1;let o=e<0?r.pos-s.nodeSize:r.pos;return!!(s.isAtom||(n=t.docView.descAt(o))&&!n.contentDOM)&&(xc.isSelectable(s)?yd(t,new xc(e<0?t.state.doc.resolve(r.pos-s.nodeSize):r)):!!pu&&yd(t,new wc(t.state.doc.resolve(e<0?o:o+s.nodeSize))))}}function wd(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function kd(t,e){let n=t.pmViewDesc;return n&&0==n.size&&(e<0||t.nextSibling||"BR"!=t.nodeName)}function xd(t,e){return e<0?function(t){let e=t.domSelectionRange(),n=e.focusNode,i=e.focusOffset;if(!n)return;let r,s,o=!1;ru&&1==n.nodeType&&i<wd(n)&&kd(n.childNodes[i],-1)&&(o=!0);for(;;)if(i>0){if(1!=n.nodeType)break;{let t=n.childNodes[i-1];if(kd(t,-1))r=n,s=--i;else{if(3!=t.nodeType)break;n=t,i=n.nodeValue.length}}}else{if(Sd(n))break;{let e=n.previousSibling;for(;e&&kd(e,-1);)r=n.parentNode,s=Rc(e),e=e.previousSibling;if(e)n=e,i=wd(n);else{if(n=n.parentNode,n==t.dom)break;i=0}}}o?Cd(t,n,i):r&&Cd(t,r,s)}(t):function(t){let e=t.domSelectionRange(),n=e.focusNode,i=e.focusOffset;if(!n)return;let r,s,o=wd(n);for(;;)if(i<o){if(1!=n.nodeType)break;if(!kd(n.childNodes[i],1))break;r=n,s=++i}else{if(Sd(n))break;{let e=n.nextSibling;for(;e&&kd(e,1);)r=e.parentNode,s=Rc(e)+1,e=e.nextSibling;if(e)n=e,i=0,o=wd(n);else{if(n=n.parentNode,n==t.dom)break;i=o=0}}}r&&Cd(t,r,s)}(t)}function Sd(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Cd(t,e,n){if(3!=e.nodeType){let t,i;(i=function(t,e){for(;t&&e==t.childNodes.length&&!Uc(t);)e=Rc(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=n,e=0}}(e,n))?(e=i,n=0):(t=function(t,e){for(;t&&!e&&!Uc(t);)e=Rc(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=(t=n).childNodes.length}}(e,n))&&(e=t,n=t.nodeValue.length)}let i=t.domSelection();if(Gc(i)){let t=document.createRange();t.setEnd(e,n),t.setStart(e,n),i.removeAllRanges(),i.addRange(t)}else i.extend&&i.extend(e,n);t.domObserver.setCurSelection();let{state:r}=t;setTimeout((()=>{t.state==r&&ad(t)}),50)}function _d(t,e){let n=t.state.doc.resolve(e);if(!ou&&!du&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let n=t.coordsAtPos(e-1),r=(n.top+n.bottom)/2;if(r>i.top&&r<i.bottom&&Math.abs(n.left-i.left)>1)return n.left<i.left?"ltr":"rtl"}if(e<n.end()){let n=t.coordsAtPos(e+1),r=(n.top+n.bottom)/2;if(r>i.top&&r<i.bottom&&Math.abs(n.left-i.left)>1)return n.left>i.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(t.dom).direction?"rtl":"ltr"}function Td(t,e,n){let i=t.state.selection;if(i instanceof wc&&!i.empty||n.indexOf("s")>-1)return!1;if(uu&&n.indexOf("m")>-1)return!1;let{$from:r,$to:s}=i;if(!r.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let n=vd(t.state,e);if(n&&n instanceof xc)return yd(t,n)}if(!r.parent.inlineContent){let n=e<0?r:s,o=i instanceof Cc?gc.near(n,e):gc.findFrom(n,e);return!!o&&yd(t,o)}return!1}function Md(t,e){if(!(t.state.selection instanceof wc))return!0;let{$head:n,$anchor:i,empty:r}=t.state.selection;if(!n.sameParent(i))return!0;if(!r)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let i=t.state.tr;return e<0?i.delete(n.pos-s.nodeSize,n.pos):i.delete(n.pos,n.pos+s.nodeSize),t.dispatch(i),!0}return!1}function Od(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Ed(t,e){let n=e.keyCode,i=function(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);if(8==n||uu&&72==n&&"c"==i)return Md(t,-1)||xd(t,-1);if(46==n&&!e.shiftKey||uu&&68==n&&"c"==i)return Md(t,1)||xd(t,1);if(13==n||27==n)return!0;if(37==n||uu&&66==n&&"c"==i){let e=37==n?"ltr"==_d(t,t.state.selection.from)?-1:1:-1;return bd(t,e,i)||xd(t,e)}if(39==n||uu&&70==n&&"c"==i){let e=39==n?"ltr"==_d(t,t.state.selection.from)?1:-1:1;return bd(t,e,i)||xd(t,e)}return 38==n||uu&&80==n&&"c"==i?Td(t,-1,i)||xd(t,-1):40==n||uu&&78==n&&"c"==i?function(t){if(!lu||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&1==e.nodeType&&0==n&&e.firstChild&&"false"==e.firstChild.contentEditable){let n=e.firstChild;Od(t,n,"true"),setTimeout((()=>Od(t,n,"false")),20)}return!1}(t)||Td(t,1,i)||xd(t,1):i==(uu?"m":"c")&&(66==n||73==n||89==n||90==n)}function Ad(t,e){t.someProp("transformCopied",(n=>{e=n(e,t)}));let n=[],{content:i,openStart:r,openEnd:s}=e;for(;r>1&&s>1&&1==i.childCount&&1==i.firstChild.childCount;){r--,s--;let t=i.firstChild;n.push(t.type.name,t.attrs!=t.type.defaultAttrs?t.attrs:null),i=t.content}let o=t.someProp("clipboardSerializer")||_l.fromSchema(t.state.schema),a=$d(),l=a.createElement("div");l.appendChild(o.serializeFragment(i,{document:a}));let c,u=l.firstChild,d=0;for(;u&&1==u.nodeType&&(c=Fd[u.nodeName.toLowerCase()]);){for(let t=c.length-1;t>=0;t--){let e=a.createElement(c[t]);for(;l.firstChild;)e.appendChild(l.firstChild);l.appendChild(e),d++}u=l.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",`${r} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`),{dom:l,text:t.someProp("clipboardTextSerializer",(n=>n(e,t)))||e.content.textBetween(0,e.content.size,"\n\n"),slice:e}}function Nd(t,e,n,i,r){let s,o,a=r.parent.type.spec.code;if(!n&&!e)return null;let l=e&&(i||a||!n);if(l){if(t.someProp("transformPastedText",(n=>{e=n(e,a||i,t)})),a)return e?new Na(_a.from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):Na.empty;let n=t.someProp("clipboardTextParser",(n=>n(e,r,i,t)));if(n)o=n;else{let n=r.marks(),{schema:i}=t.state,o=_l.fromSchema(i);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach((t=>{let e=s.appendChild(document.createElement("p"));t&&e.appendChild(o.serializeNode(i.text(t,n)))}))}}else t.someProp("transformPastedHTML",(e=>{n=e(n,t)})),s=function(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n,i=$d().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t);(n=r&&Fd[r[1].toLowerCase()])&&(t=n.map((t=>"<"+t+">")).join("")+t+n.map((t=>"</"+t+">")).reverse().join(""));if(i.innerHTML=t,n)for(let t=0;t<n.length;t++)i=i.querySelector(n[t])||i;return i}(n),pu&&function(t){let e=t.querySelectorAll(ou?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let i=e[n];1==i.childNodes.length&&" "==i.textContent&&i.parentNode&&i.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),i)}}(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let t=+u[3];t>0;t--){let t=s.firstChild;for(;t&&1!=t.nodeType;)t=t.nextSibling;if(!t)break;s=t}if(!o){let e=t.someProp("clipboardParser")||t.someProp("domParser")||ml.fromSchema(t.state.schema);o=e.parseSlice(s,{preserveWhitespace:!(!l&&!u),context:r,ruleFromNode(t){return"BR"!=t.nodeName||t.nextSibling||!t.parentNode||Dd.test(t.parentNode.nodeName)?null:{ignore:!0}}})}if(u)o=function(t,e){if(!t.size)return t;let n,i=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(e){return t}let{content:r,openStart:s,openEnd:o}=t;for(let t=n.length-2;t>=0;t-=2){let e=i.nodes[n[t]];if(!e||e.hasRequiredAttrs())break;r=_a.from(e.create(n[t+1],r)),s++,o++}return new Na(r,s,o)}(jd(o,+u[1],+u[2]),u[4]);else if(o=Na.maxOpen(function(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i,r=e.node(n).contentMatchAt(e.index(n)),s=[];if(t.forEach((t=>{if(!s)return;let e,n=r.findWrapping(t.type);if(!n)return s=null;if(e=s.length&&i.length&&Id(n,i,t,s[s.length-1],0))s[s.length-1]=e;else{s.length&&(s[s.length-1]=Pd(s[s.length-1],i.length));let e=Ld(t,n);s.push(e),r=r.matchType(e.type),i=n}})),s)return _a.from(s)}return t}(o.content,r),!0),o.openStart||o.openEnd){let t=0,e=0;for(let e=o.content.firstChild;t<o.openStart&&!e.type.spec.isolating;t++,e=e.firstChild);for(let t=o.content.lastChild;e<o.openEnd&&!t.type.spec.isolating;e++,t=t.lastChild);o=jd(o,t,e)}return t.someProp("transformPasted",(e=>{o=e(o,t)})),o}const Dd=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Ld(t,e,n=0){for(let i=e.length-1;i>=n;i--)t=e[i].create(null,_a.from(t));return t}function Id(t,e,n,i,r){if(r<t.length&&r<e.length&&t[r]==e[r]){let s=Id(t,e,n,i.lastChild,r+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(r==t.length-1?n.type:t[r+1]))return i.copy(i.content.append(_a.from(Ld(n,t,r+1))))}}function Pd(t,e){if(0==e)return t;let n=t.content.replaceChild(t.childCount-1,Pd(t.lastChild,e-1)),i=t.contentMatchAt(t.childCount).fillBefore(_a.empty,!0);return t.copy(n.append(i))}function Bd(t,e,n,i,r,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),r<i-1&&(a=Bd(a,e,n,i,r+1,s)),r>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=r).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(_a.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function jd(t,e,n){return e<t.openStart&&(t=new Na(Bd(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Na(Bd(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const Fd={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Rd=null;function $d(){return Rd||(Rd=document.implementation.createHTMLDocument("title"))}const Vd={},zd={},Hd={touchstart:!0,touchmove:!0};class qd{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Kd(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Wd(t){t.someProp("handleDOMEvents",(e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=e=>Ud(t,e))}))}function Ud(t,e){return t.someProp("handleDOMEvents",(n=>{let i=n[e.type];return!!i&&(i(t,e)||e.defaultPrevented)}))}function Gd(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Jd(t){return{left:t.clientX,top:t.clientY}}function Yd(t,e,n,i,r){if(-1==i)return!1;let s=t.state.doc.resolve(i);for(let i=s.depth+1;i>0;i--)if(t.someProp(e,(e=>i>s.depth?e(t,n,s.nodeAfter,s.before(i),r,!0):e(t,n,s.node(i),s.before(i),r,!1))))return!0;return!1}function Qd(t,e,n){t.focused||t.focus();let i=t.state.tr.setSelection(e);"pointer"==n&&i.setMeta("pointer",!0),t.dispatch(i)}function Xd(t,e,n,i,r){return Yd(t,"handleClickOn",e,n,i)||t.someProp("handleClick",(n=>n(t,e,i)))||(r?function(t,e){if(-1==e)return!1;let n,i,r=t.state.selection;r instanceof xc&&(n=r.node);let s=t.state.doc.resolve(e);for(let t=s.depth+1;t>0;t--){let e=t>s.depth?s.nodeAfter:s.node(t);if(xc.isSelectable(e)){i=n&&r.$from.depth>0&&t>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?s.before(r.$from.depth):s.before(t);break}}return null!=i&&(Qd(t,xc.create(t.state.doc,i),"pointer"),!0)}(t,n):function(t,e){if(-1==e)return!1;let n=t.state.doc.resolve(e),i=n.nodeAfter;return!!(i&&i.isAtom&&xc.isSelectable(i))&&(Qd(t,new xc(n),"pointer"),!0)}(t,n))}function Zd(t,e,n,i){return Yd(t,"handleDoubleClickOn",e,n,i)||t.someProp("handleDoubleClick",(n=>n(t,e,i)))}function th(t,e,n,i){return Yd(t,"handleTripleClickOn",e,n,i)||t.someProp("handleTripleClick",(n=>n(t,e,i)))||function(t,e,n){if(0!=n.button)return!1;let i=t.state.doc;if(-1==e)return!!i.inlineContent&&(Qd(t,wc.create(i,0,i.content.size),"pointer"),!0);let r=i.resolve(e);for(let e=r.depth+1;e>0;e--){let n=e>r.depth?r.nodeAfter:r.node(e),s=r.before(e);if(n.inlineContent)Qd(t,wc.create(i,s+1,s+1+n.content.size),"pointer");else{if(!xc.isSelectable(n))continue;Qd(t,xc.create(i,s),"pointer")}return!0}}(t,n,i)}function eh(t){return ch(t)}zd.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=16==n.keyCode||n.shiftKey,!rh(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!hu||!ou||13!=n.keyCode))if(229!=n.keyCode&&t.domObserver.forceFlush(),!cu||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)t.someProp("handleKeyDown",(e=>e(t,n)))||Ed(t,n)?n.preventDefault():Kd(t,"key");else{let e=Date.now();t.input.lastIOSEnter=e,t.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{t.input.lastIOSEnter==e&&(t.someProp("handleKeyDown",(e=>e(t,Jc(13,"Enter")))),t.input.lastIOSEnter=0)}),200)}},zd.keyup=(t,e)=>{16==e.keyCode&&(t.input.shiftKey=!1)},zd.keypress=(t,e)=>{let n=e;if(rh(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||uu&&n.metaKey)return;if(t.someProp("handleKeyPress",(e=>e(t,n))))return void n.preventDefault();let i=t.state.selection;if(!(i instanceof wc&&i.$from.sameParent(i.$to))){let e=String.fromCharCode(n.charCode);/[\r\n]/.test(e)||t.someProp("handleTextInput",(n=>n(t,i.$from.pos,i.$to.pos,e)))||t.dispatch(t.state.tr.insertText(e).scrollIntoView()),n.preventDefault()}};const nh=uu?"metaKey":"ctrlKey";Vd.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let i=eh(t),r=Date.now(),s="singleClick";r-t.input.lastClick.time<500&&function(t,e){let n=e.x-t.clientX,i=e.y-t.clientY;return n*n+i*i<100}(n,t.input.lastClick)&&!n[nh]&&("singleClick"==t.input.lastClick.type?s="doubleClick":"doubleClick"==t.input.lastClick.type&&(s="tripleClick")),t.input.lastClick={time:r,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(Jd(n));o&&("singleClick"==s?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new ih(t,o,n,!!i)):("doubleClick"==s?Zd:th)(t,o.pos,o.inside,n)?n.preventDefault():Kd(t,"pointer"))};class ih{constructor(t,e,n,i){let r,s;if(this.view=t,this.pos=e,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!n[nh],this.allowDefault=n.shiftKey,e.inside>-1)r=t.state.doc.nodeAt(e.inside),s=e.inside;else{let n=t.state.doc.resolve(e.pos);r=n.parent,s=n.depth?n.before():0}const o=i?null:n.target,a=o?t.docView.nearestDesc(o,!0):null;this.target=a&&1==a.dom.nodeType?a.dom:null;let{selection:l}=t.state;(0==n.button&&r.type.spec.draggable&&!1!==r.type.spec.selectable||l instanceof xc&&l.from<=s&&l.to>s)&&(this.mightDrag={node:r,pos:s,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!ru||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Kd(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>ad(this.view))),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Jd(t))),this.updateAllowDefault(t),this.allowDefault||!e?Kd(this.view,"pointer"):Xd(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||lu&&this.mightDrag&&!this.mightDrag.node.isAtom||ou&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(Qd(this.view,gc.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):Kd(this.view,"pointer")}move(t){this.updateAllowDefault(t),Kd(this.view,"pointer"),0==t.buttons&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}function rh(t,e){return!!t.composing||!!(lu&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500)&&(t.input.compositionEndedAt=-2e8,!0)}Vd.touchstart=t=>{t.input.lastTouch=Date.now(),eh(t),Kd(t,"pointer")},Vd.touchmove=t=>{t.input.lastTouch=Date.now(),Kd(t,"pointer")},Vd.contextmenu=t=>eh(t);const sh=hu?5e3:-1;function oh(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout((()=>ch(t)),e))}function ah(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=function(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function lh(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=function(t,e){for(;;){if(3==t.nodeType&&e)return t;if(1==t.nodeType&&e>0){if("false"==t.contentEditable)return null;e=Wc(t=t.childNodes[e-1])}else{if(!t.parentNode||Uc(t))return null;e=Rc(t),t=t.parentNode}}}(e.focusNode,e.focusOffset),i=function(t,e){for(;;){if(3==t.nodeType&&e<t.nodeValue.length)return t;if(1==t.nodeType&&e<t.childNodes.length){if("false"==t.contentEditable)return null;t=t.childNodes[e],e=0}else{if(!t.parentNode||Uc(t))return null;e=Rc(t)+1,t=t.parentNode}}}(e.focusNode,e.focusOffset);if(n&&i&&n!=i){let e=i.pmViewDesc,r=t.domObserver.lastChangedTextNode;if(n==r||i==r)return r;if(!e||!e.isText(i.nodeValue))return i;if(t.input.compositionNode==i){let t=n.pmViewDesc;if(t&&t.isText(n.nodeValue))return i}}return n||i}function ch(t,e=!1){if(!(hu&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),ah(t),e||t.docView&&t.docView.dirty){let e=sd(t);return e&&!e.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(e)):t.updateState(t.state),!0}return!1}}zd.compositionstart=zd.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((t=>!1===t.type.spec.inclusive))))t.markCursor=t.state.storedMarks||n.marks(),ch(t,!0),t.markCursor=null;else if(ch(t),ru&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let e=t.domSelectionRange();for(let n=e.focusNode,i=e.focusOffset;n&&1==n.nodeType&&0!=i;){let e=i<0?n.lastChild:n.childNodes[i-1];if(!e)break;if(3==e.nodeType){t.domSelection().collapse(e,e.nodeValue.length);break}n=e,i=-1}}t.input.composing=!0}oh(t,sh)},zd.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then((()=>t.domObserver.flush())),t.input.compositionID++,oh(t,20))};const uh=nu&&iu<15||cu&&fu<604;function dh(t,e,n,i,r){let s=Nd(t,e,n,i,t.state.selection.$from);if(t.someProp("handlePaste",(e=>e(t,r,s||Na.empty))))return!0;if(!s)return!1;let o=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(s),a=o?t.state.tr.replaceSelectionWith(o,i):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function hh(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Vd.copy=zd.cut=(t,e)=>{let n=e,i=t.state.selection,r="cut"==n.type;if(i.empty)return;let s=uh?null:n.clipboardData,o=i.content(),{dom:a,text:l}=Ad(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):function(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),r=document.createRange();r.selectNodeContents(e),t.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}(t,a),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},zd.paste=(t,e)=>{let n=e;if(t.composing&&!hu)return;let i=uh?null:n.clipboardData,r=t.input.shiftKey&&45!=t.input.lastKeyCode;i&&dh(t,hh(i),i.getData("text/html"),r,n)?n.preventDefault():function(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,i=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let r=t.input.shiftKey&&45!=t.input.lastKeyCode;setTimeout((()=>{t.focus(),i.parentNode&&i.parentNode.removeChild(i),n?dh(t,i.value,null,r,e):dh(t,i.textContent,i.innerHTML,r,e)}),50)}(t,n)};class ph{constructor(t,e,n){this.slice=t,this.move=e,this.node=n}}const fh=uu?"altKey":"ctrlKey";Vd.dragstart=(t,e)=>{let n=e,i=t.input.mouseDown;if(i&&i.done(),!n.dataTransfer)return;let r,s=t.state.selection,o=s.empty?null:t.posAtCoords(Jd(n));if(o&&o.pos>=s.from&&o.pos<=(s instanceof xc?s.to-1:s.to));else if(i&&i.mightDrag)r=xc.create(t.state.doc,i.mightDrag.pos);else if(n.target&&1==n.target.nodeType){let e=t.docView.nearestDesc(n.target,!0);e&&e.node.type.spec.draggable&&e!=t.docView&&(r=xc.create(t.state.doc,e.posBefore))}let a=(r||t.state.selection).content(),{dom:l,text:c,slice:u}=Ad(t,a);n.dataTransfer.clearData(),n.dataTransfer.setData(uh?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",uh||n.dataTransfer.setData("text/plain",c),t.dragging=new ph(u,!n[fh],r)},Vd.dragend=t=>{let e=t.dragging;window.setTimeout((()=>{t.dragging==e&&(t.dragging=null)}),50)},zd.dragover=zd.dragenter=(t,e)=>e.preventDefault(),zd.drop=(t,e)=>{let n=e,i=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let r=t.posAtCoords(Jd(n));if(!r)return;let s=t.state.doc.resolve(r.pos),o=i&&i.slice;o?t.someProp("transformPasted",(e=>{o=e(o,t)})):o=Nd(t,hh(n.dataTransfer),uh?null:n.dataTransfer.getData("text/html"),!1,s);let a=!(!i||n[fh]);if(t.someProp("handleDrop",(e=>e(t,n,o||Na.empty,a))))return void n.preventDefault();if(!o)return;n.preventDefault();let l=o?tc(t.state.doc,s.pos,o):s.pos;null==l&&(l=s.pos);let c=t.state.tr;if(a){let{node:t}=i;t?t.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=0==o.openStart&&0==o.openEnd&&1==o.content.childCount,h=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(h))return;let p=c.doc.resolve(u);if(d&&xc.isSelectable(o.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new xc(p));else{let e=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach(((t,n,i,r)=>e=r)),c.setSelection(fd(t,p,c.doc.resolve(e)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))},Vd.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&ad(t)}),20))},Vd.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)},Vd.beforeinput=(t,e)=>{if(ou&&hu&&"deleteContentBackward"==e.inputType){t.domObserver.flushSoon();let{domChangeCount:e}=t.input;setTimeout((()=>{if(t.input.domChangeCount!=e)return;if(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",(e=>e(t,Jc(8,"Backspace")))))return;let{$cursor:n}=t.state.selection;n&&n.pos>0&&t.dispatch(t.state.tr.delete(n.pos-1,n.pos).scrollIntoView())}),50)}};for(let t in zd)Vd[t]=zd[t];function mh(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class gh{constructor(t,e){this.toDOM=t,this.spec=e||kh,this.side=this.spec.side||0}map(t,e,n,i){let{pos:r,deleted:s}=t.mapResult(e.from+i,this.side<0?-1:1);return s?null:new bh(r-n,r-n,this)}valid(){return!0}eq(t){return this==t||t instanceof gh&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&mh(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class vh{constructor(t,e){this.attrs=t,this.spec=e||kh}map(t,e,n,i){let r=t.map(e.from+i,this.spec.inclusiveStart?-1:1)-n,s=t.map(e.to+i,this.spec.inclusiveEnd?1:-1)-n;return r>=s?null:new bh(r,s,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof vh&&mh(this.attrs,t.attrs)&&mh(this.spec,t.spec)}static is(t){return t.type instanceof vh}destroy(){}}class yh{constructor(t,e){this.attrs=t,this.spec=e||kh}map(t,e,n,i){let r=t.mapResult(e.from+i,1);if(r.deleted)return null;let s=t.mapResult(e.to+i,-1);return s.deleted||s.pos<=r.pos?null:new bh(r.pos-n,s.pos-n,this)}valid(t,e){let n,{index:i,offset:r}=t.content.findIndex(e.from);return r==e.from&&!(n=t.child(i)).isText&&r+n.nodeSize==e.to}eq(t){return this==t||t instanceof yh&&mh(this.attrs,t.attrs)&&mh(this.spec,t.spec)}destroy(){}}class bh{constructor(t,e,n){this.from=t,this.to=e,this.type=n}copy(t,e){return new bh(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,n){return this.type.map(t,this,e,n)}static widget(t,e,n){return new bh(t,t,new gh(e,n))}static inline(t,e,n,i){return new bh(t,e,new vh(n,i))}static node(t,e,n,i){return new bh(t,e,new yh(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof vh}get widget(){return this.type instanceof gh}}const wh=[],kh={};class xh{constructor(t,e){this.local=t.length?t:wh,this.children=e.length?e:wh}static create(t,e){return e.length?Oh(e,t,0,kh):Sh}find(t,e,n){let i=[];return this.findInner(null==t?0:t,null==e?1e9:e,i,0,n),i}findInner(t,e,n,i,r){for(let s=0;s<this.local.length;s++){let o=this.local[s];o.from<=e&&o.to>=t&&(!r||r(o.spec))&&n.push(o.copy(o.from+i,o.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<e&&this.children[s+1]>t){let o=this.children[s]+1;this.children[s+2].findInner(t-o,e-o,n,i+o,r)}}map(t,e,n){return this==Sh||0==t.maps.length?this:this.mapInner(t,e,0,0,n||kh)}mapInner(t,e,n,i,r){let s;for(let o=0;o<this.local.length;o++){let a=this.local[o].map(t,n,i);a&&a.type.valid(e,a)?(s||(s=[])).push(a):r.onRemove&&r.onRemove(this.local[o].spec)}return this.children.length?function(t,e,n,i,r,s,o){let a=t.slice();for(let t=0,e=s;t<n.maps.length;t++){let i=0;n.maps[t].forEach(((t,n,r,s)=>{let o=s-r-(n-t);for(let r=0;r<a.length;r+=3){let s=a[r+1];if(s<0||t>s+e-i)continue;let l=a[r]+e-i;n>=l?a[r+1]=t<=l?-2:-1:t>=e&&o&&(a[r]+=o,a[r+1]+=o)}i+=o})),e=n.maps[t].map(e,-1)}let l=!1;for(let e=0;e<a.length;e+=3)if(a[e+1]<0){if(-2==a[e+1]){l=!0,a[e+1]=-1;continue}let c=n.map(t[e]+s),u=c-r;if(u<0||u>=i.content.size){l=!0;continue}let d=n.map(t[e+1]+s,-1)-r,{index:h,offset:p}=i.content.findIndex(u),f=i.maybeChild(h);if(f&&p==u&&p+f.nodeSize==d){let i=a[e+2].mapInner(n,f,c+1,t[e]+s+1,o);i!=Sh?(a[e]=u,a[e+1]=d,a[e+2]=i):(a[e+1]=-2,l=!0)}else l=!0}if(l){let l=function(t,e,n,i,r,s,o){function a(t,e){for(let s=0;s<t.local.length;s++){let a=t.local[s].map(i,r,e);a?n.push(a):o.onRemove&&o.onRemove(t.local[s].spec)}for(let n=0;n<t.children.length;n+=3)a(t.children[n+2],t.children[n]+e+1)}for(let n=0;n<t.length;n+=3)-1==t[n+1]&&a(t[n+2],e[n]+s+1);return n}(a,t,e,n,r,s,o),c=Oh(l,i,0,o);e=c.local;for(let t=0;t<a.length;t+=3)a[t+1]<0&&(a.splice(t,3),t-=3);for(let t=0,e=0;t<c.children.length;t+=3){let n=c.children[t];for(;e<a.length&&a[e]<n;)e+=3;a.splice(e,0,c.children[t],c.children[t+1],c.children[t+2])}}return new xh(e.sort(Eh),a)}(this.children,s||[],t,e,n,i,r):s?new xh(s.sort(Eh),wh):Sh}add(t,e){return e.length?this==Sh?xh.create(t,e):this.addInner(t,e,0):this}addInner(t,e,n){let i,r=0;t.forEach(((t,s)=>{let o,a=s+n;if(o=Th(e,t,a)){for(i||(i=this.children.slice());r<i.length&&i[r]<s;)r+=3;i[r]==s?i[r+2]=i[r+2].addInner(t,o,a+1):i.splice(r,0,s,s+t.nodeSize,Oh(o,t,a+1,kh)),r+=3}}));let s=_h(r?Mh(e):e,-n);for(let e=0;e<s.length;e++)s[e].type.valid(t,s[e])||s.splice(e--,1);return new xh(s.length?this.local.concat(s).sort(Eh):this.local,i||this.children)}remove(t){return 0==t.length||this==Sh?this:this.removeInner(t,0)}removeInner(t,e){let n=this.children,i=this.local;for(let i=0;i<n.length;i+=3){let r,s=n[i]+e,o=n[i+1]+e;for(let e,n=0;n<t.length;n++)(e=t[n])&&e.from>s&&e.to<o&&(t[n]=null,(r||(r=[])).push(e));if(!r)continue;n==this.children&&(n=this.children.slice());let a=n[i+2].removeInner(r,s+1);a!=Sh?n[i+2]=a:(n.splice(i,3),i-=3)}if(i.length)for(let n,r=0;r<t.length;r++)if(n=t[r])for(let t=0;t<i.length;t++)i[t].eq(n,e)&&(i==this.local&&(i=this.local.slice()),i.splice(t--,1));return n==this.children&&i==this.local?this:i.length||n.length?new xh(i,n):Sh}forChild(t,e){if(this==Sh)return this;if(e.isLeaf)return xh.empty;let n,i;for(let e=0;e<this.children.length;e+=3)if(this.children[e]>=t){this.children[e]==t&&(n=this.children[e+2]);break}let r=t+1,s=r+e.content.size;for(let t=0;t<this.local.length;t++){let e=this.local[t];if(e.from<s&&e.to>r&&e.type instanceof vh){let t=Math.max(r,e.from)-r,n=Math.min(s,e.to)-r;t<n&&(i||(i=[])).push(e.copy(t,n))}}if(i){let t=new xh(i.sort(Eh),wh);return n?new Ch([t,n]):t}return n||Sh}eq(t){if(this==t)return!0;if(!(t instanceof xh)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return Ah(this.localsInner(t))}localsInner(t){if(this==Sh)return wh;if(t.inlineContent||!this.local.some(vh.is))return this.local;let e=[];for(let t=0;t<this.local.length;t++)this.local[t].type instanceof vh||e.push(this.local[t]);return e}}xh.empty=new xh([],[]),xh.removeOverlap=Ah;const Sh=xh.empty;class Ch{constructor(t){this.members=t}map(t,e){const n=this.members.map((n=>n.map(t,e,kh)));return Ch.from(n)}forChild(t,e){if(e.isLeaf)return xh.empty;let n=[];for(let i=0;i<this.members.length;i++){let r=this.members[i].forChild(t,e);r!=Sh&&(r instanceof Ch?n=n.concat(r.members):n.push(r))}return Ch.from(n)}eq(t){if(!(t instanceof Ch)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,n=!0;for(let i=0;i<this.members.length;i++){let r=this.members[i].localsInner(t);if(r.length)if(e){n&&(e=e.slice(),n=!1);for(let t=0;t<r.length;t++)e.push(r[t])}else e=r}return e?Ah(n?e:e.sort(Eh)):wh}static from(t){switch(t.length){case 0:return Sh;case 1:return t[0];default:return new Ch(t.every((t=>t instanceof xh))?t:t.reduce(((t,e)=>t.concat(e instanceof xh?e:e.members)),[]))}}}function _h(t,e){if(!e||!t.length)return t;let n=[];for(let i=0;i<t.length;i++){let r=t[i];n.push(new bh(r.from+e,r.to+e,r.type))}return n}function Th(t,e,n){if(e.isLeaf)return null;let i=n+e.nodeSize,r=null;for(let e,s=0;s<t.length;s++)(e=t[s])&&e.from>n&&e.to<i&&((r||(r=[])).push(e),t[s]=null);return r}function Mh(t){let e=[];for(let n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function Oh(t,e,n,i){let r=[],s=!1;e.forEach(((e,o)=>{let a=Th(t,e,o+n);if(a){s=!0;let t=Oh(a,e,n+o+1,i);t!=Sh&&r.push(o,o+e.nodeSize,t)}}));let o=_h(s?Mh(t):t,-n).sort(Eh);for(let t=0;t<o.length;t++)o[t].type.valid(e,o[t])||(i.onRemove&&i.onRemove(o[t].spec),o.splice(t--,1));return o.length||r.length?new xh(o,r):Sh}function Eh(t,e){return t.from-e.from||t.to-e.to}function Ah(t){let e=t;for(let n=0;n<e.length-1;n++){let i=e[n];if(i.from!=i.to)for(let r=n+1;r<e.length;r++){let s=e[r];if(s.from!=i.from){s.from<i.to&&(e==t&&(e=t.slice()),e[n]=i.copy(i.from,s.from),Nh(e,r,i.copy(s.from,i.to)));break}s.to!=i.to&&(e==t&&(e=t.slice()),e[r]=s.copy(s.from,i.to),Nh(e,r+1,s.copy(i.to,s.to)))}}return e}function Nh(t,e,n){for(;e<t.length&&Eh(n,t[e])>0;)e++;t.splice(e,0,n)}function Dh(t){let e=[];return t.someProp("decorations",(n=>{let i=n(t.state);i&&i!=Sh&&e.push(i)})),t.cursorWrapper&&e.push(xh.create(t.state.doc,[t.cursorWrapper.deco])),Ch.from(e)}const Lh={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ih=nu&&iu<=11;class Ph{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class Bh{constructor(t,e){this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Ph,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver((t=>{for(let e=0;e<t.length;e++)this.queue.push(t[e]);nu&&iu<=11&&t.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),Ih&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Lh)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let e=0;e<t.length;e++)this.queue.push(t[e]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(md(this.view)){if(this.suppressingSelectionUpdates)return ad(this.view);if(nu&&iu<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&Hc(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let e,n=new Set;for(let e=t.focusNode;e;e=$c(e))n.add(e);for(let i=t.anchorNode;i;i=$c(i))if(n.has(i)){e=i;break}let i=e&&this.view.docView.nearestDesc(e);return i&&i.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let e=this.pendingRecords();e.length&&(this.queue=[]);let n=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&md(t)&&!this.ignoreSelectionChange(n),r=-1,s=-1,o=!1,a=[];if(t.editable)for(let t=0;t<e.length;t++){let n=this.registerMutation(e[t],a);n&&(r=r<0?n.from:Math.min(n.from,r),s=s<0?n.to:Math.max(n.to,s),n.typeOver&&(o=!0))}if(ru&&a.length){let e=a.filter((t=>"BR"==t.nodeName));if(2==e.length){let[t,n]=e;t.parentNode&&t.parentNode.parentNode==n.parentNode?n.remove():t.remove()}else{let{focusNode:n}=this.currentSelection;for(let i of e){let e=i.parentNode;!e||"LI"!=e.nodeName||n&&$h(t,n)==e||i.remove()}}}let l=null;r<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&Gc(n)&&(l=sd(t))&&l.eq(gc.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,ad(t),this.currentSelection.set(n),t.scrollToSelection()):(r>-1||i)&&(r>-1&&(t.docView.markDirty(r,s),function(t){if(jh.has(t))return;if(jh.set(t,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)){if(t.requiresGeckoHackNode=ru,Fh)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Fh=!0}}(t)),this.handleDOMChange(r,s,o,a),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(n)||ad(t),this.currentSelection.set(n))}registerMutation(t,e){if(e.indexOf(t.target)>-1)return null;let n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){for(let n=0;n<t.addedNodes.length;n++){let i=t.addedNodes[n];e.push(i),3==i.nodeType&&(this.lastChangedTextNode=i)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};let i=t.previousSibling,r=t.nextSibling;if(nu&&iu<=11&&t.addedNodes.length)for(let e=0;e<t.addedNodes.length;e++){let{previousSibling:n,nextSibling:s}=t.addedNodes[e];(!n||Array.prototype.indexOf.call(t.addedNodes,n)<0)&&(i=n),(!s||Array.prototype.indexOf.call(t.addedNodes,s)<0)&&(r=s)}let s=i&&i.parentNode==t.target?Rc(i)+1:0,o=n.localPosFromDOM(t.target,s,-1),a=r&&r.parentNode==t.target?Rc(r):t.target.childNodes.length;return{from:o,to:n.localPosFromDOM(t.target,a,1)}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=t.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let jh=new WeakMap,Fh=!1;function Rh(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Hc(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function $h(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let e=t.docView.nearestDesc(n,!0);if(e&&e.node.isBlock)return n}return null}function Vh(t){let e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(lu&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}if(t.parentNode.lastChild==t||lu&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const zh=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Hh(t,e,n,i,r){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let e=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,n=sd(t,e);if(n&&!t.state.selection.eq(n)){if(ou&&hu&&13===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",(e=>e(t,Jc(13,"Enter")))))return;let i=t.state.tr.setSelection(n);"pointer"==e?i.setMeta("pointer",!0):"key"==e&&i.scrollIntoView(),s&&i.setMeta("composition",s),t.dispatch(i)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l,c,u=t.state.selection,d=function(t,e,n){let i,{node:r,fromOffset:s,toOffset:o,from:a,to:l}=t.docView.parseRange(e,n),c=t.domSelectionRange(),u=c.anchorNode;if(u&&t.dom.contains(1==u.nodeType?u:u.parentNode)&&(i=[{node:u,offset:c.anchorOffset}],Gc(c)||i.push({node:c.focusNode,offset:c.focusOffset})),ou&&8===t.input.lastKeyCode)for(let t=o;t>s;t--){let e=r.childNodes[t-1],n=e.pmViewDesc;if("BR"==e.nodeName&&!n){o=t;break}if(!n||n.size)break}let d=t.state.doc,h=t.someProp("domParser")||ml.fromSchema(t.state.schema),p=d.resolve(a),f=null,m=h.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:o,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:i,ruleFromNode:Vh,context:p});if(i&&null!=i[0].pos){let t=i[0].pos,e=i[1]&&i[1].pos;null==e&&(e=t),f={anchor:t+a,head:e+a}}return{doc:m,sel:f,from:a,to:l}}(t,e,n),h=t.state.doc,p=h.slice(d.from,d.to);8===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime?(l=t.state.selection.to,c="end"):(l=t.state.selection.from,c="start"),t.input.lastKeyCode=null;let f=function(t,e,n,i,r){let s=t.findDiffStart(e,n);if(null==s)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if("end"==r){i-=o+Math.max(0,s-Math.min(o,a))-s}if(o<s&&t.size<e.size){let t=i<=s&&i>=o?s-i:0;s-=t,s&&s<e.size&&Wh(e.textBetween(s-1,s+1))&&(s+=t?1:-1),a=s+(a-o),o=s}else if(a<s){let e=i<=s&&i>=a?s-i:0;s-=e,s&&s<t.size&&Wh(t.textBetween(s-1,s+1))&&(s+=e?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}(p.content,d.doc.content,d.from,l,c);if((cu&&t.input.lastIOSEnter>Date.now()-225||hu)&&r.some((t=>1==t.nodeType&&!zh.test(t.nodeName)))&&(!f||f.endA>=f.endB)&&t.someProp("handleKeyDown",(e=>e(t,Jc(13,"Enter")))))return void(t.input.lastIOSEnter=0);if(!f){if(!(i&&u instanceof wc&&!u.empty&&u.$head.sameParent(u.$anchor))||t.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){let e=qh(t,t.state.doc,d.sel);if(e&&!e.eq(t.state.selection)){let n=t.state.tr.setSelection(e);s&&n.setMeta("composition",s),t.dispatch(n)}}return}f={start:u.from,endA:u.to,endB:u.to}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&f.start==f.endB&&t.state.selection instanceof wc&&(f.start>t.state.selection.from&&f.start<=t.state.selection.from+2&&t.state.selection.from>=d.from?f.start=t.state.selection.from:f.endA<t.state.selection.to&&f.endA>=t.state.selection.to-2&&t.state.selection.to<=d.to&&(f.endB+=t.state.selection.to-f.endA,f.endA=t.state.selection.to)),nu&&iu<=11&&f.endB==f.start+1&&f.endA==f.start&&f.start>d.from&&"  "==d.doc.textBetween(f.start-d.from-1,f.start-d.from+1)&&(f.start--,f.endA--,f.endB--);let m,g=d.doc.resolveNoCache(f.start-d.from),v=d.doc.resolveNoCache(f.endB-d.from),y=h.resolve(f.start),b=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=f.endA;if((cu&&t.input.lastIOSEnter>Date.now()-225&&(!b||r.some((t=>"DIV"==t.nodeName||"P"==t.nodeName)))||!b&&g.pos<d.doc.content.size&&!g.sameParent(v)&&(m=gc.findFrom(d.doc.resolve(g.pos+1),1,!0))&&m.head==v.pos)&&t.someProp("handleKeyDown",(e=>e(t,Jc(13,"Enter")))))return void(t.input.lastIOSEnter=0);if(t.state.selection.anchor>f.start&&function(t,e,n,i,r){if(n-e<=r.pos-i.pos||Kh(i,!0,!1)<r.pos)return!1;let s=t.resolve(e);if(!i.parent.isTextblock){let t=s.nodeAfter;return null!=t&&n==e+t.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Kh(s,!0,!0));return!(!o.parent.isTextblock||o.pos>n||Kh(o,!0,!1)<n)&&i.parent.content.cut(i.parentOffset).eq(o.parent.content)}(h,f.start,f.endA,g,v)&&t.someProp("handleKeyDown",(e=>e(t,Jc(8,"Backspace")))))return void(hu&&ou&&t.domObserver.suppressSelectionUpdates());ou&&hu&&f.endB==f.start&&(t.input.lastAndroidDelete=Date.now()),hu&&!b&&g.start()!=v.start()&&0==v.parentOffset&&g.depth==v.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==f.endA&&(f.endB-=2,v=d.doc.resolveNoCache(f.endB-d.from),setTimeout((()=>{t.someProp("handleKeyDown",(function(e){return e(t,Jc(13,"Enter"))}))}),20));let w,k,x,S=f.start,C=f.endA;if(b)if(g.pos==v.pos)nu&&iu<=11&&0==g.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((()=>ad(t)),20)),w=t.state.tr.delete(S,C),k=h.resolve(f.start).marksAcross(h.resolve(f.endA));else if(f.endA==f.endB&&(x=function(t,e){let n,i,r,s=t.firstChild.marks,o=e.firstChild.marks,a=s,l=o;for(let t=0;t<o.length;t++)a=o[t].removeFromSet(a);for(let t=0;t<s.length;t++)l=s[t].removeFromSet(l);if(1==a.length&&0==l.length)i=a[0],n="add",r=t=>t.mark(i.addToSet(t.marks));else{if(0!=a.length||1!=l.length)return null;i=l[0],n="remove",r=t=>t.mark(i.removeFromSet(t.marks))}let c=[];for(let t=0;t<e.childCount;t++)c.push(r(e.child(t)));if(_a.from(c).eq(t))return{mark:i,type:n}}(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,f.endA-y.start()))))w=t.state.tr,"add"==x.type?w.addMark(S,C,x.mark):w.removeMark(S,C,x.mark);else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let e=g.parent.textBetween(g.parentOffset,v.parentOffset);if(t.someProp("handleTextInput",(n=>n(t,S,C,e))))return;w=t.state.tr.insertText(e,S,C)}if(w||(w=t.state.tr.replace(S,C,d.doc.slice(f.start-d.from,f.endB-d.from))),d.sel){let e=qh(t,w.doc,d.sel);e&&!(ou&&hu&&t.composing&&e.empty&&(f.start!=f.endB||t.input.lastAndroidDelete<Date.now()-100)&&(e.head==S||e.head==w.mapping.map(C)-1)||nu&&e.empty&&e.head==S)&&w.setSelection(e)}k&&w.ensureMarks(k),s&&w.setMeta("composition",s),t.dispatch(w.scrollIntoView())}function qh(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:fd(t,e.resolve(n.anchor),e.resolve(n.head))}function Kh(t,e,n){let i=t.depth,r=e?t.end():t.pos;for(;i>0&&(e||t.indexAfter(i)==t.node(i).childCount);)i--,r++,e=!1;if(n){let e=t.node(i).maybeChild(t.indexAfter(i));for(;e&&!e.isLeaf;)e=e.firstChild,r++}return r}function Wh(t){if(2!=t.length)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class Uh{constructor(t,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new qd,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(Xh),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):"function"==typeof t?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Yh(this),Jh(this),this.nodeViews=Qh(this),this.docView=Hu(this.state.doc,Gh(this),Dh(this),this.dom,this),this.domObserver=new Bh(this,((t,e,n,i)=>Hh(this,t,e,n,i))),this.domObserver.start(),function(t){for(let e in Vd){let n=Vd[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=e=>{!Gd(t,e)||Ud(t,e)||!t.editable&&e.type in zd||n(t,e)},Hd[e]?{passive:!0}:void 0)}lu&&t.dom.addEventListener("input",(()=>null)),Wd(t)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let e in t)this._props[e]=t[e];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Wd(this);let e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(Xh),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}setProps(t){let e={};for(let t in this._props)e[t]=this._props[t];e.state=this.state;for(let n in t)e[n]=t[n];this.update(e)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,e){var n;let i=this.state,r=!1,s=!1;t.storedMarks&&this.composing&&(ah(this),s=!0),this.state=t;let o=i.plugins!=t.plugins||this._props.plugins!=e.plugins;if(o||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let t=Qh(this);(function(t,e){let n=0,i=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let t in e)i++;return n!=i})(t,this.nodeViews)&&(this.nodeViews=t,r=!0)}(o||e.handleDOMEvents!=this._props.handleDOMEvents)&&Wd(this),this.editable=Yh(this),Jh(this);let a=Dh(this),l=Gh(this),c=i.plugins==t.plugins||i.doc.eq(t.doc)?t.scrollToSelection>i.scrollToSelection?"to selection":"preserve":"reset",u=r||!this.docView.matchesNode(t.doc,l,a);!u&&t.selection.eq(i.selection)||(s=!0);let d="preserve"==c&&s&&null==this.dom.style.overflowAnchor&&function(t){let e,n,i=t.dom.getBoundingClientRect(),r=Math.max(0,i.top);for(let s=(i.left+i.right)/2,o=r+1;o<Math.min(innerHeight,i.bottom);o+=5){let i=t.root.elementFromPoint(s,o);if(!i||i==t.dom||!t.dom.contains(i))continue;let a=i.getBoundingClientRect();if(a.top>=r-20){e=i,n=a.top;break}}return{refDOM:e,refTop:n,stack:bu(t.dom)}}(this);if(s){this.domObserver.stop();let e=u&&(nu||ou)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&function(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}(i.selection,t.selection);if(u){let n=ou?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=lh(this)),!r&&this.docView.update(t.doc,l,a,this)||(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=Hu(t.doc,l,a,this.dom,this)),n&&!this.trackWrites&&(e=!0)}e||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Hc(e.node,e.offset,n.anchorNode,n.anchorOffset)}(this))?ad(this,e):(hd(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():d&&function({refDOM:t,refTop:e,stack:n}){let i=t?t.getBoundingClientRect().top:0;wu(n,0==i?0:i-e)}(d)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",(t=>t(this))));else if(this.state.selection instanceof xc){let e=this.docView.domAfterPos(this.state.selection.from);1==e.nodeType&&yu(this,e.getBoundingClientRect(),t)}else yu(this,this.coordsAtPos(this.state.selection.head,1),t)}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(t&&t.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let e=0;e<this.pluginViews.length;e++){let n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let e=this.directPlugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let e=this.state.plugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}}}updateDraggedNode(t,e){let n=t.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let t=n.from+(this.state.doc.content.size-e.doc.content.size);(t>0&&this.state.doc.nodeAt(t))==n.node&&(i=t)}this.dragging=new ph(t.slice,t.move,i<0?void 0:xc.create(this.state.doc,i))}someProp(t,e){let n,i=this._props&&this._props[t];if(null!=i&&(n=e?e(i):i))return n;for(let i=0;i<this.directPlugins.length;i++){let r=this.directPlugins[i].props[t];if(null!=r&&(n=e?e(r):r))return n}let r=this.state.plugins;if(r)for(let i=0;i<r.length;i++){let s=r[i].props[t];if(null!=s&&(n=e?e(s):s))return n}}hasFocus(){if(nu){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if("false"==t.contentEditable)return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(ku)return t.focus(ku);let e=bu(t);t.focus(null==ku?{get preventScroll(){return ku={preventScroll:!0},!0}}:void 0),ku||(ku=!1,wu(e,0))}(this.dom),ad(this),this.domObserver.start()}get root(){let t=this._root;if(null==t)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return t||document}updateRoot(){this._root=null}posAtCoords(t){return _u(this,t)}coordsAtPos(t,e=1){return Eu(this,t,e)}domAtPos(t,e=0){return this.docView.domFromPos(t,e)}nodeDOM(t){let e=this.docView.descAt(t);return e?e.nodeDOM:null}posAtDOM(t,e,n=-1){let i=this.docView.posFromDOM(t,e,n);if(null==i)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,e){return ju(this,e||this.state,t)}pasteHTML(t,e){return dh(this,"",t,!1,e||new ClipboardEvent("paste"))}pasteText(t,e){return dh(this,t,null,!0,e||new ClipboardEvent("paste"))}destroy(){this.docView&&(!function(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Dh(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Vc=null)}get isDestroyed(){return null==this.docView}dispatchEvent(t){return function(t,e){Ud(t,e)||!Vd[e.type]||!t.editable&&e.type in zd||Vd[e.type](t,e)}(this,t)}dispatch(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){let t=this.domSelection();return lu&&11===this.root.nodeType&&function(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}(this.dom.ownerDocument)==this.dom&&function(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return Rh(t,n)}let n;function i(t){t.preventDefault(),t.stopImmediatePropagation(),n=t.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",i,!0),n?Rh(t,n):null}(this,t)||t}domSelection(){return this.root.getSelection()}}function Gh(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(n=>{if("function"==typeof n&&(n=n(t.state)),n)for(let t in n)"class"==t?e.class+=" "+n[t]:"style"==t?e.style=(e.style?e.style+";":"")+n[t]:e[t]||"contenteditable"==t||"nodeName"==t||(e[t]=String(n[t]))})),e.translate||(e.translate="no"),[bh.node(0,t.state.doc.content.size,e)]}function Jh(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:bh.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Yh(t){return!t.someProp("editable",(e=>!1===e(t.state)))}function Qh(t){let e=Object.create(null);function n(t){for(let n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Xh(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}for(var Zh={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},tp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ep="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),np="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ip=0;ip<10;ip++)Zh[48+ip]=Zh[96+ip]=String(ip);for(ip=1;ip<=24;ip++)Zh[ip+111]="F"+ip;for(ip=65;ip<=90;ip++)Zh[ip]=String.fromCharCode(ip+32),tp[ip]=String.fromCharCode(ip);for(var rp in Zh)tp.hasOwnProperty(rp)||(tp[rp]=Zh[rp]);const sp="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function op(t){let e,n,i,r,s=t.split(/-(?!$)/),o=s[s.length-1];"Space"==o&&(o=" ");for(let t=0;t<s.length-1;t++){let o=s[t];if(/^(cmd|meta|m)$/i.test(o))r=!0;else if(/^a(lt)?$/i.test(o))e=!0;else if(/^(c|ctrl|control)$/i.test(o))n=!0;else if(/^s(hift)?$/i.test(o))i=!0;else{if(!/^mod$/i.test(o))throw new Error("Unrecognized modifier name: "+o);sp?r=!0:n=!0}}return e&&(o="Alt-"+o),n&&(o="Ctrl-"+o),r&&(o="Meta-"+o),i&&(o="Shift-"+o),o}function ap(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function lp(t){let e=function(t){let e=Object.create(null);for(let n in t)e[op(n)]=t[n];return e}(t);return function(t,n){let i,r=function(t){var e=!(ep&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||np&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?tp:Zh)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(n),s=e[ap(r,n)];if(s&&s(t.state,t.dispatch,t))return!0;if(1==r.length&&" "!=r){if(n.shiftKey){let i=e[ap(r,n,!1)];if(i&&i(t.state,t.dispatch,t))return!0}if((n.shiftKey||n.altKey||n.metaKey||r.charCodeAt(0)>127)&&(i=Zh[n.keyCode])&&i!=r){let r=e[ap(i,n)];if(r&&r(t.state,t.dispatch,t))return!0}}return!1}}const cp=(t,e)=>!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function up(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const dp=(t,e,n)=>{let i=up(t,n);if(!i)return!1;let r=mp(i);if(!r){let n=i.blockRange(),r=n&&Ul(n);return null!=r&&(e&&e(t.tr.lift(n,r).scrollIntoView()),!0)}let s=r.nodeBefore;if(!s.type.spec.isolating&&Mp(t,r,e))return!0;if(0==i.parent.content.size&&(pp(s,"end")||xc.isSelectable(s))){let n=ec(t.doc,i.before(),i.after(),Na.empty);if(n&&n.slice.size<n.to-n.from){if(e){let i=t.tr.step(n);i.setSelection(pp(s,"end")?gc.findFrom(i.doc.resolve(i.mapping.map(r.pos,-1)),-1):xc.create(i.doc,r.pos-s.nodeSize)),e(i.scrollIntoView())}return!0}}return!(!s.isAtom||r.depth!=i.depth-1)&&(e&&e(t.tr.delete(r.pos-s.nodeSize,r.pos).scrollIntoView()),!0)};function hp(t,e,n){let i=e.nodeBefore,r=e.pos-1;for(;!i.isTextblock;r--){if(i.type.spec.isolating)return!1;let t=i.lastChild;if(!t)return!1;i=t}let s=e.nodeAfter,o=e.pos+1;for(;!s.isTextblock;o++){if(s.type.spec.isolating)return!1;let t=s.firstChild;if(!t)return!1;s=t}let a=ec(t.doc,r,o,Na.empty);if(!a||a.from!=r||a instanceof zl&&a.slice.size>=o-r)return!1;if(n){let e=t.tr.step(a);e.setSelection(wc.create(e.doc,r)),n(e.scrollIntoView())}return!0}function pp(t,e,n=!1){for(let i=t;i;i="start"==e?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(n&&1!=i.childCount)return!1}return!1}const fp=(t,e,n)=>{let{$head:i,empty:r}=t.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):i.parentOffset>0)return!1;s=mp(i)}let o=s&&s.nodeBefore;return!(!o||!xc.isSelectable(o))&&(e&&e(t.tr.setSelection(xc.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function mp(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function gp(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const vp=(t,e,n)=>{let i=gp(t,n);if(!i)return!1;let r=bp(i);if(!r)return!1;let s=r.nodeAfter;if(Mp(t,r,e))return!0;if(0==i.parent.content.size&&(pp(s,"start")||xc.isSelectable(s))){let n=ec(t.doc,i.before(),i.after(),Na.empty);if(n&&n.slice.size<n.to-n.from){if(e){let i=t.tr.step(n);i.setSelection(pp(s,"start")?gc.findFrom(i.doc.resolve(i.mapping.map(r.pos)),1):xc.create(i.doc,i.mapping.map(r.pos))),e(i.scrollIntoView())}return!0}}return!(!s.isAtom||r.depth!=i.depth-1)&&(e&&e(t.tr.delete(r.pos,r.pos+s.nodeSize).scrollIntoView()),!0)},yp=(t,e,n)=>{let{$head:i,empty:r}=t.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):i.parentOffset<i.parent.content.size)return!1;s=bp(i)}let o=s&&s.nodeAfter;return!(!o||!xc.isSelectable(o))&&(e&&e(t.tr.setSelection(xc.create(t.doc,s.pos)).scrollIntoView()),!0)};function bp(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const wp=(t,e)=>{let{$head:n,$anchor:i}=t.selection;return!(!n.parent.type.spec.code||!n.sameParent(i))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)};function kp(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const xp=(t,e)=>{let{$head:n,$anchor:i}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let r=n.node(-1),s=n.indexAfter(-1),o=kp(r.contentMatchAt(s));if(!o||!r.canReplaceWith(s,s,o))return!1;if(e){let i=n.after(),r=t.tr.replaceWith(i,i,o.createAndFill());r.setSelection(gc.near(r.doc.resolve(i),1)),e(r.scrollIntoView())}return!0},Sp=(t,e)=>{let n=t.selection,{$from:i,$to:r}=n;if(n instanceof Cc||i.parent.inlineContent||r.parent.inlineContent)return!1;let s=kp(r.parent.contentMatchAt(r.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let n=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,o=t.tr.insert(n,s.createAndFill());o.setSelection(wc.create(o.doc,n+1)),e(o.scrollIntoView())}return!0},Cp=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(Yl(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let i=n.blockRange(),r=i&&Ul(i);return null!=r&&(e&&e(t.tr.lift(i,r).scrollIntoView()),!0)};const _p=(t,e)=>{let{$from:n,$to:i}=t.selection;if(t.selection instanceof xc&&t.selection.node.isBlock)return!(!n.parentOffset||!Yl(t.doc,n.pos)||(e&&e(t.tr.split(n.pos).scrollIntoView()),0));if(!n.parent.isBlock)return!1;if(e){let r=i.parentOffset==i.parent.content.size,s=t.tr;(t.selection instanceof wc||t.selection instanceof Cc)&&s.deleteSelection();let o=0==n.depth?null:kp(n.node(-1).contentMatchAt(n.indexAfter(-1))),a=Tp&&Tp(i.parent,r),l=a?[a]:r&&o?[{type:o}]:void 0,c=Yl(s.doc,s.mapping.map(n.pos),1,l);if(l||c||!Yl(s.doc,s.mapping.map(n.pos),1,o?[{type:o}]:void 0)||(o&&(l=[{type:o}]),c=!0),c&&(s.split(s.mapping.map(n.pos),1,l),!r&&!n.parentOffset&&n.parent.type!=o)){let t=s.mapping.map(n.before()),e=s.doc.resolve(t);o&&n.node(-1).canReplaceWith(e.index(),e.index()+1,o)&&s.setNodeMarkup(s.mapping.map(n.before()),o)}e(s.scrollIntoView())}return!0};var Tp;function Mp(t,e,n){let i,r,s=e.nodeBefore,o=e.nodeAfter;if(s.type.spec.isolating||o.type.spec.isolating)return!1;if(function(t,e,n){let i=e.nodeBefore,r=e.nodeAfter,s=e.index();return!(!(i&&r&&i.type.compatibleContent(r.type))||(!i.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(s,s+1)||!r.isTextblock&&!Ql(t.doc,e.pos)||(n&&n(t.tr.clearIncompatible(e.pos,i.type,i.contentMatchAt(i.childCount)).join(e.pos).scrollIntoView()),0)))}(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(i=(r=s.contentMatchAt(s.childCount)).findWrapping(o.type))&&r.matchType(i[0]||o.type).validEnd){if(n){let r=e.pos+o.nodeSize,a=_a.empty;for(let t=i.length-1;t>=0;t--)a=_a.from(i[t].create(null,a));a=_a.from(s.copy(a));let l=t.tr.step(new Hl(e.pos-1,r,e.pos,r,new Na(a,1,0),i.length,!0)),c=r+2*i.length;Ql(l.doc,c)&&l.join(c),n(l.scrollIntoView())}return!0}let l=gc.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&Ul(c);if(null!=u&&u>=e.depth)return n&&n(t.tr.lift(c,u).scrollIntoView()),!0;if(a&&pp(o,"start",!0)&&pp(s,"end")){let i=s,r=[];for(;r.push(i),!i.isTextblock;)i=i.lastChild;let a=o,l=1;for(;!a.isTextblock;a=a.firstChild)l++;if(i.canReplace(i.childCount,i.childCount,a.content)){if(n){let i=_a.empty;for(let t=r.length-1;t>=0;t--)i=_a.from(r[t].copy(i));n(t.tr.step(new Hl(e.pos-r.length,e.pos+o.nodeSize,e.pos+l,e.pos+o.nodeSize-l,new Na(i,r.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function Op(t){return function(e,n){let i=e.selection,r=t<0?i.$from:i.$to,s=r.depth;for(;r.node(s).isInline;){if(!s)return!1;s--}return!!r.node(s).isTextblock&&(n&&n(e.tr.setSelection(wc.create(e.doc,t<0?r.start(s):r.end(s)))),!0)}}const Ep=Op(-1),Ap=Op(1);function Np(t,e=null){return function(n,i){let r=!1;for(let i=0;i<n.selection.ranges.length&&!r;i++){let{$from:{pos:s},$to:{pos:o}}=n.selection.ranges[i];n.doc.nodesBetween(s,o,((i,s)=>{if(r)return!1;if(i.isTextblock&&!i.hasMarkup(t,e))if(i.type==t)r=!0;else{let e=n.doc.resolve(s),i=e.index();r=e.parent.canReplaceWith(i,i+1,t)}}))}if(!r)return!1;if(i){let r=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:s},$to:{pos:o}}=n.selection.ranges[i];r.setBlockType(s,o,t,e)}i(r.scrollIntoView())}return!0}}function Dp(...t){return function(e,n,i){for(let r=0;r<t.length;r++)if(t[r](e,n,i))return!0;return!1}}let Lp=Dp(cp,dp,fp),Ip=Dp(cp,vp,yp);const Pp={Enter:Dp(wp,Sp,Cp,_p),"Mod-Enter":xp,Backspace:Lp,"Mod-Backspace":Lp,"Shift-Backspace":Lp,Delete:Ip,"Mod-Delete":Ip,"Mod-a":(t,e)=>(e&&e(t.tr.setSelection(new Cc(t.doc))),!0)},Bp={"Ctrl-h":Pp.Backspace,"Alt-Backspace":Pp["Mod-Backspace"],"Ctrl-d":Pp.Delete,"Ctrl-Alt-Backspace":Pp["Mod-Delete"],"Alt-Delete":Pp["Mod-Delete"],"Alt-d":Pp["Mod-Delete"],"Ctrl-a":Ep,"Ctrl-e":Ap};for(let t in Pp)Bp[t]=Pp[t];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&os.platform();function jp(t,e=null){return function(n,i){let{$from:r,$to:s}=n.selection,o=r.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&r.node(o.depth-1).type.compatibleContent(t)&&0==o.startIndex){if(0==r.index(o.depth-1))return!1;let t=n.doc.resolve(o.start-2);l=new Ua(t,t,o.depth),o.endIndex<o.parent.childCount&&(o=new Ua(r,n.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=Gl(l,t,e,o);return!!c&&(i&&i(function(t,e,n,i,r){let s=_a.empty;for(let t=n.length-1;t>=0;t--)s=_a.from(n[t].type.create(n[t].attrs,s));t.step(new Hl(e.start-(i?2:0),e.end,e.start,e.end,new Na(s,0,0),n.length,!0));let o=0;for(let t=0;t<n.length;t++)n[t].type==r&&(o=t+1);let a=n.length-o,l=e.start+n.length-(i?2:0),c=e.parent;for(let n=e.startIndex,i=e.endIndex,r=!0;n<i;n++,r=!1)!r&&Yl(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(n).nodeSize;return t}(n.tr,o,c,a,t).scrollIntoView()),!0)}}function Fp(t){return function(e,n){let{$from:i,$to:r}=e.selection,s=i.blockRange(r,(e=>e.childCount>0&&e.firstChild.type==t));return!!s&&(!n||(i.node(s.depth-1).type==t?function(t,e,n,i){let r=t.tr,s=i.end,o=i.$to.end(i.depth);s<o&&(r.step(new Hl(s-1,o,s,o,new Na(_a.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new Ua(r.doc.resolve(i.$from.pos),r.doc.resolve(o),i.depth));const a=Ul(i);if(null==a)return!1;r.lift(i,a);let l=r.mapping.map(s,-1)-1;Ql(r.doc,l)&&r.join(l);return e(r.scrollIntoView()),!0}(e,n,t,s):function(t,e,n){let i=t.tr,r=n.parent;for(let t=n.end,e=n.endIndex-1,s=n.startIndex;e>s;e--)t-=r.child(e).nodeSize,i.delete(t-1,t+1);let s=i.doc.resolve(n.start),o=s.nodeAfter;if(i.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=0==n.startIndex,l=n.endIndex==r.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?_a.empty:_a.from(r))))return!1;let d=s.pos,h=d+o.nodeSize;return i.step(new Hl(d-(a?1:0),h+(l?1:0),d+1,h-1,new Na((a?_a.empty:_a.from(r.copy(_a.empty))).append(l?_a.empty:_a.from(r.copy(_a.empty))),a?0:1,l?0:1),a?0:1)),e(i.scrollIntoView()),!0}(e,n,s)))}}function Rp(t){const{state:e,transaction:n}=t;let{selection:i}=n,{doc:r}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return i},get doc(){return r},get tr(){return i=n.selection,r=n.doc,s=n.storedMarks,n}}}class $p{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:i}=e,{tr:r}=n,s=this.buildProps(r);return Object.fromEntries(Object.entries(t).map((([t,e])=>[t,(...t)=>{const n=e(...t)(s);return r.getMeta("preventDispatch")||this.hasCustomState||i.dispatch(r),n}])))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:i,state:r}=this,{view:s}=i,o=[],a=!!t,l=t||r.tr,c={...Object.fromEntries(Object.entries(n).map((([t,n])=>[t,(...t)=>{const i=this.buildProps(l,e),r=n(...t)(i);return o.push(r),c}]))),run:()=>(a||!e||l.getMeta("preventDispatch")||this.hasCustomState||s.dispatch(l),o.every((t=>!0===t)))};return c}createCan(t){const{rawCommands:e,state:n}=this,i=t||n.tr,r=this.buildProps(i,false),s=Object.fromEntries(Object.entries(e).map((([t,e])=>[t,(...t)=>e(...t)({...r,dispatch:void 0})])));return{...s,chain:()=>this.createChain(i,false)}}buildProps(t,e=!0){const{rawCommands:n,editor:i,state:r}=this,{view:s}=i,o={tr:t,editor:i,view:s,state:Rp({state:r,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map((([t,e])=>[t,(...t)=>e(...t)(o)])))}};return o}}class Vp{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach((t=>t.apply(this,e))),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter((t=>t!==e)):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}function zp(t,e,n){if(void 0===t.config[e]&&t.parent)return zp(t.parent,e,n);if("function"==typeof t.config[e]){return t.config[e].bind({...n,parent:t.parent?zp(t.parent,e,n):null})}return t.config[e]}function Hp(t){return{baseExtensions:t.filter((t=>"extension"===t.type)),nodeExtensions:t.filter((t=>"node"===t.type)),markExtensions:t.filter((t=>"mark"===t.type))}}function qp(t){const e=[],{nodeExtensions:n,markExtensions:i}=Hp(t),r=[...n,...i],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach((t=>{const n=zp(t,"addGlobalAttributes",{name:t.name,options:t.options,storage:t.storage});if(!n)return;n().forEach((t=>{t.types.forEach((n=>{Object.entries(t.attributes).forEach((([t,i])=>{e.push({type:n,name:t,attribute:{...s,...i}})}))}))}))})),r.forEach((t=>{const n={name:t.name,options:t.options,storage:t.storage},i=zp(t,"addAttributes",n);if(!i)return;const r=i();Object.entries(r).forEach((([n,i])=>{const r={...s,...i};"function"==typeof(null==r?void 0:r.default)&&(r.default=r.default()),(null==r?void 0:r.isRequired)&&void 0===(null==r?void 0:r.default)&&delete r.default,e.push({type:t.name,name:n,attribute:r})}))})),e}function Kp(t,e){if("string"==typeof t){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Wp(...t){return t.filter((t=>!!t)).reduce(((t,e)=>{const n={...t};return Object.entries(e).forEach((([t,e])=>{if(n[t])if("class"===t){const i=e?e.split(" "):[],r=n[t]?n[t].split(" "):[],s=i.filter((t=>!r.includes(t)));n[t]=[...r,...s].join(" ")}else n[t]="style"===t?[n[t],e].join("; "):e;else n[t]=e})),n}),{})}function Up(t,e){return e.filter((t=>t.attribute.rendered)).map((e=>e.attribute.renderHTML?e.attribute.renderHTML(t.attrs)||{}:{[e.name]:t.attrs[e.name]})).reduce(((t,e)=>Wp(t,e)),{})}function Gp(t){return"function"==typeof t}function Jp(t,e=void 0,...n){return Gp(t)?e?t.bind(e)(...n):t(...n):t}function Yp(t,e){return t.style?t:{...t,getAttrs:n=>{const i=t.getAttrs?t.getAttrs(n):t.attrs;if(!1===i)return!1;const r=e.reduce(((t,e)=>{const i=e.attribute.parseHTML?e.attribute.parseHTML(n):function(t){return"string"!=typeof t?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):"true"===t||"false"!==t&&t}(n.getAttribute(e.name));return null==i?t:{...t,[e.name]:i}}),{});return{...i,...r}}}}function Qp(t){return Object.fromEntries(Object.entries(t).filter((([t,e])=>("attrs"!==t||!function(t={}){return 0===Object.keys(t).length&&t.constructor===Object}(e))&&null!=e)))}function Xp(t,e){var n;const i=qp(t),{nodeExtensions:r,markExtensions:s}=Hp(t),o=null===(n=r.find((t=>zp(t,"topNode"))))||void 0===n?void 0:n.name,a=Object.fromEntries(r.map((n=>{const r=i.filter((t=>t.type===n.name)),s={name:n.name,options:n.options,storage:n.storage,editor:e},o=Qp({...t.reduce(((t,e)=>{const i=zp(e,"extendNodeSchema",s);return{...t,...i?i(n):{}}}),{}),content:Jp(zp(n,"content",s)),marks:Jp(zp(n,"marks",s)),group:Jp(zp(n,"group",s)),inline:Jp(zp(n,"inline",s)),atom:Jp(zp(n,"atom",s)),selectable:Jp(zp(n,"selectable",s)),draggable:Jp(zp(n,"draggable",s)),code:Jp(zp(n,"code",s)),defining:Jp(zp(n,"defining",s)),isolating:Jp(zp(n,"isolating",s)),attrs:Object.fromEntries(r.map((t=>{var e;return[t.name,{default:null===(e=null==t?void 0:t.attribute)||void 0===e?void 0:e.default}]})))}),a=Jp(zp(n,"parseHTML",s));a&&(o.parseDOM=a.map((t=>Yp(t,r))));const l=zp(n,"renderHTML",s);l&&(o.toDOM=t=>l({node:t,HTMLAttributes:Up(t,r)}));const c=zp(n,"renderText",s);return c&&(o.toText=c),[n.name,o]}))),l=Object.fromEntries(s.map((n=>{const r=i.filter((t=>t.type===n.name)),s={name:n.name,options:n.options,storage:n.storage,editor:e},o=Qp({...t.reduce(((t,e)=>{const i=zp(e,"extendMarkSchema",s);return{...t,...i?i(n):{}}}),{}),inclusive:Jp(zp(n,"inclusive",s)),excludes:Jp(zp(n,"excludes",s)),group:Jp(zp(n,"group",s)),spanning:Jp(zp(n,"spanning",s)),code:Jp(zp(n,"code",s)),attrs:Object.fromEntries(r.map((t=>{var e;return[t.name,{default:null===(e=null==t?void 0:t.attribute)||void 0===e?void 0:e.default}]})))}),a=Jp(zp(n,"parseHTML",s));a&&(o.parseDOM=a.map((t=>Yp(t,r))));const l=zp(n,"renderHTML",s);return l&&(o.toDOM=t=>l({mark:t,HTMLAttributes:Up(t,r)})),[n.name,o]})));return new pl({topNode:o,nodes:a,marks:l})}function Zp(t,e){return e.nodes[t]||e.marks[t]||null}function tf(t,e){return Array.isArray(e)?e.some((e=>("string"==typeof e?e:e.name)===t.name)):e}const ef=(t,e=500)=>{let n="";const i=t.parentOffset;return t.parent.nodesBetween(Math.max(0,i-e),i,((t,e,r,s)=>{var o,a;const l=(null===(a=(o=t.type.spec).toText)||void 0===a?void 0:a.call(o,{node:t,pos:e,parent:r,index:s}))||t.textContent||"%leaf%";n+=l.slice(0,Math.max(0,i-e))})),n};function nf(t){return"[object RegExp]"===Object.prototype.toString.call(t)}class rf{constructor(t){this.find=t.find,this.handler=t.handler}}const sf=(t,e)=>{if(nf(e))return e.exec(t);const n=e(t);if(!n)return null;const i=[n.text];return i.index=n.index,i.input=t,i.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(n.replaceWith)),i};function of(t){var e;const{editor:n,from:i,to:r,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(i);if(c.parent.type.spec.code||(null===(e=c.nodeBefore||c.nodeAfter)||void 0===e?void 0:e.marks.find((t=>t.type.spec.code))))return!1;let u=!1;const d=ef(c)+s;return o.forEach((t=>{if(u)return;const e=sf(d,t.find);if(!e)return;const o=l.state.tr,c=Rp({state:l.state,transaction:o}),h={from:i-(e[0].length-s.length),to:r},{commands:p,chain:f,can:m}=new $p({editor:n,state:c});null!==t.handler({state:c,range:h,match:e,commands:p,chain:f,can:m})&&o.steps.length&&(o.setMeta(a,{transform:o,from:i,to:r,text:s}),l.dispatch(o),u=!0)})),u}function af(t){const{editor:e,rules:n}=t,i=new Pc({state:{init(){return null},apply(t,r){const s=t.getMeta(i);if(s)return s;const o=t.getMeta("applyInputRules");return!!o&&setTimeout((()=>{const{from:t,text:r}=o,s=t+r.length;of({editor:e,from:t,to:s,text:r,rules:n,plugin:i})})),t.selectionSet||t.docChanged?null:r}},props:{handleTextInput(t,r,s,o){return of({editor:e,from:r,to:s,text:o,rules:n,plugin:i})},handleDOMEvents:{compositionend:t=>(setTimeout((()=>{const{$cursor:r}=t.state.selection;r&&of({editor:e,from:r.pos,to:r.pos,text:"",rules:n,plugin:i})})),!1)},handleKeyDown(t,r){if("Enter"!==r.key)return!1;const{$cursor:s}=t.state.selection;return!!s&&of({editor:e,from:s.pos,to:s.pos,text:"\n",rules:n,plugin:i})}},isInputRules:!0});return i}class lf{constructor(t){this.find=t.find,this.handler=t.handler}}const cf=(t,e,n)=>{if(nf(e))return[...t.matchAll(e)];const i=e(t,n);return i?i.map((e=>{const n=[e.text];return n.index=e.index,n.input=t,n.data=e.data,e.replaceWith&&(e.text.includes(e.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(e.replaceWith)),n})):[]};function uf(t){const{editor:e,rules:n}=t;let i=null,r=!1,s=!1,o="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,a="undefined"!=typeof DragEvent?new DragEvent("drop"):null;const l=({state:t,from:n,to:i,rule:r,pasteEvt:s})=>{const l=t.tr,c=Rp({state:t,transaction:l}),u=function(t){const{editor:e,state:n,from:i,to:r,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new $p({editor:e,state:n}),d=[];return n.doc.nodesBetween(i,r,((t,e)=>{if(!t.isTextblock||t.type.spec.code)return;const h=Math.max(i,e),p=Math.min(r,e+t.content.size),f=t.textBetween(h-e,p-e,void 0,"￼");cf(f,s.find,o).forEach((t=>{if(void 0===t.index)return;const e=h+t.index+1,i=e+t[0].length,r={from:n.tr.mapping.map(e),to:n.tr.mapping.map(i)},p=s.handler({state:n,range:r,match:t,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(p)}))})),d.every((t=>null!==t))}({editor:e,state:c,from:Math.max(n-1,0),to:i.b-1,rule:r,pasteEvent:s,dropEvent:a});if(u&&l.steps.length)return a="undefined"!=typeof DragEvent?new DragEvent("drop"):null,o="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,l};return n.map((t=>new Pc({view(t){const e=e=>{var n;i=(null===(n=t.dom.parentElement)||void 0===n?void 0:n.contains(e.target))?t.dom.parentElement:null};return window.addEventListener("dragstart",e),{destroy(){window.removeEventListener("dragstart",e)}}},props:{handleDOMEvents:{drop:(t,e)=>(s=i===t.dom.parentElement,a=e,!1),paste:(t,e)=>{var n;const i=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/html");return o=e,r=!!(null==i?void 0:i.includes("data-pm-slice")),!1}}},appendTransaction:(e,n,i)=>{const a=e[0],c="paste"===a.getMeta("uiEvent")&&!r,u="drop"===a.getMeta("uiEvent")&&!s,d=a.getMeta("applyPasteRules"),h=!!d;if(!c&&!u&&!h)return;if(h){const{from:e,text:n}=d,r=e+n.length,s=(t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null===(e=n.clipboardData)||void 0===e||e.setData("text/html",t),n})(n);return l({rule:t,state:i,from:e,to:{b:r},pasteEvt:s})}const p=n.doc.content.findDiffStart(i.doc.content),f=n.doc.content.findDiffEnd(i.doc.content);return"number"==typeof p&&f&&p!==f.b?l({rule:t,state:i,from:p,to:f,pasteEvt:o}):void 0}})))}class df{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=df.resolve(t),this.schema=Xp(this.extensions,e),this.setupExtensions()}static resolve(t){const e=df.sort(df.flatten(t)),n=function(t){const e=t.filter(((e,n)=>t.indexOf(e)!==n));return[...new Set(e)]}(e.map((t=>t.name)));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map((t=>`'${t}'`)).join(", ")}]. This can lead to issues.`),e}static flatten(t){return t.map((t=>{const e=zp(t,"addExtensions",{name:t.name,options:t.options,storage:t.storage});return e?[t,...this.flatten(e())]:t})).flat(10)}static sort(t){return t.sort(((t,e)=>{const n=zp(t,"priority")||100,i=zp(e,"priority")||100;return n>i?-1:n<i?1:0}))}get commands(){return this.extensions.reduce(((t,e)=>{const n=zp(e,"addCommands",{name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Zp(e.name,this.schema)});return n?{...t,...n()}:t}),{})}get plugins(){const{editor:t}=this,e=df.sort([...this.extensions].reverse()),n=[],i=[],r=e.map((e=>{const r={name:e.name,options:e.options,storage:e.storage,editor:t,type:Zp(e.name,this.schema)},s=[],o=zp(e,"addKeyboardShortcuts",r);let a={};if("mark"===e.type&&e.config.exitable&&(a.ArrowRight=()=>rm.handleExit({editor:t,mark:e})),o){const e=Object.fromEntries(Object.entries(o()).map((([e,n])=>[e,()=>n({editor:t})])));a={...a,...e}}const l=new Pc({props:{handleKeyDown:lp(a)}});s.push(l);const c=zp(e,"addInputRules",r);tf(e,t.options.enableInputRules)&&c&&n.push(...c());const u=zp(e,"addPasteRules",r);tf(e,t.options.enablePasteRules)&&u&&i.push(...u());const d=zp(e,"addProseMirrorPlugins",r);if(d){const t=d();s.push(...t)}return s})).flat();return[af({editor:t,rules:n}),...uf({editor:t,rules:i}),...r]}get attributes(){return qp(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Hp(this.extensions);return Object.fromEntries(e.filter((t=>!!zp(t,"addNodeView"))).map((e=>{const n=this.attributes.filter((t=>t.type===e.name)),i={name:e.name,options:e.options,storage:e.storage,editor:t,type:Kp(e.name,this.schema)},r=zp(e,"addNodeView",i);if(!r)return[];return[e.name,(i,s,o,a)=>{const l=Up(i,n);return r()({editor:t,node:i,getPos:o,decorations:a,HTMLAttributes:l,extension:e})}]})))}setupExtensions(){this.extensions.forEach((t=>{var e;this.editor.extensionStorage[t.name]=t.storage;const n={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Zp(t.name,this.schema)};if("mark"===t.type){(null===(e=Jp(zp(t,"keepOnSplit",n)))||void 0===e||e)&&this.splittableMarks.push(t.name)}const i=zp(t,"onBeforeCreate",n),r=zp(t,"onCreate",n),s=zp(t,"onUpdate",n),o=zp(t,"onSelectionUpdate",n),a=zp(t,"onTransaction",n),l=zp(t,"onFocus",n),c=zp(t,"onBlur",n),u=zp(t,"onDestroy",n);i&&this.editor.on("beforeCreate",i),r&&this.editor.on("create",r),s&&this.editor.on("update",s),o&&this.editor.on("selectionUpdate",o),a&&this.editor.on("transaction",a),l&&this.editor.on("focus",l),c&&this.editor.on("blur",c),u&&this.editor.on("destroy",u)}))}}function hf(t){return"Object"===function(t){return Object.prototype.toString.call(t).slice(8,-1)}(t)&&(t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype)}function pf(t,e){const n={...t};return hf(t)&&hf(e)&&Object.keys(e).forEach((i=>{hf(e[i])?i in t?n[i]=pf(t[i],e[i]):Object.assign(n,{[i]:e[i]}):Object.assign(n,{[i]:e[i]})})),n}class ff{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Jp(zp(this,"addOptions",{name:this.name}))),this.storage=Jp(zp(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new ff(t)}configure(t={}){const e=this.extend();return e.parent=this.parent,e.options=pf(this.options,t),e.storage=Jp(zp(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new ff({...this.config,...t});return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=Jp(zp(e,"addOptions",{name:e.name})),e.storage=Jp(zp(e,"addStorage",{name:e.name,options:e.options})),e}}function mf(t,e,n){const{from:i,to:r}=e,{blockSeparator:s="\n\n",textSerializers:o={}}=n||{};let a="";return t.nodesBetween(i,r,((t,n,l,c)=>{var u;t.isBlock&&n>i&&(a+=s);const d=null==o?void 0:o[t.type.name];if(d)return l&&(a+=d({node:t,pos:n,parent:l,index:c,range:e})),!1;t.isText&&(a+=null===(u=null==t?void 0:t.text)||void 0===u?void 0:u.slice(Math.max(i,n)-n,r-n))})),a}function gf(t){return Object.fromEntries(Object.entries(t.nodes).filter((([,t])=>t.spec.toText)).map((([t,e])=>[t,e.spec.toText])))}const vf=ff.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Pc({key:new Fc("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:i,selection:r}=e,{ranges:s}=r,o=Math.min(...s.map((t=>t.$from.pos))),a=Math.max(...s.map((t=>t.$to.pos))),l=gf(n);return mf(i,{from:o,to:a},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}});function yf(t,e,n={strict:!0}){const i=Object.keys(e);return!i.length||i.every((i=>n.strict?e[i]===t[i]:nf(e[i])?e[i].test(t[i]):e[i]===t[i]))}function bf(t,e,n={}){return t.find((t=>t.type===e&&yf(t.attrs,n)))}function wf(t,e,n={}){return!!bf(t,e,n)}function kf(t,e,n={}){if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if(t.parentOffset===i.offset&&0!==i.offset&&(i=t.parent.childBefore(t.parentOffset)),!i.node)return;const r=bf([...i.node.marks],e,n);if(!r)return;let s=i.index,o=t.start()+i.offset,a=s+1,l=o+i.node.nodeSize;for(bf([...i.node.marks],e,n);s>0&&r.isInSet(t.parent.child(s-1).marks);)s-=1,o-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&wf([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function xf(t,e){if("string"==typeof t){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function Sf(t){return t instanceof wc}function Cf(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function _f(t,e=null){if(!e)return null;const n=gc.atStart(t),i=gc.atEnd(t);if("start"===e||!0===e)return n;if("end"===e)return i;const r=n.from,s=i.to;return"all"===e?wc.create(t,Cf(0,r,s),Cf(t.content.size,r,s)):wc.create(t,Cf(e,r,s),Cf(e,r,s))}function Tf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Mf=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const i=e[n];3===i.nodeType&&i.nodeValue&&/^(\n\s\s|\n)$/.test(i.nodeValue)?t.removeChild(i):1===i.nodeType&&Mf(i)}return t};function Of(t){const e=`<body>${t}</body>`,n=(new window.DOMParser).parseFromString(e,"text/html").body;return Mf(n)}function Ef(t,e,n){n={slice:!0,parseOptions:{},...n};const i="string"==typeof t;if("object"==typeof t&&null!==t)try{return Array.isArray(t)&&t.length>0?_a.fromArray(t.map((t=>e.nodeFromJSON(t)))):e.nodeFromJSON(t)}catch(i){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),Ef("",e,n)}if(i){const i=ml.fromSchema(e);return n.slice?i.parseSlice(Of(t),n.parseOptions).content:i.parse(Of(t),n.parseOptions)}return Ef("",e,n)}function Af(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function Nf(t,e,n={}){const{from:i,to:r,empty:s}=t.selection,o=e?Kp(e,t.schema):null,a=[];t.doc.nodesBetween(i,r,((t,e)=>{if(t.isText)return;const n=Math.max(i,e),s=Math.min(r,e+t.nodeSize);a.push({node:t,from:n,to:s})}));const l=r-i,c=a.filter((t=>!o||o.name===t.node.type.name)).filter((t=>yf(t.node.attrs,n,{strict:!1})));if(s)return!!c.length;return c.reduce(((t,e)=>t+e.to-e.from),0)>=l}function Df(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Lf(t,e){const n="string"==typeof e?[e]:e;return Object.keys(t).reduce(((e,i)=>(n.includes(i)||(e[i]=t[i]),e)),{})}function If(t,e,n={}){return Ef(t,e,{slice:!1,parseOptions:n})}function Pf(t,e){const n=xf(e,t.schema),{from:i,to:r,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(i,r,(t=>{o.push(...t.marks)}));const a=o.find((t=>t.type.name===n.name));return a?{...a.attrs}:{}}function Bf(t){return e=>function(t,e){for(let n=t.depth;n>0;n-=1){const i=t.node(n);if(e(i))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:i}}}(e.$from,t)}function jf(t,e){const n=_l.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function Ff(t,e){return mf(t,{from:0,to:t.content.size},e)}function Rf(t,e){const n=Df("string"==typeof e?e:e.name,t.schema);return"node"===n?function(t,e){const n=Kp(e,t.schema),{from:i,to:r}=t.selection,s=[];t.doc.nodesBetween(i,r,(t=>{s.push(t)}));const o=s.reverse().find((t=>t.type.name===n.name));return o?{...o.attrs}:{}}(t,e):"mark"===n?Pf(t,e):{}}function $f(t,e,n){const i=[];return t===e?n.resolve(t).marks().forEach((e=>{const r=kf(n.resolve(t-1),e.type);r&&i.push({mark:e,...r})})):n.nodesBetween(t,e,((t,e)=>{t&&void 0!==(null==t?void 0:t.nodeSize)&&i.push(...t.marks.map((n=>({from:e,to:e+t.nodeSize,mark:n}))))})),i}function Vf(t,e,n){return Object.fromEntries(Object.entries(n).filter((([n])=>{const i=t.find((t=>t.type===e&&t.name===n));return!!i&&i.attribute.keepOnSplit})))}function zf(t,e,n={}){const{empty:i,ranges:r}=t.selection,s=e?xf(e,t.schema):null;if(i)return!!(t.storedMarks||t.selection.$from.marks()).filter((t=>!s||s.name===t.type.name)).find((t=>yf(t.attrs,n,{strict:!1})));let o=0;const a=[];if(r.forEach((({$from:e,$to:n})=>{const i=e.pos,r=n.pos;t.doc.nodesBetween(i,r,((t,e)=>{if(!t.isText&&!t.marks.length)return;const n=Math.max(i,e),s=Math.min(r,e+t.nodeSize);o+=s-n,a.push(...t.marks.map((t=>({mark:t,from:n,to:s}))))}))})),0===o)return!1;const l=a.filter((t=>!s||s.name===t.mark.type.name)).filter((t=>yf(t.mark.attrs,n,{strict:!1}))).reduce(((t,e)=>t+e.to-e.from),0),c=a.filter((t=>!s||t.mark.type!==s&&t.mark.type.excludes(s))).reduce(((t,e)=>t+e.to-e.from),0);return(l>0?l+c:l)>=o}function Hf(t,e){const{nodeExtensions:n}=Hp(e),i=n.find((e=>e.name===t));if(!i)return!1;const r=Jp(zp(i,"group",{name:i.name,options:i.options,storage:i.storage}));return"string"==typeof r&&r.split(" ").includes("list")}function qf(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const i=n.filter((t=>null==e?void 0:e.includes(t.type.name)));t.tr.ensureMarks(i)}}const Kf=(t,e)=>{const n=Bf((t=>t.type===e))(t.selection);if(!n)return!0;const i=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===i)return!0;const r=t.doc.nodeAt(i);return n.node.type!==(null==r?void 0:r.type)||!Ql(t.doc,n.pos)||(t.join(n.pos),!0)},Wf=(t,e)=>{const n=Bf((t=>t.type===e))(t.selection);if(!n)return!0;const i=t.doc.resolve(n.start).after(n.depth);if(void 0===i)return!0;const r=t.doc.nodeAt(i);return n.node.type!==(null==r?void 0:r.type)||!Ql(t.doc,i)||(t.join(i),!0)};var Uf=Object.freeze({__proto__:null,blur:()=>({editor:t,view:e})=>(requestAnimationFrame((()=>{var n;t.isDestroyed||(e.dom.blur(),null===(n=null===window||void 0===window?void 0:window.getSelection())||void 0===n||n.removeAllRanges())})),!0),clearContent:(t=!1)=>({commands:e})=>e.setContent("",t),clearNodes:()=>({state:t,tr:e,dispatch:n})=>{const{selection:i}=e,{ranges:r}=i;return!n||(r.forEach((({$from:n,$to:i})=>{t.doc.nodesBetween(n.pos,i.pos,((t,n)=>{if(t.type.isText)return;const{doc:i,mapping:r}=e,s=i.resolve(r.map(n)),o=i.resolve(r.map(n+t.nodeSize)),a=s.blockRange(o);if(!a)return;const l=Ul(a);if(t.type.isTextblock){const{defaultType:t}=s.parent.contentMatchAt(s.index());e.setNodeMarkup(a.start,t)}(l||0===l)&&e.lift(a,l)}))})),!0)},command:t=>e=>t(e),createParagraphNear:()=>({state:t,dispatch:e})=>Sp(t,e),cut:(t,e)=>({editor:n,tr:i})=>{const{state:r}=n,s=r.doc.slice(t.from,t.to);i.deleteRange(t.from,t.to);const o=i.mapping.map(e);return i.insert(o,s.content),i.setSelection(new wc(i.doc.resolve(o-1))),!0},deleteCurrentNode:()=>({tr:t,dispatch:e})=>{const{selection:n}=t,i=n.$anchor.node();if(i.content.size>0)return!1;const r=t.selection.$anchor;for(let n=r.depth;n>0;n-=1){if(r.node(n).type===i.type){if(e){const e=r.before(n),i=r.after(n);t.delete(e,i).scrollIntoView()}return!0}}return!1},deleteNode:t=>({tr:e,state:n,dispatch:i})=>{const r=Kp(t,n.schema),s=e.selection.$anchor;for(let t=s.depth;t>0;t-=1){if(s.node(t).type===r){if(i){const n=s.before(t),i=s.after(t);e.delete(n,i).scrollIntoView()}return!0}}return!1},deleteRange:t=>({tr:e,dispatch:n})=>{const{from:i,to:r}=t;return n&&e.delete(i,r),!0},deleteSelection:()=>({state:t,dispatch:e})=>cp(t,e),enter:()=>({commands:t})=>t.keyboardShortcut("Enter"),exitCode:()=>({state:t,dispatch:e})=>xp(t,e),extendMarkRange:(t,e={})=>({tr:n,state:i,dispatch:r})=>{const s=xf(t,i.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(r){const t=kf(l,s,e);if(t&&t.from<=c&&t.to>=u){const e=wc.create(o,t.from,t.to);n.setSelection(e)}}return!0},first:t=>e=>{const n="function"==typeof t?t(e):t;for(let t=0;t<n.length;t+=1)if(n[t](e))return!0;return!1},focus:(t=null,e={})=>({editor:n,view:i,tr:r,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{Tf()&&i.dom.focus(),requestAnimationFrame((()=>{n.isDestroyed||(i.focus(),(null==e?void 0:e.scrollIntoView)&&n.commands.scrollIntoView())}))};if(i.hasFocus()&&null===t||!1===t)return!0;if(s&&null===t&&!Sf(n.state.selection))return o(),!0;const a=_f(r.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||r.setSelection(a),l&&r.storedMarks&&r.setStoredMarks(r.storedMarks),o()),!0},forEach:(t,e)=>n=>t.every(((t,i)=>e(t,{...n,index:i}))),insertContent:(t,e)=>({tr:n,commands:i})=>i.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),insertContentAt:(t,e,n)=>({tr:i,dispatch:r,editor:s})=>{if(r){n={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};const r=Ef(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if("<>"===r.toString())return!0;let{from:o,to:a}="number"==typeof t?{from:t,to:t}:{from:t.from,to:t.to},l=!0,c=!0;if((r.toString().startsWith("<")?r:[r]).forEach((t=>{t.check(),l=!!l&&(t.isText&&0===t.marks.length),c=!!c&&t.isBlock})),o===a&&c){const{parent:t}=i.doc.resolve(o);t.isTextblock&&!t.type.spec.code&&!t.childCount&&(o-=1,a+=1)}let u;l?(u=Array.isArray(e)?e.map((t=>t.text||"")).join(""):"object"==typeof e&&e&&e.text?e.text:e,i.insertText(u,o,a)):(u=r,i.replaceWith(o,a,u)),n.updateSelection&&function(t,e,n){const i=t.steps.length-1;if(i<e)return;const r=t.steps[i];if(!(r instanceof zl||r instanceof Hl))return;const s=t.mapping.maps[i];let o=0;s.forEach(((t,e,n,i)=>{0===o&&(o=i)})),t.setSelection(gc.near(t.doc.resolve(o),n))}(i,i.steps.length-1,-1),n.applyInputRules&&i.setMeta("applyInputRules",{from:o,text:u}),n.applyPasteRules&&i.setMeta("applyPasteRules",{from:o,text:u})}return!0},joinUp:()=>({state:t,dispatch:e})=>((t,e)=>{let n,i=t.selection,r=i instanceof xc;if(r){if(i.node.isTextblock||!Ql(t.doc,i.from))return!1;n=i.from}else if(n=Zl(t.doc,i.from,-1),null==n)return!1;if(e){let i=t.tr.join(n);r&&i.setSelection(xc.create(i.doc,n-t.doc.resolve(n).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0})(t,e),joinDown:()=>({state:t,dispatch:e})=>((t,e)=>{let n,i=t.selection;if(i instanceof xc){if(i.node.isTextblock||!Ql(t.doc,i.to))return!1;n=i.to}else if(n=Zl(t.doc,i.to,1),null==n)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0})(t,e),joinBackward:()=>({state:t,dispatch:e})=>dp(t,e),joinForward:()=>({state:t,dispatch:e})=>vp(t,e),joinItemBackward:()=>({tr:t,state:e,dispatch:n})=>{try{const i=Zl(e.doc,e.selection.$from.pos,-1);return null!=i&&(t.join(i,2),n&&n(t),!0)}catch{return!1}},joinItemForward:()=>({state:t,dispatch:e,tr:n})=>{try{const i=Zl(t.doc,t.selection.$from.pos,1);return null!=i&&(n.join(i,2),e&&e(n),!0)}catch(t){return!1}},joinTextblockBackward:()=>({state:t,dispatch:e})=>((t,e,n)=>{let i=up(t,n);if(!i)return!1;let r=mp(i);return!!r&&hp(t,r,e)})(t,e),joinTextblockForward:()=>({state:t,dispatch:e})=>((t,e,n)=>{let i=gp(t,n);if(!i)return!1;let r=bp(i);return!!r&&hp(t,r,e)})(t,e),keyboardShortcut:t=>({editor:e,view:n,tr:i,dispatch:r})=>{const s=function(t){const e=t.split(/-(?!$)/);let n,i,r,s,o=e[e.length-1];"Space"===o&&(o=" ");for(let t=0;t<e.length-1;t+=1){const o=e[t];if(/^(cmd|meta|m)$/i.test(o))s=!0;else if(/^a(lt)?$/i.test(o))n=!0;else if(/^(c|ctrl|control)$/i.test(o))i=!0;else if(/^s(hift)?$/i.test(o))r=!0;else{if(!/^mod$/i.test(o))throw new Error(`Unrecognized modifier name: ${o}`);Tf()||Af()?s=!0:i=!0}}return n&&(o=`Alt-${o}`),i&&(o=`Ctrl-${o}`),s&&(o=`Meta-${o}`),r&&(o=`Shift-${o}`),o}(t).split(/-(?!$)/),o=s.find((t=>!["Alt","Ctrl","Meta","Shift"].includes(t))),a=new KeyboardEvent("keydown",{key:"Space"===o?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction((()=>{n.someProp("handleKeyDown",(t=>t(n,a)))}));return null==l||l.steps.forEach((t=>{const e=t.map(i.mapping);e&&r&&i.maybeStep(e)})),!0},lift:(t,e={})=>({state:n,dispatch:i})=>!!Nf(n,Kp(t,n.schema),e)&&((t,e)=>{let{$from:n,$to:i}=t.selection,r=n.blockRange(i),s=r&&Ul(r);return null!=s&&(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)})(n,i),liftEmptyBlock:()=>({state:t,dispatch:e})=>Cp(t,e),liftListItem:t=>({state:e,dispatch:n})=>Fp(Kp(t,e.schema))(e,n),newlineInCode:()=>({state:t,dispatch:e})=>wp(t,e),resetAttributes:(t,e)=>({tr:n,state:i,dispatch:r})=>{let s=null,o=null;const a=Df("string"==typeof t?t:t.name,i.schema);return!!a&&("node"===a&&(s=Kp(t,i.schema)),"mark"===a&&(o=xf(t,i.schema)),r&&n.selection.ranges.forEach((t=>{i.doc.nodesBetween(t.$from.pos,t.$to.pos,((t,i)=>{s&&s===t.type&&n.setNodeMarkup(i,void 0,Lf(t.attrs,e)),o&&t.marks.length&&t.marks.forEach((r=>{o===r.type&&n.addMark(i,i+t.nodeSize,o.create(Lf(r.attrs,e)))}))}))})),!0)},scrollIntoView:()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),selectAll:()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),selectNodeBackward:()=>({state:t,dispatch:e})=>fp(t,e),selectNodeForward:()=>({state:t,dispatch:e})=>yp(t,e),selectParentNode:()=>({state:t,dispatch:e})=>((t,e)=>{let n,{$from:i,to:r}=t.selection,s=i.sharedDepth(r);return 0!=s&&(n=i.before(s),e&&e(t.tr.setSelection(xc.create(t.doc,n))),!0)})(t,e),selectTextblockEnd:()=>({state:t,dispatch:e})=>Ap(t,e),selectTextblockStart:()=>({state:t,dispatch:e})=>Ep(t,e),setContent:(t,e=!1,n={})=>({tr:i,editor:r,dispatch:s})=>{const{doc:o}=i,a=If(t,r.schema,n);return s&&i.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0},setMark:(t,e={})=>({tr:n,state:i,dispatch:r})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=xf(t,i.schema);if(r)if(o){const t=Pf(i,l);n.addStoredMark(l.create({...t,...e}))}else a.forEach((t=>{const r=t.$from.pos,s=t.$to.pos;i.doc.nodesBetween(r,s,((t,i)=>{const o=Math.max(i,r),a=Math.min(i+t.nodeSize,s);t.marks.find((t=>t.type===l))?t.marks.forEach((t=>{l===t.type&&n.addMark(o,a,l.create({...t.attrs,...e}))})):n.addMark(o,a,l.create(e))}))}));return function(t,e,n){var i;const{selection:r}=e;let s=null;if(Sf(r)&&(s=r.$cursor),s){const e=null!==(i=t.storedMarks)&&void 0!==i?i:s.marks();return!!n.isInSet(e)||!e.some((t=>t.type.excludes(n)))}const{ranges:o}=r;return o.some((({$from:e,$to:i})=>{let r=0===e.depth&&t.doc.inlineContent&&t.doc.type.allowsMarkType(n);return t.doc.nodesBetween(e.pos,i.pos,((t,e,i)=>{if(r)return!1;if(t.isInline){const e=!i||i.type.allowsMarkType(n),s=!!n.isInSet(t.marks)||!t.marks.some((t=>t.type.excludes(n)));r=e&&s}return!r})),r}))}(i,n,l)},setMeta:(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),setNode:(t,e={})=>({state:n,dispatch:i,chain:r})=>{const s=Kp(t,n.schema);return s.isTextblock?r().command((({commands:t})=>!!Np(s,e)(n)||t.clearNodes())).command((({state:t})=>Np(s,e)(t,i))).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection:t=>({tr:e,dispatch:n})=>{if(n){const{doc:n}=e,i=Cf(t,0,n.content.size),r=xc.create(n,i);e.setSelection(r)}return!0},setTextSelection:t=>({tr:e,dispatch:n})=>{if(n){const{doc:n}=e,{from:i,to:r}="number"==typeof t?{from:t,to:t}:t,s=wc.atStart(n).from,o=wc.atEnd(n).to,a=Cf(i,s,o),l=Cf(r,s,o),c=wc.create(n,a,l);e.setSelection(c)}return!0},sinkListItem:t=>({state:e,dispatch:n})=>{const i=Kp(t,e.schema);return(r=i,function(t,e){let{$from:n,$to:i}=t.selection,s=n.blockRange(i,(t=>t.childCount>0&&t.firstChild.type==r));if(!s)return!1;let o=s.startIndex;if(0==o)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=r)return!1;if(e){let n=l.lastChild&&l.lastChild.type==a.type,i=_a.from(n?r.create():null),o=new Na(_a.from(r.create(null,_a.from(a.type.create(null,i)))),n?3:1,0),c=s.start,u=s.end;e(t.tr.step(new Hl(c-(n?3:1),u,c,u,o,1,!0)).scrollIntoView())}return!0})(e,n);var r},splitBlock:({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:i,editor:r})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=Vf(r.extensionManager.attributes,a.node().type.name,a.node().attrs);if(s instanceof xc&&s.node.isBlock)return!(!a.parentOffset||!Yl(o,a.pos))&&(i&&(t&&qf(n,r.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(i){const i=l.parentOffset===l.parent.content.size;s instanceof wc&&e.deleteSelection();const o=0===a.depth?void 0:function(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(a.node(-1).contentMatchAt(a.indexAfter(-1)));let u=i&&o?[{type:o,attrs:c}]:void 0,d=Yl(e.doc,e.mapping.map(a.pos),1,u);if(u||d||!Yl(e.doc,e.mapping.map(a.pos),1,o?[{type:o}]:void 0)||(d=!0,u=o?[{type:o,attrs:c}]:void 0),d&&(e.split(e.mapping.map(a.pos),1,u),o&&!i&&!a.parentOffset&&a.parent.type!==o)){const t=e.mapping.map(a.before()),n=e.doc.resolve(t);a.node(-1).canReplaceWith(n.index(),n.index()+1,o)&&e.setNodeMarkup(e.mapping.map(a.before()),o)}t&&qf(n,r.extensionManager.splittableMarks),e.scrollIntoView()}return!0},splitListItem:t=>({tr:e,state:n,dispatch:i,editor:r})=>{var s;const o=Kp(t,n.schema),{$from:a,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=r.extensionManager.attributes;if(0===a.parent.content.size&&a.node(-1).childCount===a.indexAfter(-1)){if(2===a.depth||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let t=_a.empty;const n=a.index(-1)?1:a.index(-2)?2:3;for(let e=a.depth-n;e>=a.depth-3;e-=1)t=_a.from(a.node(e).copy(t));const i=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,r=Vf(d,a.node().type.name,a.node().attrs),l=(null===(s=o.contentMatch.defaultType)||void 0===s?void 0:s.createAndFill(r))||void 0;t=t.append(_a.from(o.createAndFill(null,l)||void 0));const c=a.before(a.depth-(n-1));e.replace(c,a.after(-i),new Na(t,4-n,0));let u=-1;e.doc.nodesBetween(c,e.doc.content.size,((t,e)=>{if(u>-1)return!1;t.isTextblock&&0===t.content.size&&(u=e+1)})),u>-1&&e.setSelection(wc.near(e.doc.resolve(u))),e.scrollIntoView()}return!0}const h=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,p=Vf(d,u.type.name,u.attrs),f=Vf(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=h?[{type:o,attrs:p},{type:h,attrs:f}]:[{type:o,attrs:p}];if(!Yl(e.doc,a.pos,2))return!1;if(i){const{selection:t,storedMarks:s}=n,{splittableMarks:o}=r.extensionManager,l=s||t.$to.parentOffset&&t.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!l||!i)return!0;const c=l.filter((t=>o.includes(t.type.name)));e.ensureMarks(c)}return!0},toggleList:(t,e,n,i={})=>({editor:r,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=r.extensionManager,p=Kp(t,o.schema),f=Kp(e,o.schema),{selection:m,storedMarks:g}=o,{$from:v,$to:y}=m,b=v.blockRange(y),w=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const k=Bf((t=>Hf(t.type.name,d)))(m);if(b.depth>=1&&k&&b.depth-k.depth<=1){if(k.node.type===p)return c.liftListItem(f);if(Hf(k.node.type.name,d)&&p.validContent(k.node.content)&&a)return l().command((()=>(s.setNodeMarkup(k.pos,p),!0))).command((()=>Kf(s,p))).command((()=>Wf(s,p))).run()}return n&&w&&a?l().command((()=>{const t=u().wrapInList(p,i),e=w.filter((t=>h.includes(t.type.name)));return s.ensureMarks(e),!!t||c.clearNodes()})).wrapInList(p,i).command((()=>Kf(s,p))).command((()=>Wf(s,p))).run():l().command((()=>!!u().wrapInList(p,i)||c.clearNodes())).wrapInList(p,i).command((()=>Kf(s,p))).command((()=>Wf(s,p))).run()},toggleMark:(t,e={},n={})=>({state:i,commands:r})=>{const{extendEmptyMarkRange:s=!1}=n,o=xf(t,i.schema);return zf(i,o,e)?r.unsetMark(o,{extendEmptyMarkRange:s}):r.setMark(o,e)},toggleNode:(t,e,n={})=>({state:i,commands:r})=>{const s=Kp(t,i.schema),o=Kp(e,i.schema);return Nf(i,s,n)?r.setNode(o):r.setNode(s,n)},toggleWrap:(t,e={})=>({state:n,commands:i})=>{const r=Kp(t,n.schema);return Nf(n,r,e)?i.lift(r):i.wrapIn(r,e)},undoInputRule:()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let i=0;i<n.length;i+=1){const r=n[i];let s;if(r.spec.isInputRules&&(s=r.getState(t))){if(e){const e=t.tr,n=s.transform;for(let t=n.steps.length-1;t>=0;t-=1)e.step(n.steps[t].invert(n.docs[t]));if(s.text){const n=e.doc.resolve(s.from).marks();e.replaceWith(s.from,s.to,t.schema.text(s.text,n))}else e.delete(s.from,s.to)}return!0}}return!1},unsetAllMarks:()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:i,ranges:r}=n;return i||e&&r.forEach((e=>{t.removeMark(e.$from.pos,e.$to.pos)})),!0},unsetMark:(t,e={})=>({tr:n,state:i,dispatch:r})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=xf(t,i.schema),{$from:c,empty:u,ranges:d}=a;if(!r)return!0;if(u&&o){let{from:t,to:e}=a;const i=null===(s=c.marks().find((t=>t.type===l)))||void 0===s?void 0:s.attrs,r=kf(c,l,i);r&&(t=r.from,e=r.to),n.removeMark(t,e,l)}else d.forEach((t=>{n.removeMark(t.$from.pos,t.$to.pos,l)}));return n.removeStoredMark(l),!0},updateAttributes:(t,e={})=>({tr:n,state:i,dispatch:r})=>{let s=null,o=null;const a=Df("string"==typeof t?t:t.name,i.schema);return!!a&&("node"===a&&(s=Kp(t,i.schema)),"mark"===a&&(o=xf(t,i.schema)),r&&n.selection.ranges.forEach((t=>{const r=t.$from.pos,a=t.$to.pos;i.doc.nodesBetween(r,a,((t,i)=>{s&&s===t.type&&n.setNodeMarkup(i,void 0,{...t.attrs,...e}),o&&t.marks.length&&t.marks.forEach((s=>{if(o===s.type){const l=Math.max(i,r),c=Math.min(i+t.nodeSize,a);n.addMark(l,c,o.create({...s.attrs,...e}))}}))}))})),!0)},wrapIn:(t,e={})=>({state:n,dispatch:i})=>function(t,e=null){return function(n,i){let{$from:r,$to:s}=n.selection,o=r.blockRange(s),a=o&&Gl(o,t,e);return!!a&&(i&&i(n.tr.wrap(o,a).scrollIntoView()),!0)}}(Kp(t,n.schema),e)(n,i),wrapInList:(t,e={})=>({state:n,dispatch:i})=>jp(Kp(t,n.schema),e)(n,i)});const Gf=ff.create({name:"commands",addCommands(){return{...Uf}}}),Jf=ff.create({name:"editable",addProseMirrorPlugins(){return[new Pc({key:new Fc("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Yf=ff.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Pc({key:new Fc("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const i=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(i),!1},blur:(e,n)=>{t.isFocused=!1;const i=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(i),!1}}}})]}}),Qf=ff.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first((({commands:t})=>[()=>t.undoInputRule(),()=>t.command((({tr:e})=>{const{selection:n,doc:i}=e,{empty:r,$anchor:s}=n,{pos:o,parent:a}=s,l=s.parent.isTextblock&&o>0?e.doc.resolve(o-1):s,c=l.parent.type.spec.isolating,u=s.pos-s.parentOffset,d=c&&1===l.parent.childCount?u===s.pos:gc.atStart(i).from===o;return!(!r||!a.type.isTextblock||a.textContent.length||!d||d&&"paragraph"===s.parent.type.name)&&t.clearNodes()})),()=>t.deleteSelection(),()=>t.joinBackward(),()=>t.selectNodeBackward()])),e=()=>this.editor.commands.first((({commands:t})=>[()=>t.deleteSelection(),()=>t.deleteCurrentNode(),()=>t.joinForward(),()=>t.selectNodeForward()])),n={Enter:()=>this.editor.commands.first((({commands:t})=>[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()])),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},r={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Tf()||Af()?r:i},addProseMirrorPlugins(){return[new Pc({key:new Fc("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some((t=>t.docChanged))&&!e.doc.eq(n.doc)))return;const{empty:i,from:r,to:s}=e.selection,o=gc.atStart(e.doc).from,a=gc.atEnd(e.doc).to;if(i||!(r===o&&s===a))return;if(!(0===n.doc.textBetween(0,n.doc.content.size," "," ").length))return;const l=n.tr,c=Rp({state:n,transaction:l}),{commands:u}=new $p({editor:this.editor,state:c});return u.clearNodes(),l.steps.length?l:void 0}})]}}),Xf=ff.create({name:"tabindex",addProseMirrorPlugins(){return[new Pc({key:new Fc("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Zf{constructor(t,e,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=t,this.editor=e,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return null!==(t=this.actualDepth)&&void 0!==t?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let e=this.from,n=this.to;if(this.isBlock){if(0===this.content.size)return void console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);e=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:e,to:n},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(0===this.depth)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),e=this.resolvedPos.doc.resolve(t);return new Zf(e,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new Zf(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new Zf(t,this.editor)}get children(){const t=[];return this.node.content.forEach(((e,n)=>{const i=e.isBlock&&!e.isTextblock,r=this.pos+n+1,s=this.resolvedPos.doc.resolve(r);if(!i&&s.depth<=this.depth)return;const o=new Zf(s,this.editor,i,i?e:null);i&&(o.actualDepth=this.depth+1),t.push(new Zf(s,this.editor,i,i?e:null))})),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,e={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===t)if(Object.keys(e).length>0){const t=i.node.attrs,n=Object.keys(e);for(let i=0;i<n.length;i+=1){const r=n[i];if(t[r]!==e[r])break}}else n=i;i=i.parent}return n}querySelector(t,e={}){return this.querySelectorAll(t,e,!0)[0]||null}querySelectorAll(t,e={},n=!1){let i=[];if(!this.children||0===this.children.length)return i;const r=Object.keys(e);return this.children.forEach((s=>{if(!(n&&i.length>0)){if(s.node.type.name===t){r.every((t=>e[t]===s.node.attrs[t]))&&i.push(s)}n&&i.length>0||(i=i.concat(s.querySelectorAll(t,e,n)))}})),i}setAttribute(t){const e=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,t).setTextSelection(e.from).run()}}class tm extends Vp{constructor(t={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout((()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))}),0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=function(t,e,n){const i=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(null!==i)return i;const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.setAttribute("data-tiptap-style"+(n?`-${n}`:""),""),r.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(r),r}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,e){const n=Gp(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],i=this.state.reconfigure({plugins:n});this.view.updateState(i)}unregisterPlugin(t){if(this.isDestroyed)return;const e="string"==typeof t?`${t}$`:t.key,n=this.state.reconfigure({plugins:this.state.plugins.filter((t=>!t.key.startsWith(e)))});this.view.updateState(n)}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[Jf,vf.configure({blockSeparator:null===(e=null===(t=this.options.coreExtensionOptions)||void 0===t?void 0:t.clipboardTextSerializer)||void 0===e?void 0:e.blockSeparator}),Gf,Yf,Qf,Xf]:[],...this.options.extensions].filter((t=>["extension","node","mark"].includes(null==t?void 0:t.type)));this.extensionManager=new df(n,this)}createCommandManager(){this.commandManager=new $p({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const t=If(this.options.content,this.schema,this.options.parseOptions),e=_f(t,this.options.autofocus);this.view=new Uh(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:Lc.create({doc:t,selection:e||void 0})});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews(),this.prependClass();this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void t.steps.forEach((t=>{var e;return null===(e=this.capturedTransaction)||void 0===e?void 0:e.step(t)})):void(this.capturedTransaction=t);const e=this.state.apply(t),n=!this.state.selection.eq(e.selection);this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const i=t.getMeta("focus"),r=t.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:t}),r&&this.emit("blur",{editor:this,event:r.event,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return Rf(this.state,t)}isActive(t,e){const n="string"==typeof t?t:null,i="string"==typeof t?e:t;return function(t,e,n={}){if(!e)return Nf(t,null,n)||zf(t,null,n);const i=Df(e,t.schema);return"node"===i?Nf(t,e,n):"mark"===i&&zf(t,e,n)}(this.state,n,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return jf(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e="\n\n",textSerializers:n={}}=t||{};return Ff(this.state.doc,{blockSeparator:e,textSerializers:{...gf(this.schema),...n}})}get isEmpty(){return function(t){var e;const n=null===(e=t.type.createAndFill())||void 0===e?void 0:e.toJSON(),i=t.toJSON();return JSON.stringify(n)===JSON.stringify(i)}(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!(null===(t=this.view)||void 0===t?void 0:t.docView)}$node(t,e){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new Zf(e,this)}get $doc(){return this.$pos(0)}}function em(t){return new rf({find:t.find,handler:({state:e,range:n,match:i})=>{const r=Jp(t.getAttributes,void 0,i);if(!1===r||null===r)return null;const{tr:s}=e,o=i[i.length-1],a=i[0];if(o){const i=a.search(/\S/),l=n.from+a.indexOf(o),c=l+o.length;if($f(n.from,n.to,e.doc).filter((e=>e.mark.type.excluded.find((n=>n===t.type&&n!==e.mark.type)))).filter((t=>t.to>l)).length)return null;c<n.to&&s.delete(c,n.to),l>n.from&&s.delete(n.from+i,l);const u=n.from+i+o.length;s.addMark(n.from+i,u,t.type.create(r||{})),s.removeStoredMark(t.type)}}})}function nm(t){return new rf({find:t.find,handler:({state:e,range:n,match:i})=>{const r=e.doc.resolve(n.from),s=Jp(t.getAttributes,void 0,i)||{};if(!r.node(-1).canReplaceWith(r.index(-1),r.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function im(t){return new rf({find:t.find,handler:({state:e,range:n,match:i,chain:r})=>{const s=Jp(t.getAttributes,void 0,i)||{},o=e.tr.delete(n.from,n.to),a=o.doc.resolve(n.from).blockRange(),l=a&&Gl(a,t.type,s);if(!l)return null;if(o.wrap(a,l),t.keepMarks&&t.editor){const{selection:n,storedMarks:i}=e,{splittableMarks:r}=t.editor.extensionManager,s=i||n.$to.parentOffset&&n.$from.marks();if(s){const t=s.filter((t=>r.includes(t.type.name)));o.ensureMarks(t)}}if(t.keepAttributes){const e="bulletList"===t.type.name||"orderedList"===t.type.name?"listItem":"taskList";r().updateAttributes(e,s).run()}const c=o.doc.resolve(n.from-1).nodeBefore;c&&c.type===t.type&&Ql(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(i,c))&&o.join(n.from-1)}})}class rm{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Jp(zp(this,"addOptions",{name:this.name}))),this.storage=Jp(zp(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new rm(t)}configure(t={}){const e=this.extend();return e.options=pf(this.options,t),e.storage=Jp(zp(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new rm({...this.config,...t});return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=Jp(zp(e,"addOptions",{name:e.name})),e.storage=Jp(zp(e,"addStorage",{name:e.name,options:e.options})),e}static handleExit({editor:t,mark:e}){const{tr:n}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const r=i.marks();if(!!!r.find((t=>(null==t?void 0:t.type.name)===e.name)))return!1;const s=r.find((t=>(null==t?void 0:t.type.name)===e.name));return s&&n.removeStoredMark(s),n.insertText(" ",i.pos),t.view.dispatch(n),!0}return!1}}class sm{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Jp(zp(this,"addOptions",{name:this.name}))),this.storage=Jp(zp(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new sm(t)}configure(t={}){const e=this.extend();return e.options=pf(this.options,t),e.storage=Jp(zp(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new sm({...this.config,...t});return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=Jp(zp(e,"addOptions",{name:e.name})),e.storage=Jp(zp(e,"addStorage",{name:e.name,options:e.options})),e}}function om(t){return new lf({find:t.find,handler:({state:e,range:n,match:i,pasteEvent:r})=>{const s=Jp(t.getAttributes,void 0,i,r);if(!1===s||null===s)return null;const{tr:o}=e,a=i[i.length-1],l=i[0];let c=n.to;if(a){const i=l.search(/\S/),r=n.from+l.indexOf(a),u=r+a.length;if($f(n.from,n.to,e.doc).filter((e=>e.mark.type.excluded.find((n=>n===t.type&&n!==e.mark.type)))).filter((t=>t.to>r)).length)return null;u<n.to&&o.delete(u,n.to),r>n.from&&o.delete(n.from+i,r),c=n.from+i+a.length,o.addMark(n.from+i,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const am=/^\s*>\s$/,lm=sm.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Wp(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[im({find:am,type:this.type})]}}),cm=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,um=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,dm=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,hm=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,pm=rm.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>"normal"!==t.style.fontWeight&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Wp(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[em({find:cm,type:this.type}),em({find:dm,type:this.type})]},addPasteRules(){return[om({find:um,type:this.type}),om({find:hm,type:this.type})]}}),fm=sm.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Wp(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),mm=rm.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>!!t.hasAttribute("style")&&{}}]},renderHTML({HTMLAttributes:t}){return["span",Wp(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Pf(t,this.type);return!!Object.entries(n).some((([,t])=>!!t))||e.unsetMark(this.name)}}}}),gm=/^\s*([-+*])\s$/,vm=sm.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Wp(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(fm.name,this.editor.getAttributes(mm.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=im({find:gm,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=im({find:gm,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(mm.name),editor:this.editor})),[t]}}),ym=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,bm=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,wm=rm.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Wp(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[em({find:ym,type:this.type})]},addPasteRules(){return[om({find:bm,type:this.type})]}}),km=/^```([a-z]+)?[\s\n]$/,xm=/^~~~([a-z]+)?[\s\n]$/,Sm=sm.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,i=[...(null===(e=t.firstElementChild)||void 0===e?void 0:e.classList)||[]].filter((t=>t.startsWith(n))).map((t=>t.replace(n,"")))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Wp(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=1===e.pos;return!(!t||e.parent.type.name!==this.name)&&(!(!n&&e.parent.textContent.length)&&this.editor.commands.clearNodes())},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:i,empty:r}=n;if(!r||i.parent.type!==this.type)return!1;const s=i.parentOffset===i.parent.nodeSize-2,o=i.parent.textContent.endsWith("\n\n");return!(!s||!o)&&t.chain().command((({tr:t})=>(t.delete(i.pos-2,i.pos),!0))).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:i}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;if(!(r.parentOffset===r.parent.nodeSize-2))return!1;const o=r.after();if(void 0===o)return!1;return!i.nodeAt(o)&&t.commands.exitCode()}}},addInputRules(){return[nm({find:km,type:this.type,getAttributes:t=>({language:t[1]})}),nm({find:xm,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Pc({key:new Fc("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData)return!1;if(this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),i=e.clipboardData.getData("vscode-editor-data"),r=i?JSON.parse(i):void 0,s=null==r?void 0:r.mode;if(!n||!s)return!1;const{tr:o}=t.state;return t.state.selection.from===t.state.doc.nodeSize-(1+2*t.state.selection.$to.depth)?o.insert(t.state.selection.from-1,this.type.create({language:s})):o.replaceSelectionWith(this.type.create({language:s})),o.setSelection(wc.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.insertText(n.replace(/\r\n?/g,"\n")),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),Cm=sm.create({name:"doc",topNode:!0,content:"block+"});function _m(t={}){return new Pc({view(e){return new Tm(e,t)}})}class Tm{constructor(t,e){var n;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(n=e.width)&&void 0!==n?n:1,this.color=!1===e.color?void 0:e.color||"black",this.class=e.class,this.handlers=["dragover","dragend","drop","dragleave"].map((e=>{let n=t=>{this[e](t)};return t.dom.addEventListener(e,n),{name:e,handler:n}}))}destroy(){this.handlers.forEach((({name:t,handler:e})=>this.editorView.dom.removeEventListener(t,e)))}update(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t,e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent;if(n){let n=e.nodeBefore,i=e.nodeAfter;if(n||i){let e=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0));if(e){let r=e.getBoundingClientRect(),s=n?r.bottom:r.top;n&&i&&(s=(s+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:r.left,right:r.right,top:s-this.width/2,bottom:s+this.width/2}}}}if(!t){let e=this.editorView.coordsAtPos(this.cursorPos);t={left:e.left-this.width/2,right:e.left+this.width/2,top:e.top,bottom:e.bottom}}let i,r,s=this.editorView.dom.offsetParent;if(this.element||(this.element=s.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!s||s==document.body&&"static"==getComputedStyle(s).position)i=-pageXOffset,r=-pageYOffset;else{let t=s.getBoundingClientRect();i=t.left-s.scrollLeft,r=t.top-s.scrollTop}this.element.style.left=t.left-i+"px",this.element.style.top=t.top-r+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout((()=>this.setCursor(null)),t)}dragover(t){if(!this.editorView.editable)return;let e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),n=e&&e.inside>=0&&this.editorView.state.doc.nodeAt(e.inside),i=n&&n.type.spec.disableDropCursor,r="function"==typeof i?i(this.editorView,e,t):i;if(e&&!r){let t=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let e=tc(this.editorView.state.doc,t,this.editorView.dragging.slice);null!=e&&(t=e)}this.setCursor(t),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}const Mm=ff.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[_m(this.options)]}});class Om extends gc{constructor(t){super(t,t)}map(t,e){let n=t.resolve(e.map(this.head));return Om.valid(n)?new Om(n):gc.near(n)}content(){return Na.empty}eq(t){return t instanceof Om&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new Om(t.resolve(e.pos))}getBookmark(){return new Em(this.anchor)}static valid(t){let e=t.parent;if(e.isTextblock||!function(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),i=t.node(e);if(0!=n)for(let t=i.child(n-1);;t=t.lastChild){if(0==t.childCount&&!t.inlineContent||t.isAtom||t.type.spec.isolating)return!0;if(t.inlineContent)return!1}else if(i.type.spec.isolating)return!0}return!0}(t)||!function(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),i=t.node(e);if(n!=i.childCount)for(let t=i.child(n);;t=t.firstChild){if(0==t.childCount&&!t.inlineContent||t.isAtom||t.type.spec.isolating)return!0;if(t.inlineContent)return!1}else if(i.type.spec.isolating)return!0}return!0}(t))return!1;let n=e.type.spec.allowGapCursor;if(null!=n)return n;let i=e.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,e,n=!1){t:for(;;){if(!n&&Om.valid(t))return t;let i=t.pos,r=null;for(let n=t.depth;;n--){let s=t.node(n);if(e>0?t.indexAfter(n)<s.childCount:t.index(n)>0){r=s.child(e>0?t.indexAfter(n):t.index(n)-1);break}if(0==n)return null;i+=e;let o=t.doc.resolve(i);if(Om.valid(o))return o}for(;;){let s=e>0?r.firstChild:r.lastChild;if(!s){if(r.isAtom&&!r.isText&&!xc.isSelectable(r)){t=t.doc.resolve(i+r.nodeSize*e),n=!1;continue t}break}r=s,i+=e;let o=t.doc.resolve(i);if(Om.valid(o))return o}return null}}}Om.prototype.visible=!1,Om.findFrom=Om.findGapCursorFrom,gc.jsonID("gapcursor",Om);class Em{constructor(t){this.pos=t}map(t){return new Em(t.map(this.pos))}resolve(t){let e=t.resolve(this.pos);return Om.valid(e)?new Om(e):gc.near(e)}}const Am=lp({ArrowLeft:Nm("horiz",-1),ArrowRight:Nm("horiz",1),ArrowUp:Nm("vert",-1),ArrowDown:Nm("vert",1)});function Nm(t,e){const n="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,i,r){let s=t.selection,o=e>0?s.$to:s.$from,a=s.empty;if(s instanceof wc){if(!r.endOfTextblock(n)||0==o.depth)return!1;a=!1,o=t.doc.resolve(e>0?o.after():o.before())}let l=Om.findGapCursorFrom(o,e,a);return!!l&&(i&&i(t.tr.setSelection(new Om(l))),!0)}}function Dm(t,e,n){if(!t||!t.editable)return!1;let i=t.state.doc.resolve(e);if(!Om.valid(i))return!1;let r=t.posAtCoords({left:n.clientX,top:n.clientY});return!(r&&r.inside>-1&&xc.isSelectable(t.state.doc.nodeAt(r.inside)))&&(t.dispatch(t.state.tr.setSelection(new Om(i))),!0)}function Lm(t,e){if("insertCompositionText"!=e.inputType||!(t.state.selection instanceof Om))return!1;let{$from:n}=t.state.selection,i=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!i)return!1;let r=_a.empty;for(let t=i.length-1;t>=0;t--)r=_a.from(i[t].createAndFill(null,r));let s=t.state.tr.replace(n.pos,n.pos,new Na(r,0,0));return s.setSelection(wc.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function Im(t){if(!(t.selection instanceof Om))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",xh.create(t.doc,[bh.widget(t.selection.head,e,{key:"gapcursor"})])}const Pm=ff.create({name:"gapCursor",addProseMirrorPlugins(){return[new Pc({props:{decorations:Im,createSelectionBetween(t,e,n){return e.pos==n.pos&&Om.valid(n)?new Om(n):null},handleClick:Dm,handleKeyDown:Am,handleDOMEvents:{beforeinput:Lm}}})]},extendNodeSchema(t){var e;return{allowGapCursor:null!==(e=Jp(zp(t,"allowGapCursor",{name:t.name,options:t.options,storage:t.storage})))&&void 0!==e?e:null}}}),Bm=sm.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Wp(this.options.HTMLAttributes,t)]},renderText(){return"\n"},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:i})=>t.first([()=>t.exitCode(),()=>t.command((()=>{const{selection:t,storedMarks:r}=n;if(t.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:o}=i.extensionManager,a=r||t.$to.parentOffset&&t.$from.marks();return e().insertContent({type:this.name}).command((({tr:t,dispatch:e})=>{if(e&&a&&s){const e=a.filter((t=>o.includes(t.type.name)));t.ensureMarks(e)}return!0})).run()}))])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),jm=sm.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map((t=>({tag:`h${t}`,attrs:{level:t}})))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Wp(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.setNode(this.name,t),toggleHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return this.options.levels.reduce(((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})})),{})},addInputRules(){return this.options.levels.map((t=>nm({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}})))}});var Fm=200,Rm=function(){};Rm.prototype.append=function(t){return t.length?(t=Rm.from(t),!this.length&&t||t.length<Fm&&this.leafAppend(t)||this.length<Fm&&t.leafPrepend(this)||this.appendInner(t)):this},Rm.prototype.prepend=function(t){return t.length?Rm.from(t).append(this):this},Rm.prototype.appendInner=function(t){return new Vm(this,t)},Rm.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?Rm.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},Rm.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},Rm.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},Rm.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var i=[];return this.forEach((function(e,n){return i.push(t(e,n))}),e,n),i},Rm.from=function(t){return t instanceof Rm?t:t&&t.length?new $m(t):Rm.empty};var $m=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,i){for(var r=e;r<n;r++)if(!1===t(this.values[r],i+r))return!1},e.prototype.forEachInvertedInner=function(t,e,n,i){for(var r=e-1;r>=n;r--)if(!1===t(this.values[r],i+r))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=Fm)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=Fm)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Rm);Rm.empty=new $m([]);var Vm=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,i){var r=this.left.length;return!(e<r&&!1===this.left.forEachInner(t,e,Math.min(n,r),i))&&(!(n>r&&!1===this.right.forEachInner(t,Math.max(e-r,0),Math.min(this.length,n)-r,i+r))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,i){var r=this.left.length;return!(e>r&&!1===this.right.forEachInvertedInner(t,e-r,Math.max(n,r)-r,i+r))&&(!(n<r&&!1===this.left.forEachInvertedInner(t,Math.min(e,r),n,i))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(Rm),zm=Rm;class Hm{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(0==this.eventCount)return null;let n,i,r=this.items.length;for(;;r--){if(this.items.get(r-1).selection){--r;break}}e&&(n=this.remapping(r,this.items.length),i=n.maps.length);let s,o,a=t.tr,l=[],c=[];return this.items.forEach(((t,e)=>{if(!t.step)return n||(n=this.remapping(r,e+1),i=n.maps.length),i--,void c.push(t);if(n){c.push(new qm(t.map));let e,r=t.step.map(n.slice(i));r&&a.maybeStep(r).doc&&(e=a.mapping.maps[a.mapping.maps.length-1],l.push(new qm(e,void 0,void 0,l.length+c.length))),i--,e&&n.appendMap(e,i)}else a.maybeStep(t.step);return t.selection?(s=n?t.selection.map(n.slice(i)):t.selection,o=new Hm(this.items.slice(0,r).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:o,transform:a,selection:s}}addTransform(t,e,n,i){let r=[],s=this.eventCount,o=this.items,a=!i&&o.length?o.get(o.length-1):null;for(let n=0;n<t.steps.length;n++){let l,c=t.steps[n].invert(t.docs[n]),u=new qm(t.mapping.maps[n],c,e);(l=a&&a.merge(u))&&(u=l,n?r.pop():o=o.slice(0,o.length-1)),r.push(u),e&&(s++,e=void 0),i||(a=u)}let l=s-n.depth;return l>Wm&&(o=function(t,e){let n;return t.forEach(((t,i)=>{if(t.selection&&0==e--)return n=i,!1})),t.slice(n)}(o,l),s-=l),new Hm(o.append(r),s)}remapping(t,e){let n=new Ll;return this.items.forEach(((e,i)=>{let r=null!=e.mirrorOffset&&i-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:void 0;n.appendMap(e.map,r)}),t,e),n}addMaps(t){return 0==this.eventCount?this:new Hm(this.items.append(t.map((t=>new qm(t)))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-e),r=t.mapping,s=t.steps.length,o=this.eventCount;this.items.forEach((t=>{t.selection&&o--}),i);let a=e;this.items.forEach((e=>{let i=r.getMirror(--a);if(null==i)return;s=Math.min(s,i);let l=r.maps[i];if(e.step){let s=t.steps[i].invert(t.docs[i]),c=e.selection&&e.selection.map(r.slice(a+1,i));c&&o++,n.push(new qm(l,s,c))}else n.push(new qm(l))}),i);let l=[];for(let t=e;t<s;t++)l.push(new qm(r.maps[t]));let c=this.items.slice(0,i).append(l).append(n),u=new Hm(c,o);return u.emptyItemCount()>500&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let t=0;return this.items.forEach((e=>{e.step||t++})),t}compress(t=this.items.length){let e=this.remapping(0,t),n=e.maps.length,i=[],r=0;return this.items.forEach(((s,o)=>{if(o>=t)i.push(s),s.selection&&r++;else if(s.step){let t=s.step.map(e.slice(n)),o=t&&t.getMap();if(n--,o&&e.appendMap(o,n),t){let a=s.selection&&s.selection.map(e.slice(n));a&&r++;let l,c=new qm(o.invert(),t,a),u=i.length-1;(l=i.length&&i[u].merge(c))?i[u]=l:i.push(c)}}else s.map&&n--}),this.items.length,0),new Hm(zm.from(i.reverse()),r)}}Hm.empty=new Hm(zm.empty,0);class qm{constructor(t,e,n,i){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new qm(e.getMap().invert(),e,this.selection)}}}class Km{constructor(t,e,n,i,r){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=i,this.prevComposition=r}}const Wm=20;function Um(t){let e=[];return t.forEach(((t,n,i,r)=>e.push(i,r))),e}function Gm(t,e){if(!t)return null;let n=[];for(let i=0;i<t.length;i+=2){let r=e.map(t[i],1),s=e.map(t[i+1],-1);r<=s&&n.push(r,s)}return n}let Jm=!1,Ym=null;function Qm(t){let e=t.plugins;if(Ym!=e){Jm=!1,Ym=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Jm=!0;break}}return Jm}const Xm=new Fc("history"),Zm=new Fc("closeHistory");function tg(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Pc({key:Xm,state:{init(){return new Km(Hm.empty,Hm.empty,null,0,-1)},apply(e,n,i){return function(t,e,n,i){let r,s=n.getMeta(Xm);if(s)return s.historyState;n.getMeta(Zm)&&(t=new Km(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(o&&o.getMeta(Xm))return o.getMeta(Xm).redo?new Km(t.done.addTransform(n,void 0,i,Qm(e)),t.undone,Um(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new Km(t.done,t.undone.addTransform(n,void 0,i,Qm(e)),null,t.prevTime,t.prevComposition);if(!1===n.getMeta("addToHistory")||o&&!1===o.getMeta("addToHistory"))return(r=n.getMeta("rebased"))?new Km(t.done.rebased(n,r),t.undone.rebased(n,r),Gm(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Km(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Gm(t.prevRanges,n.mapping),t.prevTime,t.prevComposition);{let r=n.getMeta("composition"),s=0==t.prevTime||!o&&t.prevComposition!=r&&(t.prevTime<(n.time||0)-i.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach(((t,i)=>{for(let r=0;r<e.length;r+=2)t<=e[r+1]&&i>=e[r]&&(n=!0)})),n}(n,t.prevRanges)),a=o?Gm(t.prevRanges,n.mapping):Um(n.mapping.maps[n.steps.length-1]);return new Km(t.done.addTransform(n,s?e.selection.getBookmark():void 0,i,Qm(e)),Hm.empty,a,n.time,null==r?t.prevComposition:r)}}(n,i,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(t,e){let n=e.inputType,i="historyUndo"==n?ng:"historyRedo"==n?ig:null;return!!i&&(e.preventDefault(),i(t.state,t.dispatch))}}}})}function eg(t,e){return(n,i)=>{let r=Xm.getState(n);if(!r||0==(t?r.undone:r.done).eventCount)return!1;if(i){let s=function(t,e,n){let i=Qm(e),r=Xm.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,i);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),r,i),l=new Km(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Xm,{redo:n,historyState:l})}(r,n,t);s&&i(e?s.scrollIntoView():s)}return!0}}const ng=eg(!1,!0),ig=eg(!0,!0);eg(!1,!1),eg(!0,!1);const rg=ff.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>ng(t,e),redo:()=>({state:t,dispatch:e})=>ig(t,e)}},addProseMirrorPlugins(){return[tg(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),sg=sm.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Wp(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{$to:n}=e.selection,i=t();return 0===n.parentOffset?i.insertContentAt(Math.max(n.pos-2,0),{type:this.name}):i.insertContent({type:this.name}),i.command((({tr:t,dispatch:e})=>{var n;if(e){const{$to:e}=t.selection,i=e.end();if(e.nodeAfter)e.nodeAfter.isTextblock?t.setSelection(wc.create(t.doc,e.pos+1)):e.nodeAfter.isBlock?t.setSelection(xc.create(t.doc,e.pos)):t.setSelection(wc.create(t.doc,e.pos));else{const r=null===(n=e.parent.type.contentMatch.defaultType)||void 0===n?void 0:n.create();r&&(t.insert(i,r),t.setSelection(wc.create(t.doc,i+1)))}t.scrollIntoView()}return!0})).run()}}},addInputRules(){return[(t={find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type},new rf({find:t.find,handler:({state:e,range:n,match:i})=>{const r=Jp(t.getAttributes,void 0,i)||{},{tr:s}=e,o=n.from;let a=n.to;const l=t.type.create(r);if(i[1]){let t=o+i[0].lastIndexOf(i[1]);t>a?t=a:a=t+i[1].length;const e=i[0][i[0].length-1];s.insertText(e,o+i[0].length-1),s.replaceWith(t,a,l)}else i[0]&&s.insert(o-1,t.type.create(r)).delete(s.mapping.map(o),s.mapping.map(a));s.scrollIntoView()}}))];var t}}),og=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,ag=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,lg=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,cg=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,ug=rm.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>"normal"!==t.style.fontStyle&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Wp(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[em({find:og,type:this.type}),em({find:lg,type:this.type})]},addPasteRules(){return[om({find:ag,type:this.type}),om({find:cg,type:this.type})]}}),dg=sm.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Wp(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),hg=sm.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Wp(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),pg=rm.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>!!t.hasAttribute("style")&&{}}]},renderHTML({HTMLAttributes:t}){return["span",Wp(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Pf(t,this.type);return!!Object.entries(n).some((([,t])=>!!t))||e.unsetMark(this.name)}}}}),fg=/^(\d+)\.\s$/,mg=sm.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return 1===e?["ol",Wp(this.options.HTMLAttributes,n),0]:["ol",Wp(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(hg.name,this.editor.getAttributes(pg.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=im({find:fg,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=im({find:fg,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(pg.name)}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1],editor:this.editor})),[t]}}),gg=sm.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Wp(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),vg=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,yg=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,bg=rm.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>!!t.includes("line-through")&&{}}]},renderHTML({HTMLAttributes:t}){return["s",Wp(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[em({find:vg,type:this.type})]},addPasteRules(){return[om({find:yg,type:this.type})]}}),wg=sm.create({name:"text",group:"inline"}),kg=ff.create({name:"starterKit",addExtensions(){var t,e,n,i,r,s,o,a,l,c,u,d,h,p,f,m,g,v;const y=[];return!1!==this.options.blockquote&&y.push(lm.configure(null===(t=this.options)||void 0===t?void 0:t.blockquote)),!1!==this.options.bold&&y.push(pm.configure(null===(e=this.options)||void 0===e?void 0:e.bold)),!1!==this.options.bulletList&&y.push(vm.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&y.push(wm.configure(null===(i=this.options)||void 0===i?void 0:i.code)),!1!==this.options.codeBlock&&y.push(Sm.configure(null===(r=this.options)||void 0===r?void 0:r.codeBlock)),!1!==this.options.document&&y.push(Cm.configure(null===(s=this.options)||void 0===s?void 0:s.document)),!1!==this.options.dropcursor&&y.push(Mm.configure(null===(o=this.options)||void 0===o?void 0:o.dropcursor)),!1!==this.options.gapcursor&&y.push(Pm.configure(null===(a=this.options)||void 0===a?void 0:a.gapcursor)),!1!==this.options.hardBreak&&y.push(Bm.configure(null===(l=this.options)||void 0===l?void 0:l.hardBreak)),!1!==this.options.heading&&y.push(jm.configure(null===(c=this.options)||void 0===c?void 0:c.heading)),!1!==this.options.history&&y.push(rg.configure(null===(u=this.options)||void 0===u?void 0:u.history)),!1!==this.options.horizontalRule&&y.push(sg.configure(null===(d=this.options)||void 0===d?void 0:d.horizontalRule)),!1!==this.options.italic&&y.push(ug.configure(null===(h=this.options)||void 0===h?void 0:h.italic)),!1!==this.options.listItem&&y.push(dg.configure(null===(p=this.options)||void 0===p?void 0:p.listItem)),!1!==this.options.orderedList&&y.push(mg.configure(null===(f=this.options)||void 0===f?void 0:f.orderedList)),!1!==this.options.paragraph&&y.push(gg.configure(null===(m=this.options)||void 0===m?void 0:m.paragraph)),!1!==this.options.strike&&y.push(bg.configure(null===(g=this.options)||void 0===g?void 0:g.strike)),!1!==this.options.text&&y.push(wg.configure(null===(v=this.options)||void 0===v?void 0:v.text)),y}}),xg=rm.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>!!t.includes("underline")&&{}}]},renderHTML({HTMLAttributes:t}){return["u",Wp(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});class Sg extends yo{connect(){this.input=this.element.querySelector("textarea"),this.editor=new tm({element:this.containerTarget,extensions:[kg,xg],content:this.input.value,onUpdate:({editor:t})=>this.input.value=t.getHTML()}),window.editor=this.editor}}Sg.targets=["container"];var Cg=Sg;class _g extends yo{constructor(){super(...arguments),this.ENDPOINT="/api/newsletter"}register(){var t;const e=null===(t=document.querySelector("[name=csrfmiddlewaretoken]"))||void 0===t?void 0:t.value;this.emailTarget.setCustomValidity(""),this.emailTarget.checkValidity()?fetch(this.ENDPOINT,{method:"post",headers:{"Content-Type":"application/json","X-CSRFToken":e},body:JSON.stringify({email:this.emailTarget.value})}).then((t=>t.json())).then((t=>{var e,n;if(t.error)return this.emailTarget.setCustomValidity(t.error),void this.emailTarget.reportValidity();null===(e=this.element.querySelector(".form"))||void 0===e||e.classList.remove("visible"),null===(n=this.element.querySelector(".success"))||void 0===n||n.classList.add("visible")})):this.emailTarget.reportValidity()}}_g.targets=["email"];var Tg=_g;class Mg extends yo{constructor(){super(...arguments),this.counter=0}connect(){new IntersectionObserver(((t,e)=>{t.forEach((t=>{t.isIntersecting&&(this.countUp(),e.disconnect())}))})).observe(this.element)}countUp(){this.counterTimer=window.setInterval((()=>{console.log("teste"),this.counter+=this.stepValue,this.valueTarget.textContent=this.formatNumber(this.counter),this.counter>=this.finalValue&&this.disconnect()}),10)}isElementInScroll(t){const e=t.getBoundingClientRect();return e.top<(window.innerHeight||document.documentElement.clientHeight)&&e.bottom>0}disconnect(){clearInterval(this.counterTimer)}formatNumber(t){return`${this.prefixValue}${t}`}}Mg.values={prefix:String,step:{type:Number,default:1},final:Number},Mg.targets=["value"];var Og=Mg;class Eg extends yo{load(t){const e=new URL(this.urlValue,window.location.origin);e.searchParams.append("page",String(this.pageValue+1));const n=this.buttonTarget.textContent;this.buttonTarget.textContent=t.params.loading,fetch(e,{headers:{"Load-More":!0}}).then((t=>{if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return t.text()})).then((t=>{this.containerTarget.insertAdjacentHTML("beforeend",t),this.pageValue+=1})).finally((()=>{this.buttonTarget.textContent=n}))}}Eg.targets=["container","button"],Eg.values={url:String,page:Number};var Ag=Eg;class Ng extends yo{connect(){this.activeTherapistFilter="",this.mountHeroSlider(),this.mountVideosSlider()}filterTherapist({params:{filter:t},currentTarget:e}){var n;this.activeTherapistFilter!==t&&(this.therapistsTarget.classList.remove(`home__therapists--${this.activeTherapistFilter}`),console.dir(this.activeTherapistFilter),null===(n=this.therapistsTarget.querySelector(`.button-${this.activeTherapistFilter}`))||void 0===n||n.classList.remove("active")),this.activeTherapistFilter=t,this.therapistsTarget.classList.toggle(`home__therapists--${t}`),e.classList.toggle("active")}showTherapistDisclaim(t){"US"===t.currentTarget.value?(this.therapistLocationInputTarget.classList.add("d-none"),this.therapistDisclaimTarget.classList.remove("d-none")):(this.therapistDisclaimTarget.classList.add("d-none"),this.therapistLocationInputTarget.classList.remove("d-none"))}agreeTherapistDisclaim(){this.therapistLocationInputTarget.classList.remove("d-none"),this.therapistDisclaimTarget.classList.add("d-none")}toggleProtocol(t){t.currentTarget.classList.toggle("home__protocols__card--open")}mountHeroSlider(){this.hasHeroTarget&&(this.heroGlide=new wa(this.heroTarget,{type:"slider",perView:1,autoplay:4e3,gap:0}),this.heroGlide.mount({Autoplay:ga,Controls:ma}))}mountVideosSlider(){this.hasVideosTarget&&(this.videosGlide=new wa(this.videosTarget,{type:"slider",perView:1,autoplay:5e3}),this.videosGlide.mount({Autoplay:ga,Controls:ma,Swipe:ua}))}}Ng.targets=["hero","therapists","therapistDisclaim","therapistLocationInput","videos"];var Dg=Ng;class Lg extends yo{constructor(){super(...arguments),this.menu_opened_state="menu--opened",this.opened_state="menu__container--opened",this.closing_state="menu__container--closing"}connect(){this.hasNavTarget&&(this.submenus=this.navTarget.querySelectorAll(".menu__dropdown > a"),this.submenus.forEach((t=>t.addEventListener("click",this.toggleSubMenu.bind(this)))))}toggleMenu(){this.navTarget.classList.contains(this.opened_state)?this.closeMenu():this.openMenu()}openMenu(){this.navTarget.classList.remove(this.closing_state),this.navTarget.classList.add(this.opened_state),this.element.classList.add(this.menu_opened_state),this.navTarget.setAttribute("aria-expanded","true")}closeMenu(){this.navTarget.classList.add(this.closing_state),this.navTarget.classList.remove(this.opened_state),setTimeout((()=>this.navTarget.classList.remove(this.closing_state)),500),this.element.classList.remove(this.menu_opened_state),this.navTarget.setAttribute("aria-expanded","false")}toggleSubMenu(t){var e;null===(e=t.target.parentElement)||void 0===e||e.classList.toggle("menu__dropdown--opened")}toggleFooterMenu(){this.hasFooterMenuTarget&&(this.footerMenuTarget.classList.toggle(this.menu_opened_state),this.footerMenuTarget.scrollIntoView({behavior:"smooth",block:"end"}))}}Lg.targets=["nav","footerMenu"];var Ig=Lg,Pg=n(197),Bg=n.n(Pg);class jg extends yo{connect(){this.handlerDocumentBrazil(),this.handlerPhoneNumbers()}handlerDocumentBrazil(){this.formTarget.isbr.checked&&this.documentBrazilTarget.classList.remove("d-none");const t=this.documentBrazilToggleContainerTarget.querySelector("input[type=checkbox]");t.addEventListener("change",(()=>{t.checked?this.documentBrazilTarget.classList.remove("d-none"):this.documentBrazilTarget.classList.add("d-none")}));const e=this.documentBrazilTarget.querySelector("input");let n;e.addEventListener("keyup",(()=>{clearTimeout(n),n=setTimeout((()=>{const t=function(t){let e=t;if(e=e.replace(/\D+/g,""),"00000000000"===e||"11111111111"===e||"22222222222"===e||"33333333333"===e||"44444444444"===e||"55555555555"===e||"66666666666"===e||"77777777777"===e||"88888888888"===e||"99999999999"===e)return!1;let n=0;for(let t=0;t<9;t++)n+=parseInt(e.charAt(t))*(10-t);let i=11-n%11;if(10!==i&&11!==i||(i=0),i!==parseInt(e.charAt(9)))return!1;n=0;for(let t=0;t<10;t++)n+=parseInt(e.charAt(t))*(11-t);return i=11-n%11,10!==i&&11!==i||(i=0),i===parseInt(e.charAt(10))}(e.value);console.log(t,this.documentBrazilTarget.dataset),t?e.setCustomValidity(""):e.setCustomValidity(this.documentBrazilTarget.dataset.invalidMessage||"CPF Invalid"),e.reportValidity()}),1200)}))}handlerPhoneNumbers(){this.hasTelTarget&&this.telTargets.forEach((t=>{const e=t.querySelector("input"),n=()=>{const t=Bg().getInstance(e);t&&t.isValidNumber()?(t.setNumber(t.getNumber()),e.setCustomValidity("")):e.setCustomValidity("Phone Number Invalid!")};Bg()(e,{utilsScript:"/static/vendors/intl-tel-utils.js?1701962297308",strictMode:!0,nationalMode:!1,separateDialCode:!1,initialCountry:"auto",geoIpLookup:t=>{fetch("https://ipapi.co/json").then((t=>t.json())).then((e=>t(e.country_code))).catch((()=>t("us")))}}),t.addEventListener("change",n),t.addEventListener("keyup",n)}))}}jg.targets=["form","documentBrazilToggleContainer","documentBrazil","tel"];var Fg=jg,Rg=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class $g extends yo{connect(){this.newValue||(this.modal=this.element.querySelector("dialog"));new URLSearchParams(window.location.search).has("new","true")&&this.addNewAddress()}loadAddress(t){var e;const n=t.params.id,i=null===(e=document.querySelector("[name=csrfmiddlewaretoken]"))||void 0===e?void 0:e.value,r=new FormData;r.set("pk",n),r.set("csrfmiddlewaretoken",i);const s=["country","city","city_outside","state_or_region","state_or_region_outside","default_shipping","default_billing"];fetch(t.params.url,{method:"POST",body:r}).then((t=>t.json())).then((t=>{const e=t.response;if(!t.error){Object.keys(e).forEach((t=>{const n=this.accountNewAddressOutletElement.querySelector(`[name=${t}]`);null===n&&s.includes(t)||(n.value=e[t])}));this.accountNewAddressOutletElement.country.querySelector(`[value="${e.country.id}"]`).selected=!0,""!==e.state_or_region_outside?this.accountNewAddressOutletElement.state_or_region.value=e.state_or_region_outside:this.accountNewAddressOutletElement.state_or_region.value=e.state_or_region.name,""!==e.city_outside?this.accountNewAddressOutletElement.city.value=e.city_outside:this.accountNewAddressOutletElement.city.value=e.city.name,this.accountNewAddressOutletElement.default_shipping.checked=e.default_shipping,this.accountNewAddressOutletElement.default_billing.checked=e.default_billing,this.accountNewAddressOutlet.enable()}}))}openModal(){this.modal.showModal()}closeModal(){this.modal.close()}delete(t){return Rg(this,void 0,void 0,(function*(){const e=new FormData;e.set("pk",t.params.id);201===(yield fetch(t.params.url,{method:"POST",body:e})).status&&(this.closeModal(),this.element.remove())}))}addNewAddress(){this.accountNewAddressOutlet.enable()}}$g.values={new:Boolean},$g.outlets=["account-new-address"];var Vg=$g;class zg extends yo{constructor(){super(...arguments),this.openClass="visible"}connect(){this.handlerPhoneNumbers()}enable(t=!1){this.element.classList.contains(this.openClass)||this.toggleVisibility(),this.element.scrollIntoView({behavior:"smooth"})}handlerCountry(t){"1"===t.currentTarget.value?(Inputmask("99999-999").mask(this.zipCodeInputTarget),this.zipCodeInputTarget.dataset.query="br",this.handleControlFields(!0)):(Inputmask.remove(this.zipCodeInputTarget),this.zipCodeInputTarget.dataset.query="",this.handleControlFields(!1))}handlerZipCode(t){const e=this.zipCodeInputTarget.value.replace("_","");"br"===this.zipCodeInputTarget.dataset.query&&9===e.length&&fetch(`https://viacep.com.br/ws/${e}/json`).then((t=>t.json())).then((t=>{t.error?this.handleControlFields():(this.element.street_address.value=t.logradouro,this.element.district.value=t.bairro,this.element.city.value=t.localidade,this.element.state_or_region.value=t.uf,this.element.complement.value=t.complemento,this.element.street_number.focus())}))}saveAddress(t){var e;t.currentTarget.disabled=!0;const n=null===(e=document.querySelector("[name=csrfmiddlewaretoken]"))||void 0===e?void 0:e.value,i=new FormData(this.element);this.element.querySelectorAll("input[disabled]").forEach((t=>{i.set(t.name,t.value)}));const r=new FormData;r.set("pk",i.get("pk")||""),r.set("csrfmiddlewaretoken",n),r.set("data",JSON.stringify(Object.fromEntries(i.entries()))),fetch(this.element.action,{method:"POST",mode:"same-origin",headers:{"X-CSRFToken":n},body:r}).then((t=>t.json())).then((e=>{"success"===e.response.status&&(e.response.redirect?document.location.href=e.response.redirect:document.location.hash.includes("first")?document.location.href="/conta/edit":document.location.reload()),t.currentTarget.disabled=!1}))}handleControlFields(t=!0){this.element.street_address.disabled=t,this.element.district.disabled=t,this.element.city.disabled=t,this.element.state_or_region.disabled=t}toggleVisibility(){this.element.classList.toggle(this.openClass)}handlerPhoneNumbers(){this.hasTelTarget&&this.telTargets.forEach((t=>{const e=t.querySelector("input");Bg()(e,{utilsScript:"/static/vendors/intl-tel-utils.js?1701962297307",nationalMode:!1,separateDialCode:!1,preferredCountries:["br","es","fr","it","us"],autoInsertDialCode:!0,initialCountry:"auto",geoIpLookup:t=>{fetch("https://ipapi.co/json").then((t=>t.json())).then((e=>t(e.country_code))).catch((()=>t("us")))}}),t.addEventListener("change",(()=>{const e=t.querySelector("input"),n=window.intlTelInputGlobals.getInstance(e);n&&n.isValidNumber()?(n.setNumber(n.getNumber()),e.setCustomValidity("")):e.setCustomValidity("Phone Number Invalid!")}))}))}}zg.targets=["tel","zipCodeInput"];var Hg=zg;class qg extends yo{connect(){this.hasSliderTarget&&(this.slider=new wa(".treatments__results .glide",{type:"slider",bound:!0,peek:50,gap:4,perView:8,breakpoints:{768:{perView:2}}}),this.slider.mount({Controls:ma,Breakpoints:ya,Images:da,Swipe:ua}))}disconnect(){this.hasSliderTarget&&this.slider.destroy()}}qg.targets=["slider"];var Kg=qg;class Wg extends yo{connect(){this.videosGlide=new wa(this.videosSliderTarget,{type:"slider",bound:!0,perView:3,gap:16,breakpoints:{768:{perView:1,autoplay:4e3}}}),this.videosGlide.mount({Autoplay:ga,Controls:ma,Swipe:ua,Breakpoints:ya})}openModal(t){var e,n;(null===(n=null===(e=t.currentTarget.parentElement)||void 0===e?void 0:e.parentElement)||void 0===n?void 0:n.parentElement.querySelector("dialog")).showModal()}openVideoModal(t){t.currentTarget.parentElement.querySelector("dialog").showModal()}closeModal(t){t.currentTarget.parentElement.close()}resetFilter(){this.listTarget.querySelectorAll(".agenda__card").forEach((t=>{t.classList.remove("d-none")}))}filterCity(t){const e=t.currentTarget.value;this.resetFilter(),"0"!==e&&this.listTarget.querySelectorAll(".agenda__card").forEach((t=>{t.dataset.city&&t.dataset.city!=e&&t.classList.add("d-none")}))}filterCountry(t){const e=t.currentTarget.value;this.resetFilter(),"0"!==e&&this.listTarget.querySelectorAll(".agenda__card").forEach((t=>{t.dataset.country&&t.dataset.country!=e.toLowerCase()&&t.classList.add("d-none")}))}showAll(t){this.listTarget.classList.add("all"),t.currentTarget.classList.add("d-none")}}Wg.targets=["videosSlider","list"];var Ug=Wg;class Gg extends yo{connect(){this.handlerPhoneNumbers()}closeModal(){this.element.close()}success(t){this.waUrlTarget.setAttribute("href",`https://api.whatsapp.com/send?phone=${t}`),this.element.querySelector(".dialog").classList.add("d-none"),this.successTarget.classList.remove("d-none")}submitForm(){const t=new FormData(this.formTarget),e=t.get("csrfmiddlewaretoken"),n={};for(const[e,i]of t.entries())n[e]=i;this.formTarget.checkValidity()?fetch("/ajax/agenda-subscription",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":e},body:JSON.stringify(n)}).then((t=>t.json())).then((t=>{t.response.success?this.success(t.response.organizer_wa):console.log(t.response)})).catch((t=>console.debug(t))):this.formTarget.reportValidity()}handlerPhoneNumbers(){this.hasTelTarget&&this.telTargets.forEach((t=>{const e=t.querySelector("input"),n=()=>{const t=Bg().getInstance(e);t&&t.isValidNumber()?(t.setNumber(t.getNumber()),e.setCustomValidity("")):e.setCustomValidity("Phone Number Invalid!")};Bg()(e,{utilsScript:"/static/vendors/intl-tel-utils.js?1701962297308",strictMode:!0,nationalMode:!1,separateDialCode:!1,initialCountry:"auto",geoIpLookup:t=>{fetch("https://ipapi.co/json").then((t=>t.json())).then((e=>t(e.country_code))).catch((()=>t("us")))}}),t.addEventListener("change",n),t.addEventListener("keyup",n)}))}}Gg.targets=["form","success","waUrl","tel"];var Jg=Gg;class Yg extends yo{constructor(){super(...arguments),this.glides={}}connect(){var t;this.hasSliderTarget&&(null===(t=this.sliderTargets)||void 0===t||t.forEach((t=>{const e=t.dataset.year;this.glides[e]=new wa(".glide--".concat(e),{type:"carousel",bound:!0,gap:4,perView:5,focusAt:"center",breakpoints:{768:{perView:2,peek:{before:0,after:50}}}}).mount({Controls:ma,Breakpoints:ya,Swipe:ua,Images:da})})))}}Yg.targets=["slider"];var Qg=Yg;class Xg extends yo{connect(){this.testimoniesGlide=new wa(this.testimoniesSliderTarget,{type:"slider",bound:!0,peek:50,gap:16,perView:4,breakpoints:{768:{perView:2}}}),this.testimoniesGlide.mount({Images:da,Controls:ma,Breakpoints:ya,Swipe:ua}),this.galleryGlide=new wa(this.gallerySliderTarget,{type:"slider",bound:!0,peek:100,gap:4,perView:1,startAt:1,autoplay:3e3,breakpoints:{768:{perView:1,startAt:0,gap:16}}}),this.galleryGlide.mount({Autoplay:ga,Images:da,Controls:ma,Breakpoints:ya,Swipe:ua})}selectCategory(t){window.location.href=t.currentTarget.selectedOptions[0].dataset.url}}Xg.targets=["testimoniesSlider","gallerySlider"];var Zg=Xg;class tv extends yo{connect(){const t=this.element.querySelector("select[name=country]");null==t||t.addEventListener("change",this.showDisclaim.bind(this)),this.resultsValue>=1&&this.resultsTarget.scrollIntoView({behavior:"smooth",block:"start"})}toggleFilters(){this.filtersTarget.classList.toggle("opened")}showDisclaim(t){"US"===t.currentTarget.value?this.disclaimTarget.classList.remove("d-none"):this.disclaimTarget.classList.add("d-none")}}tv.targets=["filters","disclaim","results"],tv.values={results:{type:Number,default:0}};var ev=tv;class nv extends yo{constructor(){super(...arguments),this.brazilSelected=!1,this.cities=new Set,this.districts=new Set,this.inputEmptyClone=null}connect(){this.setType(Number(this.serviceTypeSelectorTarget.dataset.type)),this.setup()}setup(){this.setupCountrySelector(),this.handleInitialData()}setupCountrySelector(){this.countrySelect=this.countryContainerTarget.querySelector("select"),this.countrySelect.addEventListener("change",this.updateStatesOptions.bind(this)),this.brazilSelected="1"===this.countrySelect.value}handleInitialData(){"1"===this.serviceTypeSelectorTarget.dataset.type?this.handleInitialHomeCare():this.handleInitialClinic()}handleInitialHomeCare(){const t=this.cityContainerTarget.querySelector("[name=location-city]"),e=this.districtContainerTarget.querySelector("[name=location-district]");this.updateStatesOptions();const n=document.createElement("input");n.type="text",n.value="",n.disabled=!0,n.classList.add("fake_input"),this.inputEmptyClone=document.createElement("div"),this.inputEmptyClone.classList.add("input"),this.inputEmptyClone.appendChild(n);const i=t.value.split(",").filter((t=>""!==t));i.forEach((t=>{this.addCity(t,!1)}));const r=e.value.split(",").filter((t=>""!==t));console.log(r),r.forEach((t=>{this.addDistrict(t,!1)}))}handleInitialClinic(){const t=this.countryContainerTarget.querySelector("select");null==t||t.addEventListener("change",this.handlerClinicCountry.bind(this)),this.handleClinicAddressInputs("1"===(null==t?void 0:t.value));const e=this.postalCodeContainerTarget.querySelector("input");null==e||e.addEventListener("keyup",this.handlerZipCode.bind(this))}selectType({currentTarget:t,params:{type:e}}){var n,i;null===(i=null===(n=this.serviceTypeSelectorTarget)||void 0===n?void 0:n.querySelector("button.active"))||void 0===i||i.classList.remove("active"),this.serviceTypeSelectorTarget.dataset.type=e,null==t||t.classList.add("active"),this.setType(e)}setType(t){let e;this.element.querySelector("[name=location-type]").value=String(t),this.typeFormTarget.innerHTML="",0===t?(e=this.clinicFormTarget.content.cloneNode(!0),this.typeFormTarget.classList.remove("place--variant")):(e=this.homeCareFormTarget.content.cloneNode(!0),this.typeFormTarget.classList.add("place--variant")),this.typeFormTarget.append(e),this.setup()}selectState(){if(""===this.stateSelectTarget.value)return;this.stateContainerTarget.querySelector("input[name=location-state_or_region]").value=this.stateSelectTarget.value,fetch(`/api/geodata/cities/?limit=1000&state_name=${this.stateSelectTarget.value}`).then((t=>t.json())).then((t=>{this.citySelectTarget.querySelectorAll("option").forEach((t=>t.remove())),this.citySelectTarget.options.add(new Option("-------","")),t.results.forEach((t=>{this.citySelectTarget.options.add(new Option(t.name,t.name))}))}))}selectCity(){""!==this.citySelectTarget.value&&(this.addCity(this.citySelectTarget.value),this.citySelectTarget.selectedOptions[0].selected=!1)}selectCityText(){""!==this.citySelectTextTarget.value&&(this.addCity(this.citySelectTextTarget.value),this.citySelectTextTarget.value="")}addCity(t,e=!0){var n,i,r;if(this.cities.has(t))return;const s=null===(n=this.inputEmptyClone)||void 0===n?void 0:n.cloneNode(!0),o=s.children.item(0);if(s.dataset.value=t,s.addEventListener("click",this.removeCity.bind(this)),o.value=t,this.cityInputsContainerTarget.appendChild(s),this.cities.add(t),e){this.cityContainerTarget.querySelector("[name=location-city]").value=[...this.cities].join()}3==this.cities.size?null===(i=this.citySelectTarget.parentElement)||void 0===i||i.classList.add("d-none"):null===(r=this.citySelectTarget.parentElement)||void 0===r||r.classList.remove("d-none")}removeCity(t){var e,n;this.cities.delete(t.currentTarget.dataset.value),t.currentTarget.remove();this.cityContainerTarget.querySelector("[name=location-city]").value=[...this.cities].join(),3==this.cities.size?null===(e=this.citySelectTarget.parentElement)||void 0===e||e.classList.add("d-none"):null===(n=this.citySelectTarget.parentElement)||void 0===n||n.classList.remove("d-none")}selectDistrict(t){""!==this.districtInputTarget.value&&(this.addDistrict(this.districtInputTarget.value),this.districtInputTarget.value="")}addDistrict(t,e=!1){var n,i,r;if(this.districts.has(t))return;const s=null===(n=this.inputEmptyClone)||void 0===n?void 0:n.cloneNode(!0),o=s.children.item(0);if(s.dataset.value=t,s.addEventListener("click",this.removeDistrict.bind(this)),o.value=t,this.districtInputsContainerTarget.appendChild(s),this.districts.add(t),e){this.districtContainerTarget.querySelector("[name=location-district]").value=[...this.districts].join()}3==this.cities.size?null===(i=this.districtInputTarget.parentElement)||void 0===i||i.classList.add("d-none"):null===(r=this.districtInputTarget.parentElement)||void 0===r||r.classList.remove("d-none")}removeDistrict(t){var e,n;this.districts.delete(t.currentTarget.dataset.value),t.currentTarget.remove();this.districtContainerTarget.querySelector("[name=location-district]").value=[...this.districts].join(),3==this.districts.size?null===(e=this.citySelectTarget.parentElement)||void 0===e||e.classList.add("d-none"):null===(n=this.citySelectTarget.parentElement)||void 0===n||n.classList.remove("d-none")}updateStatesOptions(){var t,e;if(""===this.countrySelect.value||!this.hasStateContainerTarget)return;this.brazilSelected="1"===this.countrySelect.value;const n=this.stateContainerTarget.querySelector("[name=location-state_or_region]");this.brazilSelected?(null===(t=this.stateContainerTarget.querySelector(".custom"))||void 0===t||t.classList.remove("custom--variant"),this.cityContainerTarget.classList.remove("custom--variant"),fetch("/api/geodata/states/?limit=100&country=1").then((t=>t.json())).then((t=>{this.stateSelectTarget.querySelectorAll("option").forEach((t=>t.remove())),this.stateSelectTarget.options.add(new Option("-------","")),t.results.forEach((t=>{const e=n.value===t.initials;this.stateSelectTarget.options.add(new Option(t.name,t.initials,e,e))}))})).then((t=>this.selectState()))):(null===(e=this.stateContainerTarget.querySelector(".custom"))||void 0===e||e.classList.add("custom--variant"),this.cityContainerTarget.classList.add("custom--variant"))}changeAvatar(t){const e=t.currentTarget.previousElementSibling.querySelector("input[type=file]");e.addEventListener("change",this.handleAvatarPreview.bind(this)),e.click()}handleAvatarPreview(t){var e;const n=null===(e=t.target.files)||void 0===e?void 0:e[0];this.avatarContainerTarget.querySelector(".jcrop-image");if(n){const t=new FileReader;t.onload=t=>{var e;const n=new Image;n.src=null===(e=t.target)||void 0===e?void 0:e.result,this.avatarCropContainerTarget.remove(),this.avatarContainerTarget.appendChild(n),this.avatarContainerTarget.classList.add("picture--preview")},t.readAsDataURL(n)}}handlerClinicCountry(){const t=this.countryContainerTarget.querySelector("select");this.handleClinicAddressInputs("1"===(null==t?void 0:t.value))}handleClinicAddressInputs(t){this.typeFormTarget.querySelectorAll(".address").forEach((e=>{e.querySelector("input").readOnly=t}));const e=this.postalCodeContainerTarget.querySelector("input");Inputmask.remove(e),t?Inputmask({mask:"99999-999",removeMaskOnSubmit:!0}).mask(e):Inputmask({alias:"numeric"}).mask(e)}handlerZipCode(){if("1"!==this.countryContainerTarget.querySelector("select").value)return;const t=this.postalCodeContainerTarget.querySelector("input"),e=t.value.replace("_","");9===e.length&&fetch(`https://viacep.com.br/ws/${e}/json`).then((t=>t.json())).then((e=>{e.erro?(t.setCustomValidity(t.dataset.errorMessage||"CEP não encontrado!"),t.reportValidity()):(t.setCustomValidity(""),this.typeFormTarget.querySelector("[name=location-street_address]").value=e.logradouro,this.typeFormTarget.querySelector("[name=location-district]").value=e.bairro,this.typeFormTarget.querySelector("[name=location-city]").value=e.localidade,this.typeFormTarget.querySelector("[name=location-state_or_region]").value=e.uf,this.typeFormTarget.querySelector("[name=location-complement]").value=e.complemento,this.typeFormTarget.querySelector("[name=location-street_number]").focus())}))}}nv.targets=["serviceTypeSelector","countryContainer","stateContainer","cityContainer","districtContainer","cityInputsContainer","districtInputsContainer","stateSelect","citySelect","citySelectText","districtInput","postalCodeContainer","typeForm","clinicForm","homeCareForm","avatarContainer","avatarCropContainer"];var iv=nv;class rv extends yo{glideTargetConnected(t){new wa(t,{type:"slider",perView:3,gap:16,breakpoints:{768:{perView:1,peek:{before:0,after:50}}}}).mount({Breakpoints:ya,Swipe:ua})}setCycle(t){var e;null===(e=this.element.querySelector(`.price-${t.params.plan}`))||void 0===e||e.classList.toggle("yearly")}subscribe(t){var e;const n=null===(e=t.currentTarget.parentElement)||void 0===e?void 0:e.querySelector("input[name=subscription-cycle]"),i=n&&n.checked?"yearly":"monthly";this.therapistSubscriptionFormOutlet.subscribe({planId:t.params.plan,cycle:i})}}rv.targets=["glide"],rv.outlets=["therapist-subscription-form"];var sv=rv;class ov extends yo{connect(){this.setAddress()}subscribe({planId:t,cycle:e}){this.element.classList.add("visible"),this.element.cycle.value=e,this.element.plan_id.value=t,this.element.scrollIntoView({behavior:"smooth"})}setAddress(){const t=this.addressSelectTarget.selectedOptions[0];t&&(this.addressDetailTarget.querySelector(".detail__label").textContent=t.text,this.addressDetailTarget.querySelector(".detail__address").innerHTML=t.dataset.display,this.element.billing_address_id.value=t.value)}}ov.targets=["addressSelect","addressDetail"];var av=ov;class lv extends yo{connect(){this.setupFeaturedSlider()}setupFeaturedSlider(){new wa(this.featuredSliderTarget,{type:"slide",startAt:0,perView:4,gap:16,peek:{before:0,after:20},breakpoints:{768:{gap:26,perView:2}}}).mount({Breakpoints:ya,Autoplay:ga,Swipe:ua})}toggleCategory(){this.categoryListTarget.classList.toggle("opened")}toggleSort(t){this.sortTarget.classList.toggle("opened")}singlePreview(t){this.productListTarget.classList.remove("product__list--double"),this.resetPreview(t.currentTarget)}doublePreview(t){this.productListTarget.classList.add("product__list--double"),this.resetPreview(t.currentTarget)}resetPreview(t){var e;null===(e=t.parentElement)||void 0===e||e.querySelectorAll(".preview-box").forEach((t=>t.classList.remove("preview-box--active"))),t.querySelectorAll(".preview-box").forEach((t=>t.classList.add("preview-box--active")))}toggleMenu({currentTarget:t}){t.closest(".sub").classList.toggle("opened")}}lv.targets=["featuredSlider","previewSwitch","categoryList","sort","productList"];var cv=lv,uv=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class dv extends yo{constructor(){super(...arguments),this.shippingSvgIcon='<svg xmlns="http://www.w3.org/2000/svg" height="16" width="20" viewBox="0 0 640 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--\x3e<path d="M112 0C85.5 0 64 21.5 64 48V96H16c-8.8 0-16 7.2-16 16s7.2 16 16 16H64 272c8.8 0 16 7.2 16 16s-7.2 16-16 16H64 48c-8.8 0-16 7.2-16 16s7.2 16 16 16H64 240c8.8 0 16 7.2 16 16s-7.2 16-16 16H64 16c-8.8 0-16 7.2-16 16s7.2 16 16 16H64 208c8.8 0 16 7.2 16 16s-7.2 16-16 16H64V416c0 53 43 96 96 96s96-43 96-96H384c0 53 43 96 96 96s96-43 96-96h32c17.7 0 32-14.3 32-32s-14.3-32-32-32V288 256 237.3c0-17-6.7-33.3-18.7-45.3L512 114.7c-12-12-28.3-18.7-45.3-18.7H416V48c0-26.5-21.5-48-48-48H112zM544 237.3V256H416V160h50.7L544 237.3zM160 368a48 48 0 1 1 0 96 48 48 0 1 1 0-96zm272 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0z"/></svg>',this.selectedAttributes={},this.filteredVariants=[]}connect(){this.setupSliders(),this.setupContents(),this.setupVariants(),this.openDescriptionIfDesktop()}setupSliders(){this.mainGlide=new wa(this.sliderMainTarget,{type:"slider",startAt:0,perView:1}).mount({Controls:ma,Images:da}),this.thumbsGlide=new wa(this.sliderThumbsTarget,{type:"slider",startAt:0,perView:3,bound:!0}).mount({Images:da}),this.sliderThumbsTarget.querySelectorAll(".glide__slide").forEach((t=>{t.addEventListener("click",(()=>this.mainGlide.go(t.dataset.index)))}))}setupContents(){this.hasContentAccordionTarget&&(this.contentNavTarget.querySelectorAll("li").forEach((t=>{t.addEventListener("click",(t=>{this.toggleNavAndAccordion(t.currentTarget.dataset.index)}))})),this.contentAccordionTarget.querySelectorAll(".accordion__header").forEach((t=>{t.addEventListener("click",(t=>{var e;this.toggleNavAndAccordion(null===(e=t.currentTarget.parentElement)||void 0===e?void 0:e.dataset.index)}))})))}setupVariants(){if(!this.hasVariantsTarget)return;this.variantsChoices=variants;const t=this.buildOptionsByAttributes();this.variantsAttributes=this.variantsTarget.querySelectorAll(".store-product__attribute"),this.totalAttributes=this.variantsAttributes.length,this.variantsAttributes.forEach((e=>{const n=e.querySelector(".store-product__options");n.innerHTML="";const i=e.dataset.id;t[i].forEach((t=>{const r=document.createElement("input");r.type="radio",r.id=`${e.dataset.id}_${t}`,r.name=e.dataset.name||"",r.value=t,r.checked=t===this.selectedAttributes[i],r.dataset.id=e.dataset.id;const s=document.createElement("label");s.setAttribute("for",`${e.dataset.id}_${t}`),s.dataset.id=e.dataset.id,s.innerText=t,s.appendChild(r),s.addEventListener("click",this.selectVariantAttribute.bind(this)),this.disableVariantAttribute(e.dataset.id,t)&&(s.ariaDisabled="disabled",r.disabled=!0),n.appendChild(s)}))}))}disableVariantAttribute(t,e){if(0===this.filteredVariants.length||this.selectedAttributes[Number(t)]&&this.selectedAttributes[Number(t)]===e)return!1;if(this.selectedAttributes[Number(t)]&&this.selectedAttributes[Number(t)]!==e)return!0;return 0===this.filteredVariants.filter((n=>n.attributes.some((n=>String(n.id)===t&&n.value===e)))).length}buildOptionsByAttributes(){const t={};this.variantsChoices.forEach((e=>{e.attributes.forEach((e=>{void 0===t[e.id]?t[e.id]=[{value:e.value,order:e.order}]:t[e.id].some((t=>t.value==e.value))||t[e.id].push({value:e.value,order:e.order})}))}));const e={};return Object.keys(t).forEach((n=>{t[n].sort(((t,e)=>t.order-e.order)),e[n]=t[n].map((t=>t.value))})),e}selectVariantAttribute(t){const e=t.target.dataset.id,n=t.target.querySelector("input").value;""===n||this.selectedAttributes[e]===n?delete this.selectedAttributes[e]:this.selectedAttributes[e]=n,this.updateFilteredVariants(),this.setupVariants(),this.validateVariant()}updateFilteredVariants(){const t=Object.entries(this.selectedAttributes).length;this.filteredVariants=t>0?this.variantsChoices.filter((e=>{let n=0;return Object.entries(this.selectedAttributes).forEach((([t,i])=>{e.attributes.find((e=>String(e.id)===t&&e.value===i))&&n++})),n===t})):[]}validateVariant(){const t=Object.entries(this.selectedAttributes).length;let e;t===this.totalAttributes&&(e=this.variantsChoices.find((e=>{let n=0;return Object.entries(this.selectedAttributes).forEach((([t,i])=>{e.attributes.find((e=>String(e.id)===t&&e.value===i))&&n++})),n===t}))),e?(this.variantInputTarget.value=e.id,this.addToCartButtonTarget.disabled=!1,this.addToCartButtonTarget.textContent=this.addToCartButtonTarget.dataset.submitText):(this.variantInputTarget.value="",this.addToCartButtonTarget.disabled=!0,this.addToCartButtonTarget.textContent=this.addToCartButtonTarget.dataset.selectText)}showNotificationForm(t){var e;const n=t.currentTarget;null===(e=n.nextElementSibling)||void 0===e||e.classList.remove("d-none"),n.classList.add("d-none")}increaseQuantity(){this.hasQuantityInputTarget&&(this.quantityInputTarget.value=String(Number(this.quantityInputTarget.value)+1))}decreaseQuantity(){this.hasQuantityInputTarget&&Number(this.quantityInputTarget.value)>1&&(this.quantityInputTarget.value=String(Number(this.quantityInputTarget.value)-1))}calculateShipping(t){return uv(this,void 0,void 0,(function*(){const e=Number(t.params.weight)*Number(this.quantityInputTarget.value),n=this.calcShippingInputTarget.value.replace(/-/g,"");fetch(`/ajax/shipping?code_to=${n}&weight=${e}`,{headers:{"Content-Type":"application/json"}}).then((t=>t.json())).then((e=>{var n,i;const r=null===(i=null===(n=t.target)||void 0===n?void 0:n.parentElement)||void 0===i?void 0:i.nextElementSibling;e.response.delivery_option.forEach((t=>{const e=document.createElement("li");e.innerHTML=`${this.shippingSvgIcon} ${t.label}`,null==r||r.replaceChildren(e)}))}))}))}toggleNavAndAccordion(t){this.toggleNav(this.contentNavTarget.querySelector(`[data-index="${t}"]`)),this.toggleAccordion(this.contentAccordionTarget.querySelector(`[data-index="${t}"]`))}toggleNav(t){this.contentNavTarget.querySelectorAll(".active").forEach((t=>t.classList.remove("active"))),t.classList.add("active")}toggleAccordion(t){const e=this.contentAccordionTarget.querySelector(".opened");if(t===e)t.classList.remove("opened"),setTimeout((()=>{t.classList.remove("opening","opened")}),600);else{null==e||e.classList.remove("opened"),setTimeout((()=>{null==e||e.classList.remove("opening","opened")}),600);const n=t.querySelector(".accordion__body");t.classList.add("opening","opened"),n.style.height=`${n.scrollHeight}px`,t.classList.remove("opening"),setTimeout((()=>{n.style.height=""}),300)}}openDescriptionIfDesktop(){if(window.matchMedia("(min-width: 768px)").matches){const t=this.contentAccordionTarget.querySelectorAll(".accordion__item")[0];this.toggleNavAndAccordion(t.dataset.index)}}}dv.targets=["sliderMain","sliderThumbs","contentNav","contentAccordion","quantityInput","calcShippingInput","variants","variantInput","addToCartButton"];var hv=dv;class pv extends yo{connect(){var t;null===(t=this.formTarget.querySelector(".cart__item__quantity input"))||void 0===t||t.addEventListener("change",(()=>{this.updateCart()}))}updateCart(){const t=document.createElement("input");t.type="hidden",t.name="action",t.value="update",this.formTarget.appendChild(t),this.formTarget.submit()}removeItem({currentTarget:t}){const e=t.querySelector("input");null==e||(e.checked=!0),this.updateCart()}increaseQuantity({currentTarget:t}){var e;const n=null===(e=t.closest(".control"))||void 0===e?void 0:e.querySelector("input");n.value=String(parseInt((null==n?void 0:n.value)||"0")+1),this.updateForm()}decreaseQuantity({currentTarget:t}){var e;const n=null===(e=t.closest(".control"))||void 0===e?void 0:e.querySelector("input");1!==parseInt(null==n?void 0:n.value)&&(n.value=String(parseInt((null==n?void 0:n.value)||"0")-1),this.updateForm())}updateForm(){clearTimeout(this.updateFormTimer),this.updateFormTimer=setTimeout((()=>{clearTimeout(this.updateFormTimer);const t=document.createElement("input");t.type="hidden",t.name="action",t.value="update",this.formTarget.appendChild(t),this.formTarget.submit()}),500)}}pv.targets=["form"];var fv=pv;class mv extends yo{connect(){this.shippingAddressInput=this.element.querySelector("input[name=shipping_address_id]"),this.billingAddressInput=this.element.querySelector("input[name=billing_address_id]"),this.paymentMethodInput=this.element.querySelector("input[name=payment-method]"),this.updateAddressDetail(this.element.querySelector("select#shipping-address-select"),this.shippingAddressInput),this.updateAddressDetail(this.element.querySelector("select#billing-address-select"),this.billingAddressInput),this.element.querySelectorAll("input[name=shipping_method]").forEach((t=>t.addEventListener("click",this.updateForm.bind(this)))),this.paymentMethodInput.value="credit"}setBillingAddress(t){const e=t.currentTarget;this.updateAddressDetail(e,this.billingAddressInput),this.updateForm()}setShippingAddress(t){const e=t.currentTarget;this.updateAddressDetail(e,this.shippingAddressInput),this.updateForm()}updatePaymentMethod({params:t}){this.paymentMethodInput.value=t.id}updateAddressDetail(t,e){var n;const i=t.selectedOptions[0],r=null===(n=t.parentElement)||void 0===n?void 0:n.nextElementSibling,s=r.querySelector(".detail__label"),o=r.querySelector(".detail__address");e.value=t.value,s.textContent=i.label,o.innerHTML=i.dataset.display||"",r.classList.remove("d-none")}updateForm(){clearTimeout(this.updateFormTimer),this.updateFormTimer=setTimeout((()=>{clearTimeout(this.updateFormTimer);const t=document.createElement("input");t.type="hidden",t.name="action",t.value="shipping-update",this.formTarget.appendChild(t),this.formTarget.submit()}),500)}}mv.targets=["form"];var gv=mv;const vv=class{constructor(t=document.documentElement,e=oo){this.logger=console,this.debug=!1,this.logDebugActivity=(t,e,n={})=>{this.debug&&this.logFormattedMessage(t,e,n)},this.element=t,this.schema=e,this.dispatcher=new ps(this),this.router=new so(this),this.actionDescriptorFilters=Object.assign({},fs)}static start(t,e){const n=new this(t,e);return n.start(),n}async start(){await new Promise((t=>{"loading"==document.readyState?document.addEventListener("DOMContentLoaded",(()=>t())):t()})),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(t,e){this.load({identifier:t,controllerConstructor:e})}registerActionOption(t,e){this.actionDescriptorFilters[t]=e}load(t,...e){(Array.isArray(t)?t:[t,...e]).forEach((t=>{t.controllerConstructor.shouldLoad&&this.router.loadDefinition(t)}))}unload(t,...e){(Array.isArray(t)?t:[t,...e]).forEach((t=>this.router.unloadIdentifier(t)))}get controllers(){return this.router.contexts.map((t=>t.controller))}getControllerForElementAndIdentifier(t,e){const n=this.router.getContextForElementAndIdentifier(t,e);return n?n.controller:null}handleError(t,e,n){var i;this.logger.error("%s\n\n%o\n\n%o",e,t,n),null===(i=window.onerror)||void 0===i||i.call(window,e,"",0,0,t)}logFormattedMessage(t,e,n={}){n=Object.assign({application:this},n),this.logger.groupCollapsed(`${t} #${e}`),this.logger.log("details:",Object.assign({},n)),this.logger.groupEnd()}}.start();window.Stimulus=vv,vv.register("password-visibility",wo),vv.register("video",class extends yo{constructor(){super(...arguments),this.playing=!1}connect(){this.element.addEventListener("click",(()=>{this.playing?(this.playing=!1,this.element.pause()):(this.playing=!0,this.element.play())}))}}),vv.register("slider",class extends yo{connect(){var t;if("instructors"===(null===(t=this.element.dataset)||void 0===t?void 0:t.style))this.instructorsGlide();else this.defaultGlide();this.glide.mount({Autoplay:ga,Controls:ma,Swipe:ua,Breakpoints:ya})}defaultGlide(){this.glide=new wa(this.element,{type:"slider",perView:1,autoplay:4e3})}instructorsGlide(){this.glide=new wa(this.element,{type:"carousel",perView:4,autoplay:4e3,breakpoints:{768:{perView:3}}})}}),vv.register("editor",Cg),vv.register("newsletter",Tg),vv.register("numberup",Og),vv.register("load-more",Ag),vv.register("home",Dg),vv.register("menu",Ig),vv.register("account-edit",Fg),vv.register("account-address",Vg),vv.register("account-new-address",Hg),vv.register("account-orders",class extends yo{filter(t){const e=t.currentTarget.value,n=new URL(window.location.href);n.searchParams.set("filter",e),window.location.href=n.toString()}toggleDetails(t){var e,n;const i=t.currentTarget;null===(e=i.querySelector("svg"))||void 0===e||e.classList.toggle("rotate"),null===(n=this.element.querySelector(`[data-details-number="${i.dataset.number}"]`))||void 0===n||n.classList.toggle("visible")}}),vv.register("our-story",class extends yo{constructor(){super(...arguments),this.openedClass="our_story__item--opened"}toggleOpenedState(t){var e,n;this.element.querySelectorAll(".our_story__item").forEach((t=>t.classList.remove(this.openedClass))),null===(n=null===(e=t.currentTarget.parentElement)||void 0===e?void 0:e.parentElement)||void 0===n||n.classList.toggle(this.openedClass)}}),vv.register("treatments-list",class extends yo{constructor(){super(...arguments),this.openedClass="treatments__card--opened"}toggleOpenedState(t){var e,n;null===(n=null===(e=t.currentTarget.parentElement)||void 0===e?void 0:e.parentElement)||void 0===n||n.classList.toggle(this.openedClass)}}),vv.register("treatments-results",Kg),vv.register("agenda",Ug),vv.register("agenda-dialog",Jg),vv.register("gallery",class extends yo{connect(){console.log("AGENDA CONTROLLER")}openModal(t){var e;null===(e=t.currentTarget.parentElement.querySelector("dialog"))||void 0===e||e.showModal()}closeModal(t){const e=t.currentTarget.parentElement;console.log(e),e.close()}}),vv.register("press",Qg),vv.register("articles",Zg),vv.register("therapists-search",ev),vv.register("therapist-form",iv),vv.register("therapist-subscription",sv),vv.register("therapist-subscription-form",av),vv.register("store-home",cv),vv.register("store-product",hv),vv.register("store-cart",fv),vv.register("store-checkout",gv);var yv=n(541),bv=n(588),wv=n.n(bv);ds()().mask(document.querySelectorAll("input")),new yv.WOW({animateClass:"animate__animated"}).init(),window.Toastify=wv()}()}();
//# sourceMappingURL=application.03317c58b304c694c9b0.js.map